cscope 15 $HOME/codecentral/uqembeddedsys/sourcelib/components/os/FreeRTOS               0000198173
	@croutine.c

29 
	~"F»eRTOS.h
"

30 
	~"sk.h
"

31 
	~"üoutše.h
"

34 #iàĞ
cÚfigUSE_CO_ROUTINES
 != 0 )

40 #ifdeà
pÜtREMOVE_STATIC_QUALIFIER


41 

	)

46 
Li¡_t
 
	gpxR—dyCoRoutšeLi¡s
[ 
cÚfigMAX_CO_ROUTINE_PRIORITIES
 ];

47 
Li¡_t
 
	gxD–ayedCoRoutšeLi¡1
;

48 
Li¡_t
 
	gxD–ayedCoRoutšeLi¡2
;

49 
Li¡_t
 * 
	gpxD–ayedCoRoutšeLi¡
 = 
NULL
;

50 
Li¡_t
 * 
	gpxOv”æowD–ayedCoRoutšeLi¡
 = 
NULL
;

51 
Li¡_t
 
	gxP’dšgR—dyCoRoutšeLi¡
;

54 
CRCB_t
 * 
	gpxCu¼’tCoRoutše
 = 
NULL
;

55 
UBa£Ty³_t
 
	guxTİCoRoutšeR—dyPriÜ™y
 = 0;

56 
TickTy³_t
 
	gxCoRoutšeTickCouÁ
 = 0, 
	gxLa¡TickCouÁ
 = 0, 
	gxPas£dTicks
 = 0;

59 
	#cÜINITIAL_STATE
 ( 0 )

	)

68 
	#´vAddCoRoutšeToR—dyQueue
Ğ
pxCRCB
 ) \

	)

70 ifĞ
	gpxCRCB
->
	guxPriÜ™y
 > 
	guxTİCoRoutšeR—dyPriÜ™y
 ) \

72 
	guxTİCoRoutšeR—dyPriÜ™y
 = 
pxCRCB
->
uxPriÜ™y
; \

74 
vLi¡In£¹End
ĞĞ
Li¡_t
 * ) &Ğ
pxR—dyCoRoutšeLi¡s
[ 
pxCRCB
->
uxPriÜ™y
 ] ), &ĞpxCRCB->
xG’”icLi¡I‹m
 ) ); \

81 
´vIn™Ÿli£CoRoutšeLi¡s
( );

89 
´vCheckP’dšgR—dyLi¡
( );

99 
´vCheckD–ayedLi¡
( );

103 
Ba£Ty³_t
 
	$xCoRoutšeC»©e
Ğ
üCOROUTINE_CODE
 
pxCoRoutšeCode
,

104 
UBa£Ty³_t
 
uxPriÜ™y
,

105 
UBa£Ty³_t
 
uxIndex
 )

107 
Ba£Ty³_t
 
xR‘uº
;

108 
CRCB_t
 * 
pxCoRoutše
;

111 
pxCoRoutše
 = ( 
CRCB_t
 * ) 
	`pvPÜtM®loc
( ( CRCB_t ) );

113 ifĞ
pxCoRoutše
 )

117 ifĞ
pxCu¼’tCoRoutše
 =ğ
NULL
 )

119 
pxCu¼’tCoRoutše
 = 
pxCoRoutše
;

120 
	`´vIn™Ÿli£CoRoutšeLi¡s
();

124 ifĞ
uxPriÜ™y
 >ğ
cÚfigMAX_CO_ROUTINE_PRIORITIES
 )

126 
uxPriÜ™y
 = 
cÚfigMAX_CO_ROUTINE_PRIORITIES
 - 1;

130 
pxCoRoutše
->
uxS‹
 = 
cÜINITIAL_STATE
;

131 
pxCoRoutše
->
uxPriÜ™y
 = uxPriority;

132 
pxCoRoutše
->
uxIndex
 = uxIndex;

133 
pxCoRoutše
->
pxCoRoutšeFunùiÚ
 = 
pxCoRoutšeCode
;

136 
	`vLi¡In™Ÿli£I‹m
Ğ&Ğ
pxCoRoutše
->
xG’”icLi¡I‹m
 ) );

137 
	`vLi¡In™Ÿli£I‹m
Ğ&Ğ
pxCoRoutše
->
xEv’tLi¡I‹m
 ) );

142 
	`li¡SET_LIST_ITEM_OWNER
Ğ&Ğ
pxCoRoutše
->
xG’”icLi¡I‹m
 ),…xCoRoutine );

143 
	`li¡SET_LIST_ITEM_OWNER
Ğ&Ğ
pxCoRoutše
->
xEv’tLi¡I‹m
 ),…xCoRoutine );

146 
	`li¡SET_LIST_ITEM_VALUE
Ğ&Ğ
pxCoRoutše
->
xEv’tLi¡I‹m
 ), ( ( 
TickTy³_t
 ) 
cÚfigMAX_CO_ROUTINE_PRIORITIES
 - ( TickTy³_ˆè
uxPriÜ™y
 ) );

150 
	`´vAddCoRoutšeToR—dyQueue
Ğ
pxCoRoutše
 );

152 
xR‘uº
 = 
pdPASS
;

156 
xR‘uº
 = 
”rCOULD_NOT_ALLOCATE_REQUIRED_MEMORY
;

159  
xR‘uº
;

160 
	}
}

163 
	$vCoRoutšeAddToD–ayedLi¡
Ğ
TickTy³_t
 
xTicksToD–ay
,

164 
Li¡_t
 * 
pxEv’tLi¡
 )

166 
TickTy³_t
 
xTimeToWake
;

170 
xTimeToWake
 = 
xCoRoutšeTickCouÁ
 + 
xTicksToD–ay
;

175 Ğè
	`uxLi¡Remove
ĞĞ
Li¡I‹m_t
 * ) &Ğ
pxCu¼’tCoRoutše
->
xG’”icLi¡I‹m
 ) );

178 
	`li¡SET_LIST_ITEM_VALUE
Ğ&Ğ
pxCu¼’tCoRoutše
->
xG’”icLi¡I‹m
 ), 
xTimeToWake
 );

180 ifĞ
xTimeToWake
 < 
xCoRoutšeTickCouÁ
 )

184 
	`vLi¡In£¹
ĞĞ
Li¡_t
 * ) 
pxOv”æowD–ayedCoRoutšeLi¡
, ( 
Li¡I‹m_t
 * ) &Ğ
pxCu¼’tCoRoutše
->
xG’”icLi¡I‹m
 ) );

190 
	`vLi¡In£¹
ĞĞ
Li¡_t
 * ) 
pxD–ayedCoRoutšeLi¡
, ( 
Li¡I‹m_t
 * ) &Ğ
pxCu¼’tCoRoutše
->
xG’”icLi¡I‹m
 ) );

193 ifĞ
pxEv’tLi¡
 )

197 
	`vLi¡In£¹
Ğ
pxEv’tLi¡
, &Ğ
pxCu¼’tCoRoutše
->
xEv’tLi¡I‹m
 ) );

199 
	}
}

202 
	$´vCheckP’dšgR—dyLi¡
( )

207  
	`li¡LIST_IS_EMPTY
Ğ&
xP’dšgR—dyCoRoutšeLi¡
 ) =ğ
pdFALSE
 )

209 
CRCB_t
 * 
pxUnblockedCRCB
;

212 
	`pÜtDISABLE_INTERRUPTS
();

214 
pxUnblockedCRCB
 = ( 
CRCB_t
 * ) 
	`li¡GET_OWNER_OF_HEAD_ENTRY
ĞĞ&
xP’dšgR—dyCoRoutšeLi¡
 ) );

215 Ğè
	`uxLi¡Remove
Ğ&Ğ
pxUnblockedCRCB
->
xEv’tLi¡I‹m
 ) );

217 
	`pÜtENABLE_INTERRUPTS
();

219 Ğè
	`uxLi¡Remove
Ğ&Ğ
pxUnblockedCRCB
->
xG’”icLi¡I‹m
 ) );

220 
	`´vAddCoRoutšeToR—dyQueue
Ğ
pxUnblockedCRCB
 );

222 
	}
}

225 
	$´vCheckD–ayedLi¡
( )

227 
CRCB_t
 * 
pxCRCB
;

229 
xPas£dTicks
 = 
	`xTaskG‘TickCouÁ
(è- 
xLa¡TickCouÁ
;

231  
xPas£dTicks
 )

233 
xCoRoutšeTickCouÁ
++;

234 
xPas£dTicks
--;

237 ifĞ
xCoRoutšeTickCouÁ
 == 0 )

239 
Li¡_t
 * 
pxTemp
;

243 
pxTemp
 = 
pxD–ayedCoRoutšeLi¡
;

244 
pxD–ayedCoRoutšeLi¡
 = 
pxOv”æowD–ayedCoRoutšeLi¡
;

245 
pxOv”æowD–ayedCoRoutšeLi¡
 = 
pxTemp
;

249  
	`li¡LIST_IS_EMPTY
Ğ
pxD–ayedCoRoutšeLi¡
 ) =ğ
pdFALSE
 )

251 
pxCRCB
 = ( 
CRCB_t
 * ) 
	`li¡GET_OWNER_OF_HEAD_ENTRY
Ğ
pxD–ayedCoRoutšeLi¡
 );

253 ifĞ
xCoRoutšeTickCouÁ
 < 
	`li¡GET_LIST_ITEM_VALUE
Ğ&Ğ
pxCRCB
->
xG’”icLi¡I‹m
 ) ) )

259 
	`pÜtDISABLE_INTERRUPTS
();

266 Ğè
	`uxLi¡Remove
Ğ&Ğ
pxCRCB
->
xG’”icLi¡I‹m
 ) );

269 ifĞ
pxCRCB
->
xEv’tLi¡I‹m
.
pxCÚš”
 )

271 Ğè
	`uxLi¡Remove
Ğ&Ğ
pxCRCB
->
xEv’tLi¡I‹m
 ) );

274 
	`pÜtENABLE_INTERRUPTS
();

276 
	`´vAddCoRoutšeToR—dyQueue
Ğ
pxCRCB
 );

280 
xLa¡TickCouÁ
 = 
xCoRoutšeTickCouÁ
;

281 
	}
}

284 
	$vCoRoutšeScheduË
( )

289 ifĞ
pxD–ayedCoRoutšeLi¡
 !ğ
NULL
 )

292 
	`´vCheckP’dšgR—dyLi¡
();

295 
	`´vCheckD–ayedLi¡
();

298  
	`li¡LIST_IS_EMPTY
Ğ&Ğ
pxR—dyCoRoutšeLi¡s
[ 
uxTİCoRoutšeR—dyPriÜ™y
 ] ) ) )

300 ifĞ
uxTİCoRoutšeR—dyPriÜ™y
 == 0 )

306 --
uxTİCoRoutšeR—dyPriÜ™y
;

311 
	`li¡GET_OWNER_OF_NEXT_ENTRY
Ğ
pxCu¼’tCoRoutše
, &Ğ
pxR—dyCoRoutšeLi¡s
[ 
uxTİCoRoutšeR—dyPriÜ™y
 ] ) );

314 Ğ
pxCu¼’tCoRoutše
->
pxCoRoutšeFunùiÚ
 )ĞpxCu¼’tCoRoutše,…xCu¼’tCoRoutše->
uxIndex
 );

316 
	}
}

319 
	$´vIn™Ÿli£CoRoutšeLi¡s
( )

321 
UBa£Ty³_t
 
uxPriÜ™y
;

323  
uxPriÜ™y
 = 0; uxPriÜ™y < 
cÚfigMAX_CO_ROUTINE_PRIORITIES
; uxPriority++ )

325 
	`vLi¡In™Ÿli£
ĞĞ
Li¡_t
 * ) &Ğ
pxR—dyCoRoutšeLi¡s
[ 
uxPriÜ™y
 ] ) );

328 
	`vLi¡In™Ÿli£
ĞĞ
Li¡_t
 * ) &
xD–ayedCoRoutšeLi¡1
 );

329 
	`vLi¡In™Ÿli£
ĞĞ
Li¡_t
 * ) &
xD–ayedCoRoutšeLi¡2
 );

330 
	`vLi¡In™Ÿli£
ĞĞ
Li¡_t
 * ) &
xP’dšgR—dyCoRoutšeLi¡
 );

334 
pxD–ayedCoRoutšeLi¡
 = &
xD–ayedCoRoutšeLi¡1
;

335 
pxOv”æowD–ayedCoRoutšeLi¡
 = &
xD–ayedCoRoutšeLi¡2
;

336 
	}
}

339 
Ba£Ty³_t
 
	$xCoRoutšeRemoveFromEv’tLi¡
ĞcÚ¡ 
Li¡_t
 * 
pxEv’tLi¡
 )

341 
CRCB_t
 * 
pxUnblockedCRCB
;

342 
Ba£Ty³_t
 
xR‘uº
;

347 
pxUnblockedCRCB
 = ( 
CRCB_t
 * ) 
	`li¡GET_OWNER_OF_HEAD_ENTRY
Ğ
pxEv’tLi¡
 );

348 Ğè
	`uxLi¡Remove
Ğ&Ğ
pxUnblockedCRCB
->
xEv’tLi¡I‹m
 ) );

349 
	`vLi¡In£¹End
ĞĞ
Li¡_t
 * ) &Ğ
xP’dšgR—dyCoRoutšeLi¡
 ), &Ğ
pxUnblockedCRCB
->
xEv’tLi¡I‹m
 ) );

351 ifĞ
pxUnblockedCRCB
->
uxPriÜ™y
 >ğ
pxCu¼’tCoRoutše
->uxPriority )

353 
xR‘uº
 = 
pdTRUE
;

357 
xR‘uº
 = 
pdFALSE
;

360  
xR‘uº
;

361 
	}
}

	@event_groups.c

30 
	~<¡dlib.h
>

35 
	#MPU_WRAPPERS_INCLUDED_FROM_API_FILE


	)

38 
	~"F»eRTOS.h
"

39 
	~"sk.h
"

40 
	~"tim”s.h
"

41 
	~"ev’t_groups.h
"

47 #undeà
MPU_WRAPPERS_INCLUDED_FROM_API_FILE


52 #ià
cÚfigUSE_16_BIT_TICKS
 == 1

53 
	#ev’tCLEAR_EVENTS_ON_EXIT_BIT
 0x0100U

	)

54 
	#ev’tUNBLOCKED_DUE_TO_BIT_SET
 0x0200U

	)

55 
	#ev’tWAIT_FOR_ALL_BITS
 0x0400U

	)

56 
	#ev’tEVENT_BITS_CONTROL_BYTES
 0xff00U

	)

58 
	#ev’tCLEAR_EVENTS_ON_EXIT_BIT
 0x01000000UL

	)

59 
	#ev’tUNBLOCKED_DUE_TO_BIT_SET
 0x02000000UL

	)

60 
	#ev’tWAIT_FOR_ALL_BITS
 0x04000000UL

	)

61 
	#ev’tEVENT_BITS_CONTROL_BYTES
 0xff000000UL

	)

64 
	sEv’tGroupDef_t


66 
Ev’tB™s_t
 
	muxEv’tB™s
;

67 
Li¡_t
 
	mxTasksWa™šgFÜB™s
;

69 #iàĞ
cÚfigUSE_TRACE_FACILITY
 == 1 )

70 
UBa£Ty³_t
 
	muxEv’tGroupNumb”
;

73 #iàĞĞ
cÚfigSUPPORT_STATIC_ALLOCATION
 =ğ1 ) && ( 
cÚfigSUPPORT_DYNAMIC_ALLOCATION
 == 1 ) )

74 
ušt8_t
 
	mucStiÿÎyAÎoÿ‹d
;

76 } 
	tEv’tGroup_t
;

88 
Ba£Ty³_t
 
	$´vTe¡Wa™CÚd™iÚ
ĞcÚ¡ 
Ev’tB™s_t
 
uxCu¼’tEv’tB™s
,

89 cÚ¡ 
Ev’tB™s_t
 
uxB™sToWa™FÜ
,

90 cÚ¡ 
Ba£Ty³_t
 
xWa™FÜAÎB™s
 ) 
PRIVILEGED_FUNCTION
;

94 #iàĞ
cÚfigSUPPORT_STATIC_ALLOCATION
 == 1 )

96 
Ev’tGroupHªdË_t
 
	$xEv’tGroupC»©eStic
Ğ
SticEv’tGroup_t
 * 
pxEv’tGroupBufãr
 )

98 
Ev’tGroup_t
 * 
pxEv’tB™s
;

101 
	`cÚfigASSERT
Ğ
pxEv’tGroupBufãr
 );

103 #iàĞ
cÚfigASSERT_DEFINED
 == 1 )

108 vŞ©
size_t
 
xSize
 = Ğ
SticEv’tGroup_t
 );

109 
	`cÚfigASSERT
Ğ
xSize
 =ğĞ
Ev’tGroup_t
 ) );

114 
pxEv’tB™s
 = ( 
Ev’tGroup_t
 * ) 
pxEv’tGroupBufãr
;

116 ifĞ
pxEv’tB™s
 !ğ
NULL
 )

118 
pxEv’tB™s
->
uxEv’tB™s
 = 0;

119 
	`vLi¡In™Ÿli£
Ğ&Ğ
pxEv’tB™s
->
xTasksWa™šgFÜB™s
 ) );

121 #iàĞ
cÚfigSUPPORT_DYNAMIC_ALLOCATION
 == 1 )

126 
pxEv’tB™s
->
ucStiÿÎyAÎoÿ‹d
 = 
pdTRUE
;

130 
	`ŒaûEVENT_GROUP_CREATE
Ğ
pxEv’tB™s
 );

137 
	`ŒaûEVENT_GROUP_CREATE_FAILED
();

140  
pxEv’tB™s
;

141 
	}
}

146 #iàĞ
cÚfigSUPPORT_DYNAMIC_ALLOCATION
 == 1 )

148 
Ev’tGroupHªdË_t
 
	$xEv’tGroupC»©e
( )

150 
Ev’tGroup_t
 * 
pxEv’tB™s
;

165 
pxEv’tB™s
 = ( 
Ev’tGroup_t
 * ) 
	`pvPÜtM®loc
( ( EventGroup_t ) );

167 ifĞ
pxEv’tB™s
 !ğ
NULL
 )

169 
pxEv’tB™s
->
uxEv’tB™s
 = 0;

170 
	`vLi¡In™Ÿli£
Ğ&Ğ
pxEv’tB™s
->
xTasksWa™šgFÜB™s
 ) );

172 #iàĞ
cÚfigSUPPORT_STATIC_ALLOCATION
 == 1 )

177 
pxEv’tB™s
->
ucStiÿÎyAÎoÿ‹d
 = 
pdFALSE
;

181 
	`ŒaûEVENT_GROUP_CREATE
Ğ
pxEv’tB™s
 );

185 
	`ŒaûEVENT_GROUP_CREATE_FAILED
();

188  
pxEv’tB™s
;

189 
	}
}

194 
Ev’tB™s_t
 
	$xEv’tGroupSync
Ğ
Ev’tGroupHªdË_t
 
xEv’tGroup
,

195 cÚ¡ 
Ev’tB™s_t
 
uxB™sToS‘
,

196 cÚ¡ 
Ev’tB™s_t
 
uxB™sToWa™FÜ
,

197 
TickTy³_t
 
xTicksToWa™
 )

199 
Ev’tB™s_t
 
uxOrigš®B™V®ue
, 
uxR‘uº
;

200 
Ev’tGroup_t
 * 
pxEv’tB™s
 = 
xEv’tGroup
;

201 
Ba£Ty³_t
 
xAÌ—dyY›lded
;

202 
Ba£Ty³_t
 
xTimeoutOccu¼ed
 = 
pdFALSE
;

204 
	`cÚfigASSERT
ĞĞ
uxB™sToWa™FÜ
 & 
ev’tEVENT_BITS_CONTROL_BYTES
 ) == 0 );

205 
	`cÚfigASSERT
Ğ
uxB™sToWa™FÜ
 != 0 );

206 #iàĞĞ
INCLUDE_xTaskG‘ScheduËrS‹
 =ğ1 ) || ( 
cÚfigUSE_TIMERS
 == 1 ) )

208 
	`cÚfigASSERT
Ğ!ĞĞ
	`xTaskG‘ScheduËrS‹
(è=ğ
skSCHEDULER_SUSPENDED
 ) && ( 
xTicksToWa™
 != 0 ) ) );

212 
	`vTaskSu¥’dAÎ
();

214 
uxOrigš®B™V®ue
 = 
pxEv’tB™s
->
uxEv’tB™s
;

216 Ğè
	`xEv’tGroupS‘B™s
Ğ
xEv’tGroup
, 
uxB™sToS‘
 );

218 ifĞĞĞ
uxOrigš®B™V®ue
 | 
uxB™sToS‘
 ) & 
uxB™sToWa™FÜ
 ) == uxBitsToWaitFor )

221 
uxR‘uº
 = ( 
uxOrigš®B™V®ue
 | 
uxB™sToS‘
 );

225 
pxEv’tB™s
->
uxEv’tB™s
 &ğ~
uxB™sToWa™FÜ
;

227 
xTicksToWa™
 = 0;

231 ifĞ
xTicksToWa™
 !ğĞ
TickTy³_t
 ) 0 )

233 
	`ŒaûEVENT_GROUP_SYNC_BLOCK
Ğ
xEv’tGroup
, 
uxB™sToS‘
, 
uxB™sToWa™FÜ
 );

238 
	`vTaskPÏûOnUnÜd”edEv’tLi¡
Ğ&Ğ
pxEv’tB™s
->
xTasksWa™šgFÜB™s
 ), ( 
uxB™sToWa™FÜ
 | 
ev’tCLEAR_EVENTS_ON_EXIT_BIT
 | 
ev’tWAIT_FOR_ALL_BITS
 ), 
xTicksToWa™
 );

244 
uxR‘uº
 = 0;

250 
uxR‘uº
 = 
pxEv’tB™s
->
uxEv’tB™s
;

251 
xTimeoutOccu¼ed
 = 
pdTRUE
;

255 
xAÌ—dyY›lded
 = 
	`xTaskResumeAÎ
();

257 ifĞ
xTicksToWa™
 !ğĞ
TickTy³_t
 ) 0 )

259 ifĞ
xAÌ—dyY›lded
 =ğ
pdFALSE
 )

261 
	`pÜtYIELD_WITHIN_API
();

265 
	`mtCOVERAGE_TEST_MARKER
();

272 
uxR‘uº
 = 
	`uxTaskRe£tEv’tI‹mV®ue
();

274 ifĞĞ
uxR‘uº
 & 
ev’tUNBLOCKED_DUE_TO_BIT_SET
 ) =ğĞ
Ev’tB™s_t
 ) 0 )

277 
	`skENTER_CRITICAL
();

279 
uxR‘uº
 = 
pxEv’tB™s
->
uxEv’tB™s
;

285 ifĞĞ
uxR‘uº
 & 
uxB™sToWa™FÜ
 ) == uxBitsToWaitFor )

287 
pxEv’tB™s
->
uxEv’tB™s
 &ğ~
uxB™sToWa™FÜ
;

291 
	`mtCOVERAGE_TEST_MARKER
();

294 
	`skEXIT_CRITICAL
();

296 
xTimeoutOccu¼ed
 = 
pdTRUE
;

305 
uxR‘uº
 &ğ~
ev’tEVENT_BITS_CONTROL_BYTES
;

308 
	`ŒaûEVENT_GROUP_SYNC_END
Ğ
xEv’tGroup
, 
uxB™sToS‘
, 
uxB™sToWa™FÜ
, 
xTimeoutOccu¼ed
 );

311 Ğè
xTimeoutOccu¼ed
;

313  
uxR‘uº
;

314 
	}
}

317 
Ev’tB™s_t
 
	$xEv’tGroupWa™B™s
Ğ
Ev’tGroupHªdË_t
 
xEv’tGroup
,

318 cÚ¡ 
Ev’tB™s_t
 
uxB™sToWa™FÜ
,

319 cÚ¡ 
Ba£Ty³_t
 
xCË¬OnEx™
,

320 cÚ¡ 
Ba£Ty³_t
 
xWa™FÜAÎB™s
,

321 
TickTy³_t
 
xTicksToWa™
 )

323 
Ev’tGroup_t
 * 
pxEv’tB™s
 = 
xEv’tGroup
;

324 
Ev’tB™s_t
 
uxR‘uº
, 
uxCÚŒŞB™s
 = 0;

325 
Ba£Ty³_t
 
xWa™CÚd™iÚM‘
, 
xAÌ—dyY›lded
;

326 
Ba£Ty³_t
 
xTimeoutOccu¼ed
 = 
pdFALSE
;

330 
	`cÚfigASSERT
Ğ
xEv’tGroup
 );

331 
	`cÚfigASSERT
ĞĞ
uxB™sToWa™FÜ
 & 
ev’tEVENT_BITS_CONTROL_BYTES
 ) == 0 );

332 
	`cÚfigASSERT
Ğ
uxB™sToWa™FÜ
 != 0 );

333 #iàĞĞ
INCLUDE_xTaskG‘ScheduËrS‹
 =ğ1 ) || ( 
cÚfigUSE_TIMERS
 == 1 ) )

335 
	`cÚfigASSERT
Ğ!ĞĞ
	`xTaskG‘ScheduËrS‹
(è=ğ
skSCHEDULER_SUSPENDED
 ) && ( 
xTicksToWa™
 != 0 ) ) );

339 
	`vTaskSu¥’dAÎ
();

341 cÚ¡ 
Ev’tB™s_t
 
uxCu¼’tEv’tB™s
 = 
pxEv’tB™s
->
uxEv’tB™s
;

344 
xWa™CÚd™iÚM‘
 = 
	`´vTe¡Wa™CÚd™iÚ
Ğ
uxCu¼’tEv’tB™s
, 
uxB™sToWa™FÜ
, 
xWa™FÜAÎB™s
 );

346 ifĞ
xWa™CÚd™iÚM‘
 !ğ
pdFALSE
 )

350 
uxR‘uº
 = 
uxCu¼’tEv’tB™s
;

351 
xTicksToWa™
 = ( 
TickTy³_t
 ) 0;

354 ifĞ
xCË¬OnEx™
 !ğ
pdFALSE
 )

356 
pxEv’tB™s
->
uxEv’tB™s
 &ğ~
uxB™sToWa™FÜ
;

360 
	`mtCOVERAGE_TEST_MARKER
();

363 ifĞ
xTicksToWa™
 =ğĞ
TickTy³_t
 ) 0 )

367 
uxR‘uº
 = 
uxCu¼’tEv’tB™s
;

368 
xTimeoutOccu¼ed
 = 
pdTRUE
;

376 ifĞ
xCË¬OnEx™
 !ğ
pdFALSE
 )

378 
uxCÚŒŞB™s
 |ğ
ev’tCLEAR_EVENTS_ON_EXIT_BIT
;

382 
	`mtCOVERAGE_TEST_MARKER
();

385 ifĞ
xWa™FÜAÎB™s
 !ğ
pdFALSE
 )

387 
uxCÚŒŞB™s
 |ğ
ev’tWAIT_FOR_ALL_BITS
;

391 
	`mtCOVERAGE_TEST_MARKER
();

397 
	`vTaskPÏûOnUnÜd”edEv’tLi¡
Ğ&Ğ
pxEv’tB™s
->
xTasksWa™šgFÜB™s
 ), ( 
uxB™sToWa™FÜ
 | 
uxCÚŒŞB™s
 ), 
xTicksToWa™
 );

402 
uxR‘uº
 = 0;

404 
	`ŒaûEVENT_GROUP_WAIT_BITS_BLOCK
Ğ
xEv’tGroup
, 
uxB™sToWa™FÜ
 );

407 
xAÌ—dyY›lded
 = 
	`xTaskResumeAÎ
();

409 ifĞ
xTicksToWa™
 !ğĞ
TickTy³_t
 ) 0 )

411 ifĞ
xAÌ—dyY›lded
 =ğ
pdFALSE
 )

413 
	`pÜtYIELD_WITHIN_API
();

417 
	`mtCOVERAGE_TEST_MARKER
();

424 
uxR‘uº
 = 
	`uxTaskRe£tEv’tI‹mV®ue
();

426 ifĞĞ
uxR‘uº
 & 
ev’tUNBLOCKED_DUE_TO_BIT_SET
 ) =ğĞ
Ev’tB™s_t
 ) 0 )

428 
	`skENTER_CRITICAL
();

431 
uxR‘uº
 = 
pxEv’tB™s
->
uxEv’tB™s
;

435 ifĞ
	`´vTe¡Wa™CÚd™iÚ
Ğ
uxR‘uº
, 
uxB™sToWa™FÜ
, 
xWa™FÜAÎB™s
 ) !ğ
pdFALSE
 )

437 ifĞ
xCË¬OnEx™
 !ğ
pdFALSE
 )

439 
pxEv’tB™s
->
uxEv’tB™s
 &ğ~
uxB™sToWa™FÜ
;

443 
	`mtCOVERAGE_TEST_MARKER
();

448 
	`mtCOVERAGE_TEST_MARKER
();

451 
xTimeoutOccu¼ed
 = 
pdTRUE
;

453 
	`skEXIT_CRITICAL
();

461 
uxR‘uº
 &ğ~
ev’tEVENT_BITS_CONTROL_BYTES
;

464 
	`ŒaûEVENT_GROUP_WAIT_BITS_END
Ğ
xEv’tGroup
, 
uxB™sToWa™FÜ
, 
xTimeoutOccu¼ed
 );

467 Ğè
xTimeoutOccu¼ed
;

469  
uxR‘uº
;

470 
	}
}

473 
Ev’tB™s_t
 
	$xEv’tGroupCË¬B™s
Ğ
Ev’tGroupHªdË_t
 
xEv’tGroup
,

474 cÚ¡ 
Ev’tB™s_t
 
uxB™sToCË¬
 )

476 
Ev’tGroup_t
 * 
pxEv’tB™s
 = 
xEv’tGroup
;

477 
Ev’tB™s_t
 
uxR‘uº
;

481 
	`cÚfigASSERT
Ğ
xEv’tGroup
 );

482 
	`cÚfigASSERT
ĞĞ
uxB™sToCË¬
 & 
ev’tEVENT_BITS_CONTROL_BYTES
 ) == 0 );

484 
	`skENTER_CRITICAL
();

486 
	`ŒaûEVENT_GROUP_CLEAR_BITS
Ğ
xEv’tGroup
, 
uxB™sToCË¬
 );

490 
uxR‘uº
 = 
pxEv’tB™s
->
uxEv’tB™s
;

493 
pxEv’tB™s
->
uxEv’tB™s
 &ğ~
uxB™sToCË¬
;

495 
	`skEXIT_CRITICAL
();

497  
uxR‘uº
;

498 
	}
}

501 #iàĞĞ
cÚfigUSE_TRACE_FACILITY
 =ğ1 ) && ( 
INCLUDE_xTim”P’dFunùiÚC®l
 =ğ1 ) && ( 
cÚfigUSE_TIMERS
 == 1 ) )

503 
Ba£Ty³_t
 
	$xEv’tGroupCË¬B™sFromISR
Ğ
Ev’tGroupHªdË_t
 
xEv’tGroup
,

504 cÚ¡ 
Ev’tB™s_t
 
uxB™sToCË¬
 )

506 
Ba£Ty³_t
 
xR‘uº
;

508 
	`ŒaûEVENT_GROUP_CLEAR_BITS_FROM_ISR
Ğ
xEv’tGroup
, 
uxB™sToCË¬
 );

509 
xR‘uº
 = 
	`xTim”P’dFunùiÚC®lFromISR
Ğ
vEv’tGroupCË¬B™sC®lback
, ( * ) 
xEv’tGroup
, ( 
ušt32_t
 ) 
uxB™sToCË¬
, 
NULL
 );

511  
xR‘uº
;

512 
	}
}

517 
Ev’tB™s_t
 
	$xEv’tGroupG‘B™sFromISR
Ğ
Ev’tGroupHªdË_t
 
xEv’tGroup
 )

519 
UBa£Ty³_t
 
uxSavedIÁ”ru±Stus
;

520 
Ev’tGroup_t
 cÚ¡ * cÚ¡ 
pxEv’tB™s
 = 
xEv’tGroup
;

521 
Ev’tB™s_t
 
uxR‘uº
;

523 
uxSavedIÁ”ru±Stus
 = 
	`pÜtSET_INTERRUPT_MASK_FROM_ISR
();

525 
uxR‘uº
 = 
pxEv’tB™s
->
uxEv’tB™s
;

527 
	`pÜtCLEAR_INTERRUPT_MASK_FROM_ISR
Ğ
uxSavedIÁ”ru±Stus
 );

529  
uxR‘uº
;

530 
	}
}

533 
Ev’tB™s_t
 
	$xEv’tGroupS‘B™s
Ğ
Ev’tGroupHªdË_t
 
xEv’tGroup
,

534 cÚ¡ 
Ev’tB™s_t
 
uxB™sToS‘
 )

536 
Li¡I‹m_t
 * 
pxLi¡I‹m
, * 
pxNext
;

537 
Li¡I‹m_t
 cÚ¡ * 
pxLi¡End
;

538 
Li¡_t
 cÚ¡ * 
pxLi¡
;

539 
Ev’tB™s_t
 
uxB™sToCË¬
 = 0, 
uxB™sWa™edFÜ
, 
uxCÚŒŞB™s
;

540 
Ev’tGroup_t
 * 
pxEv’tB™s
 = 
xEv’tGroup
;

541 
Ba£Ty³_t
 
xM©chFound
 = 
pdFALSE
;

545 
	`cÚfigASSERT
Ğ
xEv’tGroup
 );

546 
	`cÚfigASSERT
ĞĞ
uxB™sToS‘
 & 
ev’tEVENT_BITS_CONTROL_BYTES
 ) == 0 );

548 
pxLi¡
 = &Ğ
pxEv’tB™s
->
xTasksWa™šgFÜB™s
 );

549 
pxLi¡End
 = 
	`li¡GET_END_MARKER
Ğ
pxLi¡
 );

550 
	`vTaskSu¥’dAÎ
();

552 
	`ŒaûEVENT_GROUP_SET_BITS
Ğ
xEv’tGroup
, 
uxB™sToS‘
 );

554 
pxLi¡I‹m
 = 
	`li¡GET_HEAD_ENTRY
Ğ
pxLi¡
 );

557 
pxEv’tB™s
->
uxEv’tB™s
 |ğ
uxB™sToS‘
;

560  
pxLi¡I‹m
 !ğ
pxLi¡End
 )

562 
pxNext
 = 
	`li¡GET_NEXT
Ğ
pxLi¡I‹m
 );

563 
uxB™sWa™edFÜ
 = 
	`li¡GET_LIST_ITEM_VALUE
Ğ
pxLi¡I‹m
 );

564 
xM©chFound
 = 
pdFALSE
;

567 
uxCÚŒŞB™s
 = 
uxB™sWa™edFÜ
 & 
ev’tEVENT_BITS_CONTROL_BYTES
;

568 
uxB™sWa™edFÜ
 &ğ~
ev’tEVENT_BITS_CONTROL_BYTES
;

570 ifĞĞ
uxCÚŒŞB™s
 & 
ev’tWAIT_FOR_ALL_BITS
 ) =ğĞ
Ev’tB™s_t
 ) 0 )

573 ifĞĞ
uxB™sWa™edFÜ
 & 
pxEv’tB™s
->
uxEv’tB™s
 ) !ğĞ
Ev’tB™s_t
 ) 0 )

575 
xM©chFound
 = 
pdTRUE
;

579 
	`mtCOVERAGE_TEST_MARKER
();

582 ifĞĞ
uxB™sWa™edFÜ
 & 
pxEv’tB™s
->
uxEv’tB™s
 ) == uxBitsWaitedFor )

585 
xM©chFound
 = 
pdTRUE
;

592 ifĞ
xM©chFound
 !ğ
pdFALSE
 )

595 ifĞĞ
uxCÚŒŞB™s
 & 
ev’tCLEAR_EVENTS_ON_EXIT_BIT
 ) !ğĞ
Ev’tB™s_t
 ) 0 )

597 
uxB™sToCË¬
 |ğ
uxB™sWa™edFÜ
;

601 
	`mtCOVERAGE_TEST_MARKER
();

609 
	`vTaskRemoveFromUnÜd”edEv’tLi¡
Ğ
pxLi¡I‹m
, 
pxEv’tB™s
->
uxEv’tB™s
 | 
ev’tUNBLOCKED_DUE_TO_BIT_SET
 );

615 
pxLi¡I‹m
 = 
pxNext
;

620 
pxEv’tB™s
->
uxEv’tB™s
 &ğ~
uxB™sToCË¬
;

622 Ğè
	`xTaskResumeAÎ
();

624  
pxEv’tB™s
->
uxEv’tB™s
;

625 
	}
}

628 
	$vEv’tGroupD–‘e
Ğ
Ev’tGroupHªdË_t
 
xEv’tGroup
 )

630 
Ev’tGroup_t
 * 
pxEv’tB™s
 = 
xEv’tGroup
;

631 cÚ¡ 
Li¡_t
 * 
pxTasksWa™šgFÜB™s
;

633 
	`cÚfigASSERT
Ğ
pxEv’tB™s
 );

635 
pxTasksWa™šgFÜB™s
 = &Ğ
pxEv’tB™s
->
xTasksWa™šgFÜB™s
 );

637 
	`vTaskSu¥’dAÎ
();

639 
	`ŒaûEVENT_GROUP_DELETE
Ğ
xEv’tGroup
 );

641  
	`li¡CURRENT_LIST_LENGTH
Ğ
pxTasksWa™šgFÜB™s
 ) > ( 
UBa£Ty³_t
 ) 0 )

645 
	`cÚfigASSERT
Ğ
pxTasksWa™šgFÜB™s
->
xLi¡End
.
pxNext
 !ğĞcÚ¡ 
Li¡I‹m_t
 * ) &(…xTasksWaitingForBits->xListEnd ) );

646 
	`vTaskRemoveFromUnÜd”edEv’tLi¡
Ğ
pxTasksWa™šgFÜB™s
->
xLi¡End
.
pxNext
, 
ev’tUNBLOCKED_DUE_TO_BIT_SET
 );

649 Ğè
	`xTaskResumeAÎ
();

651 #iàĞĞ
cÚfigSUPPORT_DYNAMIC_ALLOCATION
 =ğ1 ) && ( 
cÚfigSUPPORT_STATIC_ALLOCATION
 == 0 ) )

655 
	`vPÜtF»e
Ğ
pxEv’tB™s
 );

657 #–iàĞĞ
cÚfigSUPPORT_DYNAMIC_ALLOCATION
 =ğ1 ) && ( 
cÚfigSUPPORT_STATIC_ALLOCATION
 == 1 ) )

661 ifĞ
pxEv’tB™s
->
ucStiÿÎyAÎoÿ‹d
 =ğĞ
ušt8_t
 ) 
pdFALSE
 )

663 
	`vPÜtF»e
Ğ
pxEv’tB™s
 );

667 
	`mtCOVERAGE_TEST_MARKER
();

671 
	}
}

676 
	$vEv’tGroupS‘B™sC®lback
Ğ* 
pvEv’tGroup
,

677 cÚ¡ 
ušt32_t
 
ulB™sToS‘
 )

679 Ğè
	`xEv’tGroupS‘B™s
Ğ
pvEv’tGroup
, ( 
Ev’tB™s_t
 ) 
ulB™sToS‘
 );

680 
	}
}

685 
	$vEv’tGroupCË¬B™sC®lback
Ğ* 
pvEv’tGroup
,

686 cÚ¡ 
ušt32_t
 
ulB™sToCË¬
 )

688 Ğè
	`xEv’tGroupCË¬B™s
Ğ
pvEv’tGroup
, ( 
Ev’tB™s_t
 ) 
ulB™sToCË¬
 );

689 
	}
}

692 
Ba£Ty³_t
 
	$´vTe¡Wa™CÚd™iÚ
ĞcÚ¡ 
Ev’tB™s_t
 
uxCu¼’tEv’tB™s
,

693 cÚ¡ 
Ev’tB™s_t
 
uxB™sToWa™FÜ
,

694 cÚ¡ 
Ba£Ty³_t
 
xWa™FÜAÎB™s
 )

696 
Ba£Ty³_t
 
xWa™CÚd™iÚM‘
 = 
pdFALSE
;

698 ifĞ
xWa™FÜAÎB™s
 =ğ
pdFALSE
 )

702 ifĞĞ
uxCu¼’tEv’tB™s
 & 
uxB™sToWa™FÜ
 ) !ğĞ
Ev’tB™s_t
 ) 0 )

704 
xWa™CÚd™iÚM‘
 = 
pdTRUE
;

708 
	`mtCOVERAGE_TEST_MARKER
();

715 ifĞĞ
uxCu¼’tEv’tB™s
 & 
uxB™sToWa™FÜ
 ) == uxBitsToWaitFor )

717 
xWa™CÚd™iÚM‘
 = 
pdTRUE
;

721 
	`mtCOVERAGE_TEST_MARKER
();

725  
xWa™CÚd™iÚM‘
;

726 
	}
}

729 #iàĞĞ
cÚfigUSE_TRACE_FACILITY
 =ğ1 ) && ( 
INCLUDE_xTim”P’dFunùiÚC®l
 =ğ1 ) && ( 
cÚfigUSE_TIMERS
 == 1 ) )

731 
Ba£Ty³_t
 
	$xEv’tGroupS‘B™sFromISR
Ğ
Ev’tGroupHªdË_t
 
xEv’tGroup
,

732 cÚ¡ 
Ev’tB™s_t
 
uxB™sToS‘
,

733 
Ba£Ty³_t
 * 
pxHigh”PriÜ™yTaskWok’
 )

735 
Ba£Ty³_t
 
xR‘uº
;

737 
	`ŒaûEVENT_GROUP_SET_BITS_FROM_ISR
Ğ
xEv’tGroup
, 
uxB™sToS‘
 );

738 
xR‘uº
 = 
	`xTim”P’dFunùiÚC®lFromISR
Ğ
vEv’tGroupS‘B™sC®lback
, ( * ) 
xEv’tGroup
, ( 
ušt32_t
 ) 
uxB™sToS‘
, 
pxHigh”PriÜ™yTaskWok’
 );

740  
xR‘uº
;

741 
	}
}

746 #iàĞ
cÚfigUSE_TRACE_FACILITY
 == 1 )

748 
UBa£Ty³_t
 
	$uxEv’tGroupG‘Numb”
Ğ* 
xEv’tGroup
 )

750 
UBa£Ty³_t
 
xR‘uº
;

751 
Ev’tGroup_t
 cÚ¡ * 
pxEv’tB™s
 = ( Ev’tGroup_ˆ* ) 
xEv’tGroup
;

753 ifĞ
xEv’tGroup
 =ğ
NULL
 )

755 
xR‘uº
 = 0;

759 
xR‘uº
 = 
pxEv’tB™s
->
uxEv’tGroupNumb”
;

762  
xR‘uº
;

763 
	}
}

768 #iàĞ
cÚfigUSE_TRACE_FACILITY
 == 1 )

770 
	$vEv’tGroupS‘Numb”
Ğ* 
xEv’tGroup
,

771 
UBa£Ty³_t
 
uxEv’tGroupNumb”
 )

773 ĞĞ
Ev’tGroup_t
 * ) 
xEv’tGroup
 )->
uxEv’tGroupNumb”
 = uxEventGroupNumber;

774 
	}
}

	@list.c

30 
	~<¡dlib.h
>

35 
	#MPU_WRAPPERS_INCLUDED_FROM_API_FILE


	)

37 
	~"F»eRTOS.h
"

38 
	~"li¡.h
"

44 #undeà
MPU_WRAPPERS_INCLUDED_FROM_API_FILE


50 
	$vLi¡In™Ÿli£
Ğ
Li¡_t
 * cÚ¡ 
pxLi¡
 )

55 
pxLi¡
->
pxIndex
 = ( 
Li¡I‹m_t
 * ) &ĞpxLi¡->
xLi¡End
 );

59 
pxLi¡
->
xLi¡End
.
xI‹mV®ue
 = 
pÜtMAX_DELAY
;

63 
pxLi¡
->
xLi¡End
.
pxNext
 = ( 
Li¡I‹m_t
 * ) &(…xList->xListEnd );

64 
pxLi¡
->
xLi¡End
.
pxP»vious
 = ( 
Li¡I‹m_t
 * ) &(…xList->xListEnd );

66 
pxLi¡
->
uxNumb”OfI‹ms
 = ( 
UBa£Ty³_t
 ) 0U;

70 
	`li¡SET_LIST_INTEGRITY_CHECK_1_VALUE
Ğ
pxLi¡
 );

71 
	`li¡SET_LIST_INTEGRITY_CHECK_2_VALUE
Ğ
pxLi¡
 );

72 
	}
}

75 
	$vLi¡In™Ÿli£I‹m
Ğ
Li¡I‹m_t
 * cÚ¡ 
pxI‹m
 )

78 
pxI‹m
->
pxCÚš”
 = 
NULL
;

82 
	`li¡SET_FIRST_LIST_ITEM_INTEGRITY_CHECK_VALUE
Ğ
pxI‹m
 );

83 
	`li¡SET_SECOND_LIST_ITEM_INTEGRITY_CHECK_VALUE
Ğ
pxI‹m
 );

84 
	}
}

87 
	$vLi¡In£¹End
Ğ
Li¡_t
 * cÚ¡ 
pxLi¡
,

88 
Li¡I‹m_t
 * cÚ¡ 
pxNewLi¡I‹m
 )

90 
Li¡I‹m_t
 * cÚ¡ 
pxIndex
 = 
pxLi¡
->pxIndex;

95 
	`li¡TEST_LIST_INTEGRITY
Ğ
pxLi¡
 );

96 
	`li¡TEST_LIST_ITEM_INTEGRITY
Ğ
pxNewLi¡I‹m
 );

101 
pxNewLi¡I‹m
->
pxNext
 = 
pxIndex
;

102 
pxNewLi¡I‹m
->
pxP»vious
 = 
pxIndex
->pxPrevious;

105 
	`mtCOVERAGE_TEST_DELAY
();

107 
pxIndex
->
pxP»vious
->
pxNext
 = 
pxNewLi¡I‹m
;

108 
pxIndex
->
pxP»vious
 = 
pxNewLi¡I‹m
;

111 
pxNewLi¡I‹m
->
pxCÚš”
 = 
pxLi¡
;

113 Ğ
pxLi¡
->
uxNumb”OfI‹ms
 )++;

114 
	}
}

117 
	$vLi¡In£¹
Ğ
Li¡_t
 * cÚ¡ 
pxLi¡
,

118 
Li¡I‹m_t
 * cÚ¡ 
pxNewLi¡I‹m
 )

120 
Li¡I‹m_t
 * 
pxI‹¿tÜ
;

121 cÚ¡ 
TickTy³_t
 
xV®ueOfIn£¹iÚ
 = 
pxNewLi¡I‹m
->
xI‹mV®ue
;

126 
	`li¡TEST_LIST_INTEGRITY
Ğ
pxLi¡
 );

127 
	`li¡TEST_LIST_ITEM_INTEGRITY
Ğ
pxNewLi¡I‹m
 );

137 ifĞ
xV®ueOfIn£¹iÚ
 =ğ
pÜtMAX_DELAY
 )

139 
pxI‹¿tÜ
 = 
pxLi¡
->
xLi¡End
.
pxP»vious
;

168  
pxI‹¿tÜ
 = ( 
Li¡I‹m_t
 * ) &Ğ
pxLi¡
->
xLi¡End
 );…xI‹¿tÜ->
pxNext
->
xI‹mV®ue
 <ğ
xV®ueOfIn£¹iÚ
;…xIterator =…xIterator->pxNext )

175 
pxNewLi¡I‹m
->
pxNext
 = 
pxI‹¿tÜ
->pxNext;

176 
pxNewLi¡I‹m
->
pxNext
->
pxP»vious
 =…xNewListItem;

177 
pxNewLi¡I‹m
->
pxP»vious
 = 
pxI‹¿tÜ
;

178 
pxI‹¿tÜ
->
pxNext
 = 
pxNewLi¡I‹m
;

182 
pxNewLi¡I‹m
->
pxCÚš”
 = 
pxLi¡
;

184 Ğ
pxLi¡
->
uxNumb”OfI‹ms
 )++;

185 
	}
}

188 
UBa£Ty³_t
 
	$uxLi¡Remove
Ğ
Li¡I‹m_t
 * cÚ¡ 
pxI‹mToRemove
 )

192 
Li¡_t
 * cÚ¡ 
pxLi¡
 = 
pxI‹mToRemove
->
pxCÚš”
;

194 
pxI‹mToRemove
->
pxNext
->
pxP»vious
 =…xItemToRemove->pxPrevious;

195 
pxI‹mToRemove
->
pxP»vious
->
pxNext
 =…xItemToRemove->pxNext;

198 
	`mtCOVERAGE_TEST_DELAY
();

201 ifĞ
pxLi¡
->
pxIndex
 =ğ
pxI‹mToRemove
 )

203 
pxLi¡
->
pxIndex
 = 
pxI‹mToRemove
->
pxP»vious
;

207 
	`mtCOVERAGE_TEST_MARKER
();

210 
pxI‹mToRemove
->
pxCÚš”
 = 
NULL
;

211 Ğ
pxLi¡
->
uxNumb”OfI‹ms
 )--;

213  
pxLi¡
->
uxNumb”OfI‹ms
;

214 
	}
}

	@queue.c

29 
	~<¡dlib.h
>

30 
	~<¡ršg.h
>

35 
	#MPU_WRAPPERS_INCLUDED_FROM_API_FILE


	)

37 
	~"F»eRTOS.h
"

38 
	~"sk.h
"

39 
	~"queue.h
"

41 #iàĞ
cÚfigUSE_CO_ROUTINES
 == 1 )

42 
	~"üoutše.h
"

49 #undeà
MPU_WRAPPERS_INCLUDED_FROM_API_FILE


53 
	#queueUNLOCKED
 ( ( 
št8_t
 ) -1 )

	)

54 
	#queueLOCKED_UNMODIFIED
 ( ( 
št8_t
 ) 0 )

	)

55 
	#queueINT8_MAX
 ( ( 
št8_t
 ) 127 )

	)

66 
	#uxQueueTy³
 
pcH—d


	)

67 
	#queueQUEUE_IS_MUTEX
 
NULL


	)

69 
	sQueuePoš‹rs


71 
št8_t
 * 
	mpcTa
;

72 
št8_t
 * 
	mpcR—dFrom
;

73 } 
	tQueuePoš‹rs_t
;

75 
	sSem­hÜeD©a


77 
TaskHªdË_t
 
	mxMu‹xHŞd”
;

78 
UBa£Ty³_t
 
	muxRecursiveC®lCouÁ
;

79 } 
	tSem­hÜeD©a_t
;

83 
	#queueSEMAPHORE_QUEUE_ITEM_LENGTH
 ( ( 
UBa£Ty³_t
 ) 0 )

	)

84 
	#queueMUTEX_GIVE_BLOCK_TIME
 ( ( 
TickTy³_t
 ) 0U )

	)

86 #iàĞ
cÚfigUSE_PREEMPTION
 == 0 )

90 
	#queueYIELD_IF_USING_PREEMPTION
()

	)

92 
	#queueYIELD_IF_USING_PREEMPTION
(è
	`pÜtYIELD_WITHIN_API
()

	)

100 
	sQueueDefš™iÚ


102 
št8_t
 * 
	mpcH—d
;

103 
št8_t
 * 
	mpcWr™eTo
;

107 
QueuePoš‹rs_t
 
	mxQueue
;

108 
Sem­hÜeD©a_t
 
	mxSem­hÜe
;

109 } 
	mu
;

111 
Li¡_t
 
	mxTasksWa™šgToS’d
;

112 
Li¡_t
 
	mxTasksWa™šgToReûive
;

114 vŞ©
UBa£Ty³_t
 
	muxMes§gesWa™šg
;

115 
UBa£Ty³_t
 
	muxL’gth
;

116 
UBa£Ty³_t
 
	muxI‹mSize
;

118 vŞ©
št8_t
 
	mcRxLock
;

119 vŞ©
št8_t
 
	mcTxLock
;

121 #iàĞĞ
cÚfigSUPPORT_STATIC_ALLOCATION
 =ğ1 ) && ( 
cÚfigSUPPORT_DYNAMIC_ALLOCATION
 == 1 ) )

122 
ušt8_t
 
	mucStiÿÎyAÎoÿ‹d
;

125 #iàĞ
cÚfigUSE_QUEUE_SETS
 == 1 )

126 
QueueDefš™iÚ
 * 
	mpxQueueS‘CÚš”
;

129 #iàĞ
cÚfigUSE_TRACE_FACILITY
 == 1 )

130 
UBa£Ty³_t
 
	muxQueueNumb”
;

131 
ušt8_t
 
	mucQueueTy³
;

133 } 
	txQUEUE
;

137 
xQUEUE
 
	tQueue_t
;

145 #iàĞ
cÚfigQUEUE_REGISTRY_SIZE
 > 0 )

150 
	sQUEUE_REGISTRY_ITEM


152 cÚ¡ * 
	mpcQueueName
;

153 
QueueHªdË_t
 
	mxHªdË
;

154 } 
	txQueueRegi¡ryI‹m
;

159 
xQueueRegi¡ryI‹m
 
	tQueueRegi¡ryI‹m_t
;

164 
PRIVILEGED_DATA
 
QueueRegi¡ryI‹m_t
 
	gxQueueRegi¡ry
[ 
cÚfigQUEUE_REGISTRY_SIZE
 ];

176 
	$´vUÆockQueue
Ğ
Queue_t
 * cÚ¡ 
pxQueue
 ) 
PRIVILEGED_FUNCTION
;

183 
Ba£Ty³_t
 
	$´vIsQueueEm±y
ĞcÚ¡ 
Queue_t
 * 
pxQueue
 ) 
PRIVILEGED_FUNCTION
;

190 
Ba£Ty³_t
 
	$´vIsQueueFuÎ
ĞcÚ¡ 
Queue_t
 * 
pxQueue
 ) 
PRIVILEGED_FUNCTION
;

196 
Ba£Ty³_t
 
	$´vCİyD©aToQueue
Ğ
Queue_t
 * cÚ¡ 
pxQueue
,

197 cÚ¡ * 
pvI‹mToQueue
,

198 cÚ¡ 
Ba£Ty³_t
 
xPos™iÚ
 ) 
PRIVILEGED_FUNCTION
;

203 
	$´vCİyD©aFromQueue
Ğ
Queue_t
 * cÚ¡ 
pxQueue
,

204 * cÚ¡ 
pvBufãr
 ) 
PRIVILEGED_FUNCTION
;

206 #iàĞ
cÚfigUSE_QUEUE_SETS
 == 1 )

212 
Ba£Ty³_t
 
	$´vNÙifyQueueS‘CÚš”
ĞcÚ¡ 
Queue_t
 * cÚ¡ 
pxQueue
 ) 
PRIVILEGED_FUNCTION
;

219 
	$´vIn™Ÿli£NewQueue
ĞcÚ¡ 
UBa£Ty³_t
 
uxQueueL’gth
,

220 cÚ¡ 
UBa£Ty³_t
 
uxI‹mSize
,

221 
ušt8_t
 * 
pucQueueStÜage
,

222 cÚ¡ 
ušt8_t
 
ucQueueTy³
,

223 
Queue_t
 * 
pxNewQueue
 ) 
PRIVILEGED_FUNCTION
;

230 #iàĞ
cÚfigUSE_MUTEXES
 == 1 )

231 
	$´vIn™Ÿli£Mu‹x
Ğ
Queue_t
 * 
pxNewQueue
 ) 
PRIVILEGED_FUNCTION
;

234 #iàĞ
cÚfigUSE_MUTEXES
 == 1 )

243 
UBa£Ty³_t
 
	$´vG‘Disšh”™PriÜ™yAá”Timeout
ĞcÚ¡ 
Queue_t
 * cÚ¡ 
pxQueue
 ) 
PRIVILEGED_FUNCTION
;

251 
	#´vLockQueue
Ğ
pxQueue
 ) \

	)

252 
	`skENTER_CRITICAL
(); \

254 ifĞĞ
pxQueue
 )->
cRxLock
 =ğ
queueUNLOCKED
 ) \

256 Ğ
pxQueue
 )->
cRxLock
 = 
queueLOCKED_UNMODIFIED
; \

258 ifĞĞ
pxQueue
 )->
cTxLock
 =ğ
queueUNLOCKED
 ) \

260 Ğ
pxQueue
 )->
cTxLock
 = 
queueLOCKED_UNMODIFIED
; \

262 
	}
} \

263 
	$skEXIT_CRITICAL
()

270 
	#´vInüem’tQueueTxLock
Ğ
pxQueue
, 
cTxLock
 ) \

	)

272 cÚ¡ 
UBa£Ty³_t
 
uxNumb”OfTasks
 = 
	`uxTaskG‘Numb”OfTasks
(); \

273 ifĞĞ
UBa£Ty³_t
 ) ( 
cTxLock
 ) < 
uxNumb”OfTasks
 ) \

275 
	`cÚfigASSERT
ĞĞ
cTxLock
 ) !ğ
queueINT8_MAX
 ); \

276 Ğ
pxQueue
 )->
cTxLock
 = ( 
št8_t
 ) ( ( cTxLock ) + ( int8_t ) 1 ); \

278 
	}
}

285 
	#´vInüem’tQueueRxLock
Ğ
pxQueue
, 
cRxLock
 ) \

	)

287 cÚ¡ 
UBa£Ty³_t
 
	guxNumb”OfTasks
 = 
uxTaskG‘Numb”OfTasks
(); \

288 ifĞĞ
	gUBa£Ty³_t
 ) ( 
	gcRxLock
 ) < 
	guxNumb”OfTasks
 ) \

290 
cÚfigASSERT
ĞĞ
cRxLock
 ) !ğ
queueINT8_MAX
 ); \

291 Ğ
	gpxQueue
 )->
	gcRxLock
 = ( 
št8_t
 ) ( ( 
cRxLock
 ) + ( int8_t ) 1 ); \

296 
Ba£Ty³_t
 
	$xQueueG’”icRe£t
Ğ
QueueHªdË_t
 
xQueue
,

297 
Ba£Ty³_t
 
xNewQueue
 )

299 
Ba£Ty³_t
 
xR‘uº
 = 
pdPASS
;

300 
Queue_t
 * cÚ¡ 
pxQueue
 = 
xQueue
;

302 
	`cÚfigASSERT
Ğ
pxQueue
 );

304 ifĞĞ
pxQueue
 !ğ
NULL
 ) &&

305 Ğ
pxQueue
->
uxL’gth
 >= 1U ) &&

307 ĞĞ
SIZE_MAX
 / 
pxQueue
->
uxL’gth
 ) >ğpxQueue->
uxI‹mSize
 ) )

309 
	`skENTER_CRITICAL
();

311 
pxQueue
->
u
.
xQueue
.
pcTa
 =…xQueue->
pcH—d
 + (…xQueue->
uxL’gth
 *…xQueue->
uxI‹mSize
 );

312 
pxQueue
->
uxMes§gesWa™šg
 = ( 
UBa£Ty³_t
 ) 0U;

313 
pxQueue
->
pcWr™eTo
 =…xQueue->
pcH—d
;

314 
pxQueue
->
u
.
xQueue
.
pcR—dFrom
 =…xQueue->
pcH—d
 + ( (…xQueue->
uxL’gth
 - 1U ) *…xQueue->
uxI‹mSize
 );

315 
pxQueue
->
cRxLock
 = 
queueUNLOCKED
;

316 
pxQueue
->
cTxLock
 = 
queueUNLOCKED
;

318 ifĞ
xNewQueue
 =ğ
pdFALSE
 )

325 ifĞ
	`li¡LIST_IS_EMPTY
Ğ&Ğ
pxQueue
->
xTasksWa™šgToS’d
 ) ) =ğ
pdFALSE
 )

327 ifĞ
	`xTaskRemoveFromEv’tLi¡
Ğ&Ğ
pxQueue
->
xTasksWa™šgToS’d
 ) ) !ğ
pdFALSE
 )

329 
	`queueYIELD_IF_USING_PREEMPTION
();

333 
	`mtCOVERAGE_TEST_MARKER
();

338 
	`mtCOVERAGE_TEST_MARKER
();

344 
	`vLi¡In™Ÿli£
Ğ&Ğ
pxQueue
->
xTasksWa™šgToS’d
 ) );

345 
	`vLi¡In™Ÿli£
Ğ&Ğ
pxQueue
->
xTasksWa™šgToReûive
 ) );

348 
	`skEXIT_CRITICAL
();

352 
xR‘uº
 = 
pdFAIL
;

355 
	`cÚfigASSERT
Ğ
xR‘uº
 !ğ
pdFAIL
 );

359  
xR‘uº
;

360 
	}
}

363 #iàĞ
cÚfigSUPPORT_STATIC_ALLOCATION
 == 1 )

365 
QueueHªdË_t
 
	$xQueueG’”icC»©eStic
ĞcÚ¡ 
UBa£Ty³_t
 
uxQueueL’gth
,

366 cÚ¡ 
UBa£Ty³_t
 
uxI‹mSize
,

367 
ušt8_t
 * 
pucQueueStÜage
,

368 
SticQueue_t
 * 
pxSticQueue
,

369 cÚ¡ 
ušt8_t
 
ucQueueTy³
 )

371 
Queue_t
 * 
pxNewQueue
 = 
NULL
;

375 
	`cÚfigASSERT
Ğ
pxSticQueue
 );

377 ifĞĞ
uxQueueL’gth
 > ( 
UBa£Ty³_t
 ) 0 ) &&

378 Ğ
pxSticQueue
 !ğ
NULL
 ) &&

382 Ğ!ĞĞ
pucQueueStÜage
 !ğ
NULL
 ) && ( 
uxI‹mSize
 == 0 ) ) ) &&

383 Ğ!ĞĞ
pucQueueStÜage
 =ğ
NULL
 ) && ( 
uxI‹mSize
 != 0 ) ) ) )

385 #iàĞ
cÚfigASSERT_DEFINED
 == 1 )

390 vŞ©
size_t
 
xSize
 = Ğ
SticQueue_t
 );

393 
	`cÚfigASSERT
Ğ
xSize
 =ğĞ
Queue_t
 ) );

394 Ğè
xSize
;

401 
pxNewQueue
 = ( 
Queue_t
 * ) 
pxSticQueue
;

403 #iàĞ
cÚfigSUPPORT_DYNAMIC_ALLOCATION
 == 1 )

408 
pxNewQueue
->
ucStiÿÎyAÎoÿ‹d
 = 
pdTRUE
;

412 
	`´vIn™Ÿli£NewQueue
Ğ
uxQueueL’gth
, 
uxI‹mSize
, 
pucQueueStÜage
, 
ucQueueTy³
, 
pxNewQueue
 );

416 
	`cÚfigASSERT
Ğ
pxNewQueue
 );

417 
	`mtCOVERAGE_TEST_MARKER
();

420  
pxNewQueue
;

421 
	}
}

426 #iàĞ
cÚfigSUPPORT_DYNAMIC_ALLOCATION
 == 1 )

428 
QueueHªdË_t
 
	$xQueueG’”icC»©e
ĞcÚ¡ 
UBa£Ty³_t
 
uxQueueL’gth
,

429 cÚ¡ 
UBa£Ty³_t
 
uxI‹mSize
,

430 cÚ¡ 
ušt8_t
 
ucQueueTy³
 )

432 
Queue_t
 * 
pxNewQueue
 = 
NULL
;

433 
size_t
 
xQueueSizeInBy‹s
;

434 
ušt8_t
 * 
pucQueueStÜage
;

436 ifĞĞ
uxQueueL’gth
 > ( 
UBa£Ty³_t
 ) 0 ) &&

438 ĞĞ
SIZE_MAX
 / 
uxQueueL’gth
 ) >ğ
uxI‹mSize
 ) &&

440 ĞĞ
SIZE_MAX
 - Ğ
Queue_t
 ) ) >ğĞ
uxQueueL’gth
 * 
uxI‹mSize
 ) ) )

445 
xQueueSizeInBy‹s
 = ( 
size_t
 ) ( 
uxQueueL’gth
 * 
uxI‹mSize
 );

456 
pxNewQueue
 = ( 
Queue_t
 * ) 
	`pvPÜtM®loc
ĞĞQueue_ˆè+ 
xQueueSizeInBy‹s
 );

458 ifĞ
pxNewQueue
 !ğ
NULL
 )

462 
pucQueueStÜage
 = ( 
ušt8_t
 * ) 
pxNewQueue
;

463 
pucQueueStÜage
 +ğĞ
Queue_t
 );

465 #iàĞ
cÚfigSUPPORT_STATIC_ALLOCATION
 == 1 )

470 
pxNewQueue
->
ucStiÿÎyAÎoÿ‹d
 = 
pdFALSE
;

474 
	`´vIn™Ÿli£NewQueue
Ğ
uxQueueL’gth
, 
uxI‹mSize
, 
pucQueueStÜage
, 
ucQueueTy³
, 
pxNewQueue
 );

478 
	`ŒaûQUEUE_CREATE_FAILED
Ğ
ucQueueTy³
 );

479 
	`mtCOVERAGE_TEST_MARKER
();

484 
	`cÚfigASSERT
Ğ
pxNewQueue
 );

485 
	`mtCOVERAGE_TEST_MARKER
();

488  
pxNewQueue
;

489 
	}
}

494 
	$´vIn™Ÿli£NewQueue
ĞcÚ¡ 
UBa£Ty³_t
 
uxQueueL’gth
,

495 cÚ¡ 
UBa£Ty³_t
 
uxI‹mSize
,

496 
ušt8_t
 * 
pucQueueStÜage
,

497 cÚ¡ 
ušt8_t
 
ucQueueTy³
,

498 
Queue_t
 * 
pxNewQueue
 )

502 Ğè
ucQueueTy³
;

504 ifĞ
uxI‹mSize
 =ğĞ
UBa£Ty³_t
 ) 0 )

510 
pxNewQueue
->
pcH—d
 = ( 
št8_t
 * )…xNewQueue;

515 
pxNewQueue
->
pcH—d
 = ( 
št8_t
 * ) 
pucQueueStÜage
;

520 
pxNewQueue
->
uxL’gth
 = 
uxQueueL’gth
;

521 
pxNewQueue
->
uxI‹mSize
 = uxItemSize;

522 Ğè
	`xQueueG’”icRe£t
Ğ
pxNewQueue
, 
pdTRUE
 );

524 #iàĞ
cÚfigUSE_TRACE_FACILITY
 == 1 )

526 
pxNewQueue
->
ucQueueTy³
 = ucQueueType;

530 #iàĞ
cÚfigUSE_QUEUE_SETS
 == 1 )

532 
pxNewQueue
->
pxQueueS‘CÚš”
 = 
NULL
;

536 
	`ŒaûQUEUE_CREATE
Ğ
pxNewQueue
 );

537 
	}
}

540 #iàĞ
cÚfigUSE_MUTEXES
 == 1 )

542 
	$´vIn™Ÿli£Mu‹x
Ğ
Queue_t
 * 
pxNewQueue
 )

544 ifĞ
pxNewQueue
 !ğ
NULL
 )

550 
pxNewQueue
->
u
.
xSem­hÜe
.
xMu‹xHŞd”
 = 
NULL
;

551 
pxNewQueue
->
uxQueueTy³
 = 
queueQUEUE_IS_MUTEX
;

554 
pxNewQueue
->
u
.
xSem­hÜe
.
uxRecursiveC®lCouÁ
 = 0;

556 
	`ŒaûCREATE_MUTEX
Ğ
pxNewQueue
 );

559 Ğè
	`xQueueG’”icS’d
Ğ
pxNewQueue
, 
NULL
, ( 
TickTy³_t
 ) 0U, 
queueSEND_TO_BACK
 );

563 
	`ŒaûCREATE_MUTEX_FAILED
();

565 
	}
}

570 #iàĞĞ
cÚfigUSE_MUTEXES
 =ğ1 ) && ( 
cÚfigSUPPORT_DYNAMIC_ALLOCATION
 == 1 ) )

572 
QueueHªdË_t
 
	$xQueueC»©eMu‹x
ĞcÚ¡ 
ušt8_t
 
ucQueueTy³
 )

574 
QueueHªdË_t
 
xNewQueue
;

575 cÚ¡ 
UBa£Ty³_t
 
uxMu‹xL’gth
 = ( UBa£Ty³_ˆè1, 
uxMu‹xSize
 = ( UBaseType_t ) 0;

577 
xNewQueue
 = 
	`xQueueG’”icC»©e
Ğ
uxMu‹xL’gth
, 
uxMu‹xSize
, 
ucQueueTy³
 );

578 
	`´vIn™Ÿli£Mu‹x
ĞĞ
Queue_t
 * ) 
xNewQueue
 );

580  
xNewQueue
;

581 
	}
}

586 #iàĞĞ
cÚfigUSE_MUTEXES
 =ğ1 ) && ( 
cÚfigSUPPORT_STATIC_ALLOCATION
 == 1 ) )

588 
QueueHªdË_t
 
	$xQueueC»©eMu‹xStic
ĞcÚ¡ 
ušt8_t
 
ucQueueTy³
,

589 
SticQueue_t
 * 
pxSticQueue
 )

591 
QueueHªdË_t
 
xNewQueue
;

592 cÚ¡ 
UBa£Ty³_t
 
uxMu‹xL’gth
 = ( UBa£Ty³_ˆè1, 
uxMu‹xSize
 = ( UBaseType_t ) 0;

596 Ğè
ucQueueTy³
;

598 
xNewQueue
 = 
	`xQueueG’”icC»©eStic
Ğ
uxMu‹xL’gth
, 
uxMu‹xSize
, 
NULL
, 
pxSticQueue
, 
ucQueueTy³
 );

599 
	`´vIn™Ÿli£Mu‹x
ĞĞ
Queue_t
 * ) 
xNewQueue
 );

601  
xNewQueue
;

602 
	}
}

607 #iàĞĞ
cÚfigUSE_MUTEXES
 =ğ1 ) && ( 
INCLUDE_xSem­hÜeG‘Mu‹xHŞd”
 == 1 ) )

609 
TaskHªdË_t
 
	$xQueueG‘Mu‹xHŞd”
Ğ
QueueHªdË_t
 
xSem­hÜe
 )

611 
TaskHªdË_t
 
pxR‘uº
;

612 
Queue_t
 * cÚ¡ 
pxSem­hÜe
 = ( Queue_ˆ* ) 
xSem­hÜe
;

614 
	`cÚfigASSERT
Ğ
xSem­hÜe
 );

621 
	`skENTER_CRITICAL
();

623 ifĞ
pxSem­hÜe
->
uxQueueTy³
 =ğ
queueQUEUE_IS_MUTEX
 )

625 
pxR‘uº
 = 
pxSem­hÜe
->
u
.
xSem­hÜe
.
xMu‹xHŞd”
;

629 
pxR‘uº
 = 
NULL
;

632 
	`skEXIT_CRITICAL
();

634  
pxR‘uº
;

635 
	}
}

640 #iàĞĞ
cÚfigUSE_MUTEXES
 =ğ1 ) && ( 
INCLUDE_xSem­hÜeG‘Mu‹xHŞd”
 == 1 ) )

642 
TaskHªdË_t
 
	$xQueueG‘Mu‹xHŞd”FromISR
Ğ
QueueHªdË_t
 
xSem­hÜe
 )

644 
TaskHªdË_t
 
pxR‘uº
;

646 
	`cÚfigASSERT
Ğ
xSem­hÜe
 );

651 ifĞĞĞ
Queue_t
 * ) 
xSem­hÜe
 )->
uxQueueTy³
 =ğ
queueQUEUE_IS_MUTEX
 )

653 
pxR‘uº
 = ( ( 
Queue_t
 * ) 
xSem­hÜe
 )->
u
.xSem­hÜe.
xMu‹xHŞd”
;

657 
pxR‘uº
 = 
NULL
;

660  
pxR‘uº
;

661 
	}
}

666 #iàĞ
cÚfigUSE_RECURSIVE_MUTEXES
 == 1 )

668 
Ba£Ty³_t
 
	$xQueueGiveMu‹xRecursive
Ğ
QueueHªdË_t
 
xMu‹x
 )

670 
Ba£Ty³_t
 
xR‘uº
;

671 
Queue_t
 * cÚ¡ 
pxMu‹x
 = ( Queue_ˆ* ) 
xMu‹x
;

673 
	`cÚfigASSERT
Ğ
pxMu‹x
 );

681 ifĞ
pxMu‹x
->
u
.
xSem­hÜe
.
xMu‹xHŞd”
 =ğ
	`xTaskG‘Cu¼’tTaskHªdË
() )

683 
	`ŒaûGIVE_MUTEX_RECURSIVE
Ğ
pxMu‹x
 );

690 Ğ
pxMu‹x
->
u
.
xSem­hÜe
.
uxRecursiveC®lCouÁ
 )--;

693 ifĞ
pxMu‹x
->
u
.
xSem­hÜe
.
uxRecursiveC®lCouÁ
 =ğĞ
UBa£Ty³_t
 ) 0 )

697 Ğè
	`xQueueG’”icS’d
Ğ
pxMu‹x
, 
NULL
, 
queueMUTEX_GIVE_BLOCK_TIME
, 
queueSEND_TO_BACK
 );

701 
	`mtCOVERAGE_TEST_MARKER
();

704 
xR‘uº
 = 
pdPASS
;

710 
xR‘uº
 = 
pdFAIL
;

712 
	`ŒaûGIVE_MUTEX_RECURSIVE_FAILED
Ğ
pxMu‹x
 );

715  
xR‘uº
;

716 
	}
}

721 #iàĞ
cÚfigUSE_RECURSIVE_MUTEXES
 == 1 )

723 
Ba£Ty³_t
 
	$xQueueTakeMu‹xRecursive
Ğ
QueueHªdË_t
 
xMu‹x
,

724 
TickTy³_t
 
xTicksToWa™
 )

726 
Ba£Ty³_t
 
xR‘uº
;

727 
Queue_t
 * cÚ¡ 
pxMu‹x
 = ( Queue_ˆ* ) 
xMu‹x
;

729 
	`cÚfigASSERT
Ğ
pxMu‹x
 );

734 
	`ŒaûTAKE_MUTEX_RECURSIVE
Ğ
pxMu‹x
 );

736 ifĞ
pxMu‹x
->
u
.
xSem­hÜe
.
xMu‹xHŞd”
 =ğ
	`xTaskG‘Cu¼’tTaskHªdË
() )

738 Ğ
pxMu‹x
->
u
.
xSem­hÜe
.
uxRecursiveC®lCouÁ
 )++;

739 
xR‘uº
 = 
pdPASS
;

743 
xR‘uº
 = 
	`xQueueSem­hÜeTake
Ğ
pxMu‹x
, 
xTicksToWa™
 );

748 ifĞ
xR‘uº
 !ğ
pdFAIL
 )

750 Ğ
pxMu‹x
->
u
.
xSem­hÜe
.
uxRecursiveC®lCouÁ
 )++;

754 
	`ŒaûTAKE_MUTEX_RECURSIVE_FAILED
Ğ
pxMu‹x
 );

758  
xR‘uº
;

759 
	}
}

764 #iàĞĞ
cÚfigUSE_COUNTING_SEMAPHORES
 =ğ1 ) && ( 
cÚfigSUPPORT_STATIC_ALLOCATION
 == 1 ) )

766 
QueueHªdË_t
 
	$xQueueC»©eCouÁšgSem­hÜeStic
ĞcÚ¡ 
UBa£Ty³_t
 
uxMaxCouÁ
,

767 cÚ¡ 
UBa£Ty³_t
 
uxIn™ŸlCouÁ
,

768 
SticQueue_t
 * 
pxSticQueue
 )

770 
QueueHªdË_t
 
xHªdË
 = 
NULL
;

772 ifĞĞ
uxMaxCouÁ
 != 0 ) &&

773 Ğ
uxIn™ŸlCouÁ
 <ğ
uxMaxCouÁ
 ) )

775 
xHªdË
 = 
	`xQueueG’”icC»©eStic
Ğ
uxMaxCouÁ
, 
queueSEMAPHORE_QUEUE_ITEM_LENGTH
, 
NULL
, 
pxSticQueue
, 
queueQUEUE_TYPE_COUNTING_SEMAPHORE
 );

777 ifĞ
xHªdË
 !ğ
NULL
 )

779 ĞĞ
Queue_t
 * ) 
xHªdË
 )->
uxMes§gesWa™šg
 = 
uxIn™ŸlCouÁ
;

781 
	`ŒaûCREATE_COUNTING_SEMAPHORE
();

785 
	`ŒaûCREATE_COUNTING_SEMAPHORE_FAILED
();

790 
	`cÚfigASSERT
Ğ
xHªdË
 );

791 
	`mtCOVERAGE_TEST_MARKER
();

794  
xHªdË
;

795 
	}
}

800 #iàĞĞ
cÚfigUSE_COUNTING_SEMAPHORES
 =ğ1 ) && ( 
cÚfigSUPPORT_DYNAMIC_ALLOCATION
 == 1 ) )

802 
QueueHªdË_t
 
	$xQueueC»©eCouÁšgSem­hÜe
ĞcÚ¡ 
UBa£Ty³_t
 
uxMaxCouÁ
,

803 cÚ¡ 
UBa£Ty³_t
 
uxIn™ŸlCouÁ
 )

805 
QueueHªdË_t
 
xHªdË
 = 
NULL
;

807 ifĞĞ
uxMaxCouÁ
 != 0 ) &&

808 Ğ
uxIn™ŸlCouÁ
 <ğ
uxMaxCouÁ
 ) )

810 
xHªdË
 = 
	`xQueueG’”icC»©e
Ğ
uxMaxCouÁ
, 
queueSEMAPHORE_QUEUE_ITEM_LENGTH
, 
queueQUEUE_TYPE_COUNTING_SEMAPHORE
 );

812 ifĞ
xHªdË
 !ğ
NULL
 )

814 ĞĞ
Queue_t
 * ) 
xHªdË
 )->
uxMes§gesWa™šg
 = 
uxIn™ŸlCouÁ
;

816 
	`ŒaûCREATE_COUNTING_SEMAPHORE
();

820 
	`ŒaûCREATE_COUNTING_SEMAPHORE_FAILED
();

825 
	`cÚfigASSERT
Ğ
xHªdË
 );

826 
	`mtCOVERAGE_TEST_MARKER
();

829  
xHªdË
;

830 
	}
}

835 
Ba£Ty³_t
 
	$xQueueG’”icS’d
Ğ
QueueHªdË_t
 
xQueue
,

836 cÚ¡ * cÚ¡ 
pvI‹mToQueue
,

837 
TickTy³_t
 
xTicksToWa™
,

838 cÚ¡ 
Ba£Ty³_t
 
xCİyPos™iÚ
 )

840 
Ba£Ty³_t
 
xEÁryTimeS‘
 = 
pdFALSE
, 
xY›ldRequœed
;

841 
TimeOut_t
 
xTimeOut
;

842 
Queue_t
 * cÚ¡ 
pxQueue
 = 
xQueue
;

844 
	`cÚfigASSERT
Ğ
pxQueue
 );

845 
	`cÚfigASSERT
Ğ!ĞĞ
pvI‹mToQueue
 =ğ
NULL
 ) && ( 
pxQueue
->
uxI‹mSize
 !ğĞ
UBa£Ty³_t
 ) 0U ) ) );

846 
	`cÚfigASSERT
Ğ!ĞĞ
xCİyPos™iÚ
 =ğ
queueOVERWRITE
 ) && ( 
pxQueue
->
uxL’gth
 != 1 ) ) );

847 #iàĞĞ
INCLUDE_xTaskG‘ScheduËrS‹
 =ğ1 ) || ( 
cÚfigUSE_TIMERS
 == 1 ) )

849 
	`cÚfigASSERT
Ğ!ĞĞ
	`xTaskG‘ScheduËrS‹
(è=ğ
skSCHEDULER_SUSPENDED
 ) && ( 
xTicksToWa™
 != 0 ) ) );

858 
	`skENTER_CRITICAL
();

864 ifĞĞ
pxQueue
->
uxMes§gesWa™šg
 <…xQueue->
uxL’gth
 ) || ( 
xCİyPos™iÚ
 =ğ
queueOVERWRITE
 ) )

866 
	`ŒaûQUEUE_SEND
Ğ
pxQueue
 );

868 #iàĞ
cÚfigUSE_QUEUE_SETS
 == 1 )

870 cÚ¡ 
UBa£Ty³_t
 
uxP»viousMes§gesWa™šg
 = 
pxQueue
->
uxMes§gesWa™šg
;

872 
xY›ldRequœed
 = 
	`´vCİyD©aToQueue
Ğ
pxQueue
, 
pvI‹mToQueue
, 
xCİyPos™iÚ
 );

874 ifĞ
pxQueue
->
pxQueueS‘CÚš”
 !ğ
NULL
 )

876 ifĞĞ
xCİyPos™iÚ
 =ğ
queueOVERWRITE
 ) && ( 
uxP»viousMes§gesWa™šg
 !ğĞ
UBa£Ty³_t
 ) 0 ) )

881 
	`mtCOVERAGE_TEST_MARKER
();

883 ifĞ
	`´vNÙifyQueueS‘CÚš”
Ğ
pxQueue
 ) !ğ
pdFALSE
 )

888 
	`queueYIELD_IF_USING_PREEMPTION
();

892 
	`mtCOVERAGE_TEST_MARKER
();

899 ifĞ
	`li¡LIST_IS_EMPTY
Ğ&Ğ
pxQueue
->
xTasksWa™šgToReûive
 ) ) =ğ
pdFALSE
 )

901 ifĞ
	`xTaskRemoveFromEv’tLi¡
Ğ&Ğ
pxQueue
->
xTasksWa™šgToReûive
 ) ) !ğ
pdFALSE
 )

907 
	`queueYIELD_IF_USING_PREEMPTION
();

911 
	`mtCOVERAGE_TEST_MARKER
();

914 ifĞ
xY›ldRequœed
 !ğ
pdFALSE
 )

920 
	`queueYIELD_IF_USING_PREEMPTION
();

924 
	`mtCOVERAGE_TEST_MARKER
();

930 
xY›ldRequœed
 = 
	`´vCİyD©aToQueue
Ğ
pxQueue
, 
pvI‹mToQueue
, 
xCİyPos™iÚ
 );

934 ifĞ
	`li¡LIST_IS_EMPTY
Ğ&Ğ
pxQueue
->
xTasksWa™šgToReûive
 ) ) =ğ
pdFALSE
 )

936 ifĞ
	`xTaskRemoveFromEv’tLi¡
Ğ&Ğ
pxQueue
->
xTasksWa™šgToReûive
 ) ) !ğ
pdFALSE
 )

942 
	`queueYIELD_IF_USING_PREEMPTION
();

946 
	`mtCOVERAGE_TEST_MARKER
();

949 ifĞ
xY›ldRequœed
 !ğ
pdFALSE
 )

955 
	`queueYIELD_IF_USING_PREEMPTION
();

959 
	`mtCOVERAGE_TEST_MARKER
();

964 
	`skEXIT_CRITICAL
();

965  
pdPASS
;

969 ifĞ
xTicksToWa™
 =ğĞ
TickTy³_t
 ) 0 )

973 
	`skEXIT_CRITICAL
();

977 
	`ŒaûQUEUE_SEND_FAILED
Ğ
pxQueue
 );

978  
”rQUEUE_FULL
;

980 ifĞ
xEÁryTimeS‘
 =ğ
pdFALSE
 )

984 
	`vTaskIÁ”ÇlS‘TimeOutS‹
Ğ&
xTimeOut
 );

985 
xEÁryTimeS‘
 = 
pdTRUE
;

990 
	`mtCOVERAGE_TEST_MARKER
();

994 
	`skEXIT_CRITICAL
();

999 
	`vTaskSu¥’dAÎ
();

1000 
	`´vLockQueue
Ğ
pxQueue
 );

1003 ifĞ
	`xTaskCheckFÜTimeOut
Ğ&
xTimeOut
, &
xTicksToWa™
 ) =ğ
pdFALSE
 )

1005 ifĞ
	`´vIsQueueFuÎ
Ğ
pxQueue
 ) !ğ
pdFALSE
 )

1007 
	`ŒaûBLOCKING_ON_QUEUE_SEND
Ğ
pxQueue
 );

1008 
	`vTaskPÏûOnEv’tLi¡
Ğ&Ğ
pxQueue
->
xTasksWa™šgToS’d
 ), 
xTicksToWa™
 );

1015 
	`´vUÆockQueue
Ğ
pxQueue
 );

1022 ifĞ
	`xTaskResumeAÎ
(è=ğ
pdFALSE
 )

1024 
	`pÜtYIELD_WITHIN_API
();

1030 
	`´vUÆockQueue
Ğ
pxQueue
 );

1031 Ğè
	`xTaskResumeAÎ
();

1037 
	`´vUÆockQueue
Ğ
pxQueue
 );

1038 Ğè
	`xTaskResumeAÎ
();

1040 
	`ŒaûQUEUE_SEND_FAILED
Ğ
pxQueue
 );

1041  
”rQUEUE_FULL
;

1044 
	}
}

1047 
Ba£Ty³_t
 
	$xQueueG’”icS’dFromISR
Ğ
QueueHªdË_t
 
xQueue
,

1048 cÚ¡ * cÚ¡ 
pvI‹mToQueue
,

1049 
Ba£Ty³_t
 * cÚ¡ 
pxHigh”PriÜ™yTaskWok’
,

1050 cÚ¡ 
Ba£Ty³_t
 
xCİyPos™iÚ
 )

1052 
Ba£Ty³_t
 
xR‘uº
;

1053 
UBa£Ty³_t
 
uxSavedIÁ”ru±Stus
;

1054 
Queue_t
 * cÚ¡ 
pxQueue
 = 
xQueue
;

1056 
	`cÚfigASSERT
Ğ
pxQueue
 );

1057 
	`cÚfigASSERT
Ğ!ĞĞ
pvI‹mToQueue
 =ğ
NULL
 ) && ( 
pxQueue
->
uxI‹mSize
 !ğĞ
UBa£Ty³_t
 ) 0U ) ) );

1058 
	`cÚfigASSERT
Ğ!ĞĞ
xCİyPos™iÚ
 =ğ
queueOVERWRITE
 ) && ( 
pxQueue
->
uxL’gth
 != 1 ) ) );

1074 
	`pÜtASSERT_IF_INTERRUPT_PRIORITY_INVALID
();

1081 
uxSavedIÁ”ru±Stus
 = 
	`pÜtSET_INTERRUPT_MASK_FROM_ISR
();

1083 ifĞĞ
pxQueue
->
uxMes§gesWa™šg
 <…xQueue->
uxL’gth
 ) || ( 
xCİyPos™iÚ
 =ğ
queueOVERWRITE
 ) )

1085 cÚ¡ 
št8_t
 
cTxLock
 = 
pxQueue
->cTxLock;

1086 cÚ¡ 
UBa£Ty³_t
 
uxP»viousMes§gesWa™šg
 = 
pxQueue
->
uxMes§gesWa™šg
;

1088 
	`ŒaûQUEUE_SEND_FROM_ISR
Ğ
pxQueue
 );

1095 Ğè
	`´vCİyD©aToQueue
Ğ
pxQueue
, 
pvI‹mToQueue
, 
xCİyPos™iÚ
 );

1099 ifĞ
cTxLock
 =ğ
queueUNLOCKED
 )

1101 #iàĞ
cÚfigUSE_QUEUE_SETS
 == 1 )

1103 ifĞ
pxQueue
->
pxQueueS‘CÚš”
 !ğ
NULL
 )

1105 ifĞĞ
xCİyPos™iÚ
 =ğ
queueOVERWRITE
 ) && ( 
uxP»viousMes§gesWa™šg
 !ğĞ
UBa£Ty³_t
 ) 0 ) )

1110 
	`mtCOVERAGE_TEST_MARKER
();

1112 ifĞ
	`´vNÙifyQueueS‘CÚš”
Ğ
pxQueue
 ) !ğ
pdFALSE
 )

1117 ifĞ
pxHigh”PriÜ™yTaskWok’
 !ğ
NULL
 )

1119 *
pxHigh”PriÜ™yTaskWok’
 = 
pdTRUE
;

1123 
	`mtCOVERAGE_TEST_MARKER
();

1128 
	`mtCOVERAGE_TEST_MARKER
();

1133 ifĞ
	`li¡LIST_IS_EMPTY
Ğ&Ğ
pxQueue
->
xTasksWa™šgToReûive
 ) ) =ğ
pdFALSE
 )

1135 ifĞ
	`xTaskRemoveFromEv’tLi¡
Ğ&Ğ
pxQueue
->
xTasksWa™šgToReûive
 ) ) !ğ
pdFALSE
 )

1139 ifĞ
pxHigh”PriÜ™yTaskWok’
 !ğ
NULL
 )

1141 *
pxHigh”PriÜ™yTaskWok’
 = 
pdTRUE
;

1145 
	`mtCOVERAGE_TEST_MARKER
();

1150 
	`mtCOVERAGE_TEST_MARKER
();

1155 
	`mtCOVERAGE_TEST_MARKER
();

1161 ifĞ
	`li¡LIST_IS_EMPTY
Ğ&Ğ
pxQueue
->
xTasksWa™šgToReûive
 ) ) =ğ
pdFALSE
 )

1163 ifĞ
	`xTaskRemoveFromEv’tLi¡
Ğ&Ğ
pxQueue
->
xTasksWa™šgToReûive
 ) ) !ğ
pdFALSE
 )

1167 ifĞ
pxHigh”PriÜ™yTaskWok’
 !ğ
NULL
 )

1169 *
pxHigh”PriÜ™yTaskWok’
 = 
pdTRUE
;

1173 
	`mtCOVERAGE_TEST_MARKER
();

1178 
	`mtCOVERAGE_TEST_MARKER
();

1183 
	`mtCOVERAGE_TEST_MARKER
();

1187 Ğè
uxP»viousMes§gesWa™šg
;

1195 
	`´vInüem’tQueueTxLock
Ğ
pxQueue
, 
cTxLock
 );

1198 
xR‘uº
 = 
pdPASS
;

1202 
	`ŒaûQUEUE_SEND_FROM_ISR_FAILED
Ğ
pxQueue
 );

1203 
xR‘uº
 = 
”rQUEUE_FULL
;

1206 
	`pÜtCLEAR_INTERRUPT_MASK_FROM_ISR
Ğ
uxSavedIÁ”ru±Stus
 );

1208  
xR‘uº
;

1209 
	}
}

1212 
Ba£Ty³_t
 
	$xQueueGiveFromISR
Ğ
QueueHªdË_t
 
xQueue
,

1213 
Ba£Ty³_t
 * cÚ¡ 
pxHigh”PriÜ™yTaskWok’
 )

1215 
Ba£Ty³_t
 
xR‘uº
;

1216 
UBa£Ty³_t
 
uxSavedIÁ”ru±Stus
;

1217 
Queue_t
 * cÚ¡ 
pxQueue
 = 
xQueue
;

1225 
	`cÚfigASSERT
Ğ
pxQueue
 );

1229 
	`cÚfigASSERT
Ğ
pxQueue
->
uxI‹mSize
 == 0 );

1234 
	`cÚfigASSERT
Ğ!ĞĞ
pxQueue
->
uxQueueTy³
 =ğ
queueQUEUE_IS_MUTEX
 ) && (…xQueue->
u
.
xSem­hÜe
.
xMu‹xHŞd”
 !ğ
NULL
 ) ) );

1250 
	`pÜtASSERT_IF_INTERRUPT_PRIORITY_INVALID
();

1252 
uxSavedIÁ”ru±Stus
 = 
	`pÜtSET_INTERRUPT_MASK_FROM_ISR
();

1254 cÚ¡ 
UBa£Ty³_t
 
uxMes§gesWa™šg
 = 
pxQueue
->uxMessagesWaiting;

1259 ifĞ
uxMes§gesWa™šg
 < 
pxQueue
->
uxL’gth
 )

1261 cÚ¡ 
št8_t
 
cTxLock
 = 
pxQueue
->cTxLock;

1263 
	`ŒaûQUEUE_SEND_FROM_ISR
Ğ
pxQueue
 );

1271 
pxQueue
->
uxMes§gesWa™šg
 = uxMes§gesWa™šg + ( 
UBa£Ty³_t
 ) 1;

1275 ifĞ
cTxLock
 =ğ
queueUNLOCKED
 )

1277 #iàĞ
cÚfigUSE_QUEUE_SETS
 == 1 )

1279 ifĞ
pxQueue
->
pxQueueS‘CÚš”
 !ğ
NULL
 )

1281 ifĞ
	`´vNÙifyQueueS‘CÚš”
Ğ
pxQueue
 ) !ğ
pdFALSE
 )

1286 ifĞ
pxHigh”PriÜ™yTaskWok’
 !ğ
NULL
 )

1288 *
pxHigh”PriÜ™yTaskWok’
 = 
pdTRUE
;

1292 
	`mtCOVERAGE_TEST_MARKER
();

1297 
	`mtCOVERAGE_TEST_MARKER
();

1302 ifĞ
	`li¡LIST_IS_EMPTY
Ğ&Ğ
pxQueue
->
xTasksWa™šgToReûive
 ) ) =ğ
pdFALSE
 )

1304 ifĞ
	`xTaskRemoveFromEv’tLi¡
Ğ&Ğ
pxQueue
->
xTasksWa™šgToReûive
 ) ) !ğ
pdFALSE
 )

1308 ifĞ
pxHigh”PriÜ™yTaskWok’
 !ğ
NULL
 )

1310 *
pxHigh”PriÜ™yTaskWok’
 = 
pdTRUE
;

1314 
	`mtCOVERAGE_TEST_MARKER
();

1319 
	`mtCOVERAGE_TEST_MARKER
();

1324 
	`mtCOVERAGE_TEST_MARKER
();

1330 ifĞ
	`li¡LIST_IS_EMPTY
Ğ&Ğ
pxQueue
->
xTasksWa™šgToReûive
 ) ) =ğ
pdFALSE
 )

1332 ifĞ
	`xTaskRemoveFromEv’tLi¡
Ğ&Ğ
pxQueue
->
xTasksWa™šgToReûive
 ) ) !ğ
pdFALSE
 )

1336 ifĞ
pxHigh”PriÜ™yTaskWok’
 !ğ
NULL
 )

1338 *
pxHigh”PriÜ™yTaskWok’
 = 
pdTRUE
;

1342 
	`mtCOVERAGE_TEST_MARKER
();

1347 
	`mtCOVERAGE_TEST_MARKER
();

1352 
	`mtCOVERAGE_TEST_MARKER
();

1361 
	`´vInüem’tQueueTxLock
Ğ
pxQueue
, 
cTxLock
 );

1364 
xR‘uº
 = 
pdPASS
;

1368 
	`ŒaûQUEUE_SEND_FROM_ISR_FAILED
Ğ
pxQueue
 );

1369 
xR‘uº
 = 
”rQUEUE_FULL
;

1372 
	`pÜtCLEAR_INTERRUPT_MASK_FROM_ISR
Ğ
uxSavedIÁ”ru±Stus
 );

1374  
xR‘uº
;

1375 
	}
}

1378 
Ba£Ty³_t
 
	$xQueueReûive
Ğ
QueueHªdË_t
 
xQueue
,

1379 * cÚ¡ 
pvBufãr
,

1380 
TickTy³_t
 
xTicksToWa™
 )

1382 
Ba£Ty³_t
 
xEÁryTimeS‘
 = 
pdFALSE
;

1383 
TimeOut_t
 
xTimeOut
;

1384 
Queue_t
 * cÚ¡ 
pxQueue
 = 
xQueue
;

1387 
	`cÚfigASSERT
ĞĞ
pxQueue
 ) );

1391 
	`cÚfigASSERT
Ğ!ĞĞĞ
pvBufãr
 ) =ğ
NULL
 ) && ( ( 
pxQueue
 )->
uxI‹mSize
 !ğĞ
UBa£Ty³_t
 ) 0U ) ) );

1394 #iàĞĞ
INCLUDE_xTaskG‘ScheduËrS‹
 =ğ1 ) || ( 
cÚfigUSE_TIMERS
 == 1 ) )

1396 
	`cÚfigASSERT
Ğ!ĞĞ
	`xTaskG‘ScheduËrS‹
(è=ğ
skSCHEDULER_SUSPENDED
 ) && ( 
xTicksToWa™
 != 0 ) ) );

1405 
	`skENTER_CRITICAL
();

1407 cÚ¡ 
UBa£Ty³_t
 
uxMes§gesWa™šg
 = 
pxQueue
->uxMessagesWaiting;

1411 ifĞ
uxMes§gesWa™šg
 > ( 
UBa£Ty³_t
 ) 0 )

1414 
	`´vCİyD©aFromQueue
Ğ
pxQueue
, 
pvBufãr
 );

1415 
	`ŒaûQUEUE_RECEIVE
Ğ
pxQueue
 );

1416 
pxQueue
->
uxMes§gesWa™šg
 = uxMes§gesWa™šg - ( 
UBa£Ty³_t
 ) 1;

1421 ifĞ
	`li¡LIST_IS_EMPTY
Ğ&Ğ
pxQueue
->
xTasksWa™šgToS’d
 ) ) =ğ
pdFALSE
 )

1423 ifĞ
	`xTaskRemoveFromEv’tLi¡
Ğ&Ğ
pxQueue
->
xTasksWa™šgToS’d
 ) ) !ğ
pdFALSE
 )

1425 
	`queueYIELD_IF_USING_PREEMPTION
();

1429 
	`mtCOVERAGE_TEST_MARKER
();

1434 
	`mtCOVERAGE_TEST_MARKER
();

1437 
	`skEXIT_CRITICAL
();

1438  
pdPASS
;

1442 ifĞ
xTicksToWa™
 =ğĞ
TickTy³_t
 ) 0 )

1446 
	`skEXIT_CRITICAL
();

1447 
	`ŒaûQUEUE_RECEIVE_FAILED
Ğ
pxQueue
 );

1448  
”rQUEUE_EMPTY
;

1450 ifĞ
xEÁryTimeS‘
 =ğ
pdFALSE
 )

1454 
	`vTaskIÁ”ÇlS‘TimeOutS‹
Ğ&
xTimeOut
 );

1455 
xEÁryTimeS‘
 = 
pdTRUE
;

1460 
	`mtCOVERAGE_TEST_MARKER
();

1464 
	`skEXIT_CRITICAL
();

1469 
	`vTaskSu¥’dAÎ
();

1470 
	`´vLockQueue
Ğ
pxQueue
 );

1473 ifĞ
	`xTaskCheckFÜTimeOut
Ğ&
xTimeOut
, &
xTicksToWa™
 ) =ğ
pdFALSE
 )

1477 ifĞ
	`´vIsQueueEm±y
Ğ
pxQueue
 ) !ğ
pdFALSE
 )

1479 
	`ŒaûBLOCKING_ON_QUEUE_RECEIVE
Ğ
pxQueue
 );

1480 
	`vTaskPÏûOnEv’tLi¡
Ğ&Ğ
pxQueue
->
xTasksWa™šgToReûive
 ), 
xTicksToWa™
 );

1481 
	`´vUÆockQueue
Ğ
pxQueue
 );

1483 ifĞ
	`xTaskResumeAÎ
(è=ğ
pdFALSE
 )

1485 
	`pÜtYIELD_WITHIN_API
();

1489 
	`mtCOVERAGE_TEST_MARKER
();

1496 
	`´vUÆockQueue
Ğ
pxQueue
 );

1497 Ğè
	`xTaskResumeAÎ
();

1504 
	`´vUÆockQueue
Ğ
pxQueue
 );

1505 Ğè
	`xTaskResumeAÎ
();

1507 ifĞ
	`´vIsQueueEm±y
Ğ
pxQueue
 ) !ğ
pdFALSE
 )

1509 
	`ŒaûQUEUE_RECEIVE_FAILED
Ğ
pxQueue
 );

1510  
”rQUEUE_EMPTY
;

1514 
	`mtCOVERAGE_TEST_MARKER
();

1518 
	}
}

1521 
Ba£Ty³_t
 
	$xQueueSem­hÜeTake
Ğ
QueueHªdË_t
 
xQueue
,

1522 
TickTy³_t
 
xTicksToWa™
 )

1524 
Ba£Ty³_t
 
xEÁryTimeS‘
 = 
pdFALSE
;

1525 
TimeOut_t
 
xTimeOut
;

1526 
Queue_t
 * cÚ¡ 
pxQueue
 = 
xQueue
;

1528 #iàĞ
cÚfigUSE_MUTEXES
 == 1 )

1529 
Ba£Ty³_t
 
xInh”™ªûOccu¼ed
 = 
pdFALSE
;

1533 
	`cÚfigASSERT
ĞĞ
pxQueue
 ) );

1537 
	`cÚfigASSERT
Ğ
pxQueue
->
uxI‹mSize
 == 0 );

1540 #iàĞĞ
INCLUDE_xTaskG‘ScheduËrS‹
 =ğ1 ) || ( 
cÚfigUSE_TIMERS
 == 1 ) )

1542 
	`cÚfigASSERT
Ğ!ĞĞ
	`xTaskG‘ScheduËrS‹
(è=ğ
skSCHEDULER_SUSPENDED
 ) && ( 
xTicksToWa™
 != 0 ) ) );

1551 
	`skENTER_CRITICAL
();

1555 cÚ¡ 
UBa£Ty³_t
 
uxSem­hÜeCouÁ
 = 
pxQueue
->
uxMes§gesWa™šg
;

1559 ifĞ
uxSem­hÜeCouÁ
 > ( 
UBa£Ty³_t
 ) 0 )

1561 
	`ŒaûQUEUE_RECEIVE
Ğ
pxQueue
 );

1565 
pxQueue
->
uxMes§gesWa™šg
 = 
uxSem­hÜeCouÁ
 - ( 
UBa£Ty³_t
 ) 1;

1567 #iàĞ
cÚfigUSE_MUTEXES
 == 1 )

1569 ifĞ
pxQueue
->
uxQueueTy³
 =ğ
queueQUEUE_IS_MUTEX
 )

1573 
pxQueue
->
u
.
xSem­hÜe
.
xMu‹xHŞd”
 = 
	`pvTaskInüem’tMu‹xH–dCouÁ
();

1577 
	`mtCOVERAGE_TEST_MARKER
();

1584 ifĞ
	`li¡LIST_IS_EMPTY
Ğ&Ğ
pxQueue
->
xTasksWa™šgToS’d
 ) ) =ğ
pdFALSE
 )

1586 ifĞ
	`xTaskRemoveFromEv’tLi¡
Ğ&Ğ
pxQueue
->
xTasksWa™šgToS’d
 ) ) !ğ
pdFALSE
 )

1588 
	`queueYIELD_IF_USING_PREEMPTION
();

1592 
	`mtCOVERAGE_TEST_MARKER
();

1597 
	`mtCOVERAGE_TEST_MARKER
();

1600 
	`skEXIT_CRITICAL
();

1601  
pdPASS
;

1605 ifĞ
xTicksToWa™
 =ğĞ
TickTy³_t
 ) 0 )

1610 #iàĞ
cÚfigUSE_MUTEXES
 == 1 )

1612 
	`cÚfigASSERT
Ğ
xInh”™ªûOccu¼ed
 =ğ
pdFALSE
 );

1618 
	`skEXIT_CRITICAL
();

1619 
	`ŒaûQUEUE_RECEIVE_FAILED
Ğ
pxQueue
 );

1620  
”rQUEUE_EMPTY
;

1622 ifĞ
xEÁryTimeS‘
 =ğ
pdFALSE
 )

1626 
	`vTaskIÁ”ÇlS‘TimeOutS‹
Ğ&
xTimeOut
 );

1627 
xEÁryTimeS‘
 = 
pdTRUE
;

1632 
	`mtCOVERAGE_TEST_MARKER
();

1636 
	`skEXIT_CRITICAL
();

1641 
	`vTaskSu¥’dAÎ
();

1642 
	`´vLockQueue
Ğ
pxQueue
 );

1645 ifĞ
	`xTaskCheckFÜTimeOut
Ğ&
xTimeOut
, &
xTicksToWa™
 ) =ğ
pdFALSE
 )

1651 ifĞ
	`´vIsQueueEm±y
Ğ
pxQueue
 ) !ğ
pdFALSE
 )

1653 
	`ŒaûBLOCKING_ON_QUEUE_RECEIVE
Ğ
pxQueue
 );

1655 #iàĞ
cÚfigUSE_MUTEXES
 == 1 )

1657 ifĞ
pxQueue
->
uxQueueTy³
 =ğ
queueQUEUE_IS_MUTEX
 )

1659 
	`skENTER_CRITICAL
();

1661 
xInh”™ªûOccu¼ed
 = 
	`xTaskPriÜ™yInh”™
Ğ
pxQueue
->
u
.
xSem­hÜe
.
xMu‹xHŞd”
 );

1663 
	`skEXIT_CRITICAL
();

1667 
	`mtCOVERAGE_TEST_MARKER
();

1672 
	`vTaskPÏûOnEv’tLi¡
Ğ&Ğ
pxQueue
->
xTasksWa™šgToReûive
 ), 
xTicksToWa™
 );

1673 
	`´vUÆockQueue
Ğ
pxQueue
 );

1675 ifĞ
	`xTaskResumeAÎ
(è=ğ
pdFALSE
 )

1677 
	`pÜtYIELD_WITHIN_API
();

1681 
	`mtCOVERAGE_TEST_MARKER
();

1688 
	`´vUÆockQueue
Ğ
pxQueue
 );

1689 Ğè
	`xTaskResumeAÎ
();

1695 
	`´vUÆockQueue
Ğ
pxQueue
 );

1696 Ğè
	`xTaskResumeAÎ
();

1702 ifĞ
	`´vIsQueueEm±y
Ğ
pxQueue
 ) !ğ
pdFALSE
 )

1704 #iàĞ
cÚfigUSE_MUTEXES
 == 1 )

1709 ifĞ
xInh”™ªûOccu¼ed
 !ğ
pdFALSE
 )

1711 
	`skENTER_CRITICAL
();

1713 
UBa£Ty³_t
 
uxHighe¡Wa™šgPriÜ™y
;

1720 
uxHighe¡Wa™šgPriÜ™y
 = 
	`´vG‘Disšh”™PriÜ™yAá”Timeout
Ğ
pxQueue
 );

1721 
	`vTaskPriÜ™yDisšh”™Aá”Timeout
Ğ
pxQueue
->
u
.
xSem­hÜe
.
xMu‹xHŞd”
, 
uxHighe¡Wa™šgPriÜ™y
 );

1723 
	`skEXIT_CRITICAL
();

1728 
	`ŒaûQUEUE_RECEIVE_FAILED
Ğ
pxQueue
 );

1729  
”rQUEUE_EMPTY
;

1733 
	`mtCOVERAGE_TEST_MARKER
();

1737 
	}
}

1740 
Ba£Ty³_t
 
	$xQueueP“k
Ğ
QueueHªdË_t
 
xQueue
,

1741 * cÚ¡ 
pvBufãr
,

1742 
TickTy³_t
 
xTicksToWa™
 )

1744 
Ba£Ty³_t
 
xEÁryTimeS‘
 = 
pdFALSE
;

1745 
TimeOut_t
 
xTimeOut
;

1746 
št8_t
 * 
pcOrigš®R—dPos™iÚ
;

1747 
Queue_t
 * cÚ¡ 
pxQueue
 = 
xQueue
;

1750 
	`cÚfigASSERT
ĞĞ
pxQueue
 ) );

1754 
	`cÚfigASSERT
Ğ!ĞĞĞ
pvBufãr
 ) =ğ
NULL
 ) && ( ( 
pxQueue
 )->
uxI‹mSize
 !ğĞ
UBa£Ty³_t
 ) 0U ) ) );

1757 #iàĞĞ
INCLUDE_xTaskG‘ScheduËrS‹
 =ğ1 ) || ( 
cÚfigUSE_TIMERS
 == 1 ) )

1759 
	`cÚfigASSERT
Ğ!ĞĞ
	`xTaskG‘ScheduËrS‹
(è=ğ
skSCHEDULER_SUSPENDED
 ) && ( 
xTicksToWa™
 != 0 ) ) );

1768 
	`skENTER_CRITICAL
();

1770 cÚ¡ 
UBa£Ty³_t
 
uxMes§gesWa™šg
 = 
pxQueue
->uxMessagesWaiting;

1774 ifĞ
uxMes§gesWa™šg
 > ( 
UBa£Ty³_t
 ) 0 )

1779 
pcOrigš®R—dPos™iÚ
 = 
pxQueue
->
u
.
xQueue
.
pcR—dFrom
;

1781 
	`´vCİyD©aFromQueue
Ğ
pxQueue
, 
pvBufãr
 );

1782 
	`ŒaûQUEUE_PEEK
Ğ
pxQueue
 );

1785 
pxQueue
->
u
.
xQueue
.
pcR—dFrom
 = 
pcOrigš®R—dPos™iÚ
;

1789 ifĞ
	`li¡LIST_IS_EMPTY
Ğ&Ğ
pxQueue
->
xTasksWa™šgToReûive
 ) ) =ğ
pdFALSE
 )

1791 ifĞ
	`xTaskRemoveFromEv’tLi¡
Ğ&Ğ
pxQueue
->
xTasksWa™šgToReûive
 ) ) !ğ
pdFALSE
 )

1794 
	`queueYIELD_IF_USING_PREEMPTION
();

1798 
	`mtCOVERAGE_TEST_MARKER
();

1803 
	`mtCOVERAGE_TEST_MARKER
();

1806 
	`skEXIT_CRITICAL
();

1807  
pdPASS
;

1811 ifĞ
xTicksToWa™
 =ğĞ
TickTy³_t
 ) 0 )

1815 
	`skEXIT_CRITICAL
();

1816 
	`ŒaûQUEUE_PEEK_FAILED
Ğ
pxQueue
 );

1817  
”rQUEUE_EMPTY
;

1819 ifĞ
xEÁryTimeS‘
 =ğ
pdFALSE
 )

1824 
	`vTaskIÁ”ÇlS‘TimeOutS‹
Ğ&
xTimeOut
 );

1825 
xEÁryTimeS‘
 = 
pdTRUE
;

1830 
	`mtCOVERAGE_TEST_MARKER
();

1834 
	`skEXIT_CRITICAL
();

1839 
	`vTaskSu¥’dAÎ
();

1840 
	`´vLockQueue
Ğ
pxQueue
 );

1843 ifĞ
	`xTaskCheckFÜTimeOut
Ğ&
xTimeOut
, &
xTicksToWa™
 ) =ğ
pdFALSE
 )

1847 ifĞ
	`´vIsQueueEm±y
Ğ
pxQueue
 ) !ğ
pdFALSE
 )

1849 
	`ŒaûBLOCKING_ON_QUEUE_PEEK
Ğ
pxQueue
 );

1850 
	`vTaskPÏûOnEv’tLi¡
Ğ&Ğ
pxQueue
->
xTasksWa™šgToReûive
 ), 
xTicksToWa™
 );

1851 
	`´vUÆockQueue
Ğ
pxQueue
 );

1853 ifĞ
	`xTaskResumeAÎ
(è=ğ
pdFALSE
 )

1855 
	`pÜtYIELD_WITHIN_API
();

1859 
	`mtCOVERAGE_TEST_MARKER
();

1866 
	`´vUÆockQueue
Ğ
pxQueue
 );

1867 Ğè
	`xTaskResumeAÎ
();

1874 
	`´vUÆockQueue
Ğ
pxQueue
 );

1875 Ğè
	`xTaskResumeAÎ
();

1877 ifĞ
	`´vIsQueueEm±y
Ğ
pxQueue
 ) !ğ
pdFALSE
 )

1879 
	`ŒaûQUEUE_PEEK_FAILED
Ğ
pxQueue
 );

1880  
”rQUEUE_EMPTY
;

1884 
	`mtCOVERAGE_TEST_MARKER
();

1888 
	}
}

1891 
Ba£Ty³_t
 
	$xQueueReûiveFromISR
Ğ
QueueHªdË_t
 
xQueue
,

1892 * cÚ¡ 
pvBufãr
,

1893 
Ba£Ty³_t
 * cÚ¡ 
pxHigh”PriÜ™yTaskWok’
 )

1895 
Ba£Ty³_t
 
xR‘uº
;

1896 
UBa£Ty³_t
 
uxSavedIÁ”ru±Stus
;

1897 
Queue_t
 * cÚ¡ 
pxQueue
 = 
xQueue
;

1899 
	`cÚfigASSERT
Ğ
pxQueue
 );

1900 
	`cÚfigASSERT
Ğ!ĞĞ
pvBufãr
 =ğ
NULL
 ) && ( 
pxQueue
->
uxI‹mSize
 !ğĞ
UBa£Ty³_t
 ) 0U ) ) );

1916 
	`pÜtASSERT_IF_INTERRUPT_PRIORITY_INVALID
();

1918 
uxSavedIÁ”ru±Stus
 = 
	`pÜtSET_INTERRUPT_MASK_FROM_ISR
();

1920 cÚ¡ 
UBa£Ty³_t
 
uxMes§gesWa™šg
 = 
pxQueue
->uxMessagesWaiting;

1923 ifĞ
uxMes§gesWa™šg
 > ( 
UBa£Ty³_t
 ) 0 )

1925 cÚ¡ 
št8_t
 
cRxLock
 = 
pxQueue
->cRxLock;

1927 
	`ŒaûQUEUE_RECEIVE_FROM_ISR
Ğ
pxQueue
 );

1929 
	`´vCİyD©aFromQueue
Ğ
pxQueue
, 
pvBufãr
 );

1930 
pxQueue
->
uxMes§gesWa™šg
 = uxMes§gesWa™šg - ( 
UBa£Ty³_t
 ) 1;

1936 ifĞ
cRxLock
 =ğ
queueUNLOCKED
 )

1938 ifĞ
	`li¡LIST_IS_EMPTY
Ğ&Ğ
pxQueue
->
xTasksWa™šgToS’d
 ) ) =ğ
pdFALSE
 )

1940 ifĞ
	`xTaskRemoveFromEv’tLi¡
Ğ&Ğ
pxQueue
->
xTasksWa™šgToS’d
 ) ) !ğ
pdFALSE
 )

1944 ifĞ
pxHigh”PriÜ™yTaskWok’
 !ğ
NULL
 )

1946 *
pxHigh”PriÜ™yTaskWok’
 = 
pdTRUE
;

1950 
	`mtCOVERAGE_TEST_MARKER
();

1955 
	`mtCOVERAGE_TEST_MARKER
();

1960 
	`mtCOVERAGE_TEST_MARKER
();

1967 
	`´vInüem’tQueueRxLock
Ğ
pxQueue
, 
cRxLock
 );

1970 
xR‘uº
 = 
pdPASS
;

1974 
xR‘uº
 = 
pdFAIL
;

1975 
	`ŒaûQUEUE_RECEIVE_FROM_ISR_FAILED
Ğ
pxQueue
 );

1978 
	`pÜtCLEAR_INTERRUPT_MASK_FROM_ISR
Ğ
uxSavedIÁ”ru±Stus
 );

1980  
xR‘uº
;

1981 
	}
}

1984 
Ba£Ty³_t
 
	$xQueueP“kFromISR
Ğ
QueueHªdË_t
 
xQueue
,

1985 * cÚ¡ 
pvBufãr
 )

1987 
Ba£Ty³_t
 
xR‘uº
;

1988 
UBa£Ty³_t
 
uxSavedIÁ”ru±Stus
;

1989 
št8_t
 * 
pcOrigš®R—dPos™iÚ
;

1990 
Queue_t
 * cÚ¡ 
pxQueue
 = 
xQueue
;

1992 
	`cÚfigASSERT
Ğ
pxQueue
 );

1993 
	`cÚfigASSERT
Ğ!ĞĞ
pvBufãr
 =ğ
NULL
 ) && ( 
pxQueue
->
uxI‹mSize
 !ğĞ
UBa£Ty³_t
 ) 0U ) ) );

1994 
	`cÚfigASSERT
Ğ
pxQueue
->
uxI‹mSize
 != 0 );

2010 
	`pÜtASSERT_IF_INTERRUPT_PRIORITY_INVALID
();

2012 
uxSavedIÁ”ru±Stus
 = 
	`pÜtSET_INTERRUPT_MASK_FROM_ISR
();

2015 ifĞ
pxQueue
->
uxMes§gesWa™šg
 > ( 
UBa£Ty³_t
 ) 0 )

2017 
	`ŒaûQUEUE_PEEK_FROM_ISR
Ğ
pxQueue
 );

2021 
pcOrigš®R—dPos™iÚ
 = 
pxQueue
->
u
.
xQueue
.
pcR—dFrom
;

2022 
	`´vCİyD©aFromQueue
Ğ
pxQueue
, 
pvBufãr
 );

2023 
pxQueue
->
u
.
xQueue
.
pcR—dFrom
 = 
pcOrigš®R—dPos™iÚ
;

2025 
xR‘uº
 = 
pdPASS
;

2029 
xR‘uº
 = 
pdFAIL
;

2030 
	`ŒaûQUEUE_PEEK_FROM_ISR_FAILED
Ğ
pxQueue
 );

2033 
	`pÜtCLEAR_INTERRUPT_MASK_FROM_ISR
Ğ
uxSavedIÁ”ru±Stus
 );

2035  
xR‘uº
;

2036 
	}
}

2039 
UBa£Ty³_t
 
	$uxQueueMes§gesWa™šg
ĞcÚ¡ 
QueueHªdË_t
 
xQueue
 )

2041 
UBa£Ty³_t
 
uxR‘uº
;

2043 
	`cÚfigASSERT
Ğ
xQueue
 );

2045 
	`skENTER_CRITICAL
();

2047 
uxR‘uº
 = ( ( 
Queue_t
 * ) 
xQueue
 )->
uxMes§gesWa™šg
;

2049 
	`skEXIT_CRITICAL
();

2051  
uxR‘uº
;

2052 
	}
}

2055 
UBa£Ty³_t
 
	$uxQueueS·ûsAvaabË
ĞcÚ¡ 
QueueHªdË_t
 
xQueue
 )

2057 
UBa£Ty³_t
 
uxR‘uº
;

2058 
Queue_t
 * cÚ¡ 
pxQueue
 = 
xQueue
;

2060 
	`cÚfigASSERT
Ğ
pxQueue
 );

2062 
	`skENTER_CRITICAL
();

2064 
uxR‘uº
 = 
pxQueue
->
uxL’gth
 -…xQueue->
uxMes§gesWa™šg
;

2066 
	`skEXIT_CRITICAL
();

2068  
uxR‘uº
;

2069 
	}
}

2072 
UBa£Ty³_t
 
	$uxQueueMes§gesWa™šgFromISR
ĞcÚ¡ 
QueueHªdË_t
 
xQueue
 )

2074 
UBa£Ty³_t
 
uxR‘uº
;

2075 
Queue_t
 * cÚ¡ 
pxQueue
 = 
xQueue
;

2077 
	`cÚfigASSERT
Ğ
pxQueue
 );

2078 
uxR‘uº
 = 
pxQueue
->
uxMes§gesWa™šg
;

2080  
uxR‘uº
;

2081 
	}
}

2084 
	$vQueueD–‘e
Ğ
QueueHªdË_t
 
xQueue
 )

2086 
Queue_t
 * cÚ¡ 
pxQueue
 = 
xQueue
;

2088 
	`cÚfigASSERT
Ğ
pxQueue
 );

2089 
	`ŒaûQUEUE_DELETE
Ğ
pxQueue
 );

2091 #iàĞ
cÚfigQUEUE_REGISTRY_SIZE
 > 0 )

2093 
	`vQueueUÄegi¡”Queue
Ğ
pxQueue
 );

2097 #iàĞĞ
cÚfigSUPPORT_DYNAMIC_ALLOCATION
 =ğ1 ) && ( 
cÚfigSUPPORT_STATIC_ALLOCATION
 == 0 ) )

2101 
	`vPÜtF»e
Ğ
pxQueue
 );

2103 #–iàĞĞ
cÚfigSUPPORT_DYNAMIC_ALLOCATION
 =ğ1 ) && ( 
cÚfigSUPPORT_STATIC_ALLOCATION
 == 1 ) )

2107 ifĞ
pxQueue
->
ucStiÿÎyAÎoÿ‹d
 =ğĞ
ušt8_t
 ) 
pdFALSE
 )

2109 
	`vPÜtF»e
Ğ
pxQueue
 );

2113 
	`mtCOVERAGE_TEST_MARKER
();

2120 Ğè
pxQueue
;

2123 
	}
}

2126 #iàĞ
cÚfigUSE_TRACE_FACILITY
 == 1 )

2128 
UBa£Ty³_t
 
	$uxQueueG‘QueueNumb”
Ğ
QueueHªdË_t
 
xQueue
 )

2130  ( ( 
Queue_t
 * ) 
xQueue
 )->
uxQueueNumb”
;

2131 
	}
}

2136 #iàĞ
cÚfigUSE_TRACE_FACILITY
 == 1 )

2138 
	$vQueueS‘QueueNumb”
Ğ
QueueHªdË_t
 
xQueue
,

2139 
UBa£Ty³_t
 
uxQueueNumb”
 )

2141 ĞĞ
Queue_t
 * ) 
xQueue
 )->
uxQueueNumb”
 = uxQueueNumber;

2142 
	}
}

2147 #iàĞ
cÚfigUSE_TRACE_FACILITY
 == 1 )

2149 
ušt8_t
 
	$ucQueueG‘QueueTy³
Ğ
QueueHªdË_t
 
xQueue
 )

2151  ( ( 
Queue_t
 * ) 
xQueue
 )->
ucQueueTy³
;

2152 
	}
}

2157 #iàĞ
cÚfigUSE_MUTEXES
 == 1 )

2159 
UBa£Ty³_t
 
	$´vG‘Disšh”™PriÜ™yAá”Timeout
ĞcÚ¡ 
Queue_t
 * cÚ¡ 
pxQueue
 )

2161 
UBa£Ty³_t
 
uxHighe¡PriÜ™yOfWa™šgTasks
;

2169 ifĞ
	`li¡CURRENT_LIST_LENGTH
Ğ&Ğ
pxQueue
->
xTasksWa™šgToReûive
 ) ) > 0U )

2171 
uxHighe¡PriÜ™yOfWa™šgTasks
 = ( 
UBa£Ty³_t
 ) 
cÚfigMAX_PRIORITIES
 - ( UBa£Ty³_ˆè
	`li¡GET_ITEM_VALUE_OF_HEAD_ENTRY
Ğ&Ğ
pxQueue
->
xTasksWa™šgToReûive
 ) );

2175 
uxHighe¡PriÜ™yOfWa™šgTasks
 = 
tskIDLE_PRIORITY
;

2178  
uxHighe¡PriÜ™yOfWa™šgTasks
;

2179 
	}
}

2184 
Ba£Ty³_t
 
	$´vCİyD©aToQueue
Ğ
Queue_t
 * cÚ¡ 
pxQueue
,

2185 cÚ¡ * 
pvI‹mToQueue
,

2186 cÚ¡ 
Ba£Ty³_t
 
xPos™iÚ
 )

2188 
Ba£Ty³_t
 
xR‘uº
 = 
pdFALSE
;

2189 
UBa£Ty³_t
 
uxMes§gesWa™šg
;

2193 
uxMes§gesWa™šg
 = 
pxQueue
->uxMessagesWaiting;

2195 ifĞ
pxQueue
->
uxI‹mSize
 =ğĞ
UBa£Ty³_t
 ) 0 )

2197 #iàĞ
cÚfigUSE_MUTEXES
 == 1 )

2199 ifĞ
pxQueue
->
uxQueueTy³
 =ğ
queueQUEUE_IS_MUTEX
 )

2202 
xR‘uº
 = 
	`xTaskPriÜ™yDisšh”™
Ğ
pxQueue
->
u
.
xSem­hÜe
.
xMu‹xHŞd”
 );

2203 
pxQueue
->
u
.
xSem­hÜe
.
xMu‹xHŞd”
 = 
NULL
;

2207 
	`mtCOVERAGE_TEST_MARKER
();

2212 ifĞ
xPos™iÚ
 =ğ
queueSEND_TO_BACK
 )

2214 Ğè
	`memıy
ĞĞ* ) 
pxQueue
->
pcWr™eTo
, 
pvI‹mToQueue
, ( 
size_t
 )…xQueue->
uxI‹mSize
 );

2215 
pxQueue
->
pcWr™eTo
 +ğpxQueue->
uxI‹mSize
;

2217 ifĞ
pxQueue
->
pcWr™eTo
 >ğpxQueue->
u
.
xQueue
.
pcTa
 )

2219 
pxQueue
->
pcWr™eTo
 =…xQueue->
pcH—d
;

2223 
	`mtCOVERAGE_TEST_MARKER
();

2228 Ğè
	`memıy
ĞĞ* ) 
pxQueue
->
u
.
xQueue
.
pcR—dFrom
, 
pvI‹mToQueue
, ( 
size_t
 )…xQueue->
uxI‹mSize
 );

2229 
pxQueue
->
u
.
xQueue
.
pcR—dFrom
 -ğpxQueue->
uxI‹mSize
;

2231 ifĞ
pxQueue
->
u
.
xQueue
.
pcR—dFrom
 <…xQueue->
pcH—d
 )

2233 
pxQueue
->
u
.
xQueue
.
pcR—dFrom
 = (…xQueue->u.xQueue.
pcTa
 -…xQueue->
uxI‹mSize
 );

2237 
	`mtCOVERAGE_TEST_MARKER
();

2240 ifĞ
xPos™iÚ
 =ğ
queueOVERWRITE
 )

2242 ifĞ
uxMes§gesWa™šg
 > ( 
UBa£Ty³_t
 ) 0 )

2248 --
uxMes§gesWa™šg
;

2252 
	`mtCOVERAGE_TEST_MARKER
();

2257 
	`mtCOVERAGE_TEST_MARKER
();

2261 
pxQueue
->
uxMes§gesWa™šg
 = uxMes§gesWa™šg + ( 
UBa£Ty³_t
 ) 1;

2263  
xR‘uº
;

2264 
	}
}

2267 
	$´vCİyD©aFromQueue
Ğ
Queue_t
 * cÚ¡ 
pxQueue
,

2268 * cÚ¡ 
pvBufãr
 )

2270 ifĞ
pxQueue
->
uxI‹mSize
 !ğĞ
UBa£Ty³_t
 ) 0 )

2272 
pxQueue
->
u
.
xQueue
.
pcR—dFrom
 +ğpxQueue->
uxI‹mSize
;

2274 ifĞ
pxQueue
->
u
.
xQueue
.
pcR—dFrom
 >ğpxQueue->u.xQueue.
pcTa
 )

2276 
pxQueue
->
u
.
xQueue
.
pcR—dFrom
 =…xQueue->
pcH—d
;

2280 
	`mtCOVERAGE_TEST_MARKER
();

2283 Ğè
	`memıy
ĞĞ* ) 
pvBufãr
, ( * ) 
pxQueue
->
u
.
xQueue
.
pcR—dFrom
, ( 
size_t
 )…xQueue->
uxI‹mSize
 );

2285 
	}
}

2288 
	$´vUÆockQueue
Ğ
Queue_t
 * cÚ¡ 
pxQueue
 )

2296 
	`skENTER_CRITICAL
();

2298 
št8_t
 
cTxLock
 = 
pxQueue
->cTxLock;

2301  
cTxLock
 > 
queueLOCKED_UNMODIFIED
 )

2305 #iàĞ
cÚfigUSE_QUEUE_SETS
 == 1 )

2307 ifĞ
pxQueue
->
pxQueueS‘CÚš”
 !ğ
NULL
 )

2309 ifĞ
	`´vNÙifyQueueS‘CÚš”
Ğ
pxQueue
 ) !ğ
pdFALSE
 )

2314 
	`vTaskMis£dY›ld
();

2318 
	`mtCOVERAGE_TEST_MARKER
();

2326 ifĞ
	`li¡LIST_IS_EMPTY
Ğ&Ğ
pxQueue
->
xTasksWa™šgToReûive
 ) ) =ğ
pdFALSE
 )

2328 ifĞ
	`xTaskRemoveFromEv’tLi¡
Ğ&Ğ
pxQueue
->
xTasksWa™šgToReûive
 ) ) !ğ
pdFALSE
 )

2332 
	`vTaskMis£dY›ld
();

2336 
	`mtCOVERAGE_TEST_MARKER
();

2349 ifĞ
	`li¡LIST_IS_EMPTY
Ğ&Ğ
pxQueue
->
xTasksWa™šgToReûive
 ) ) =ğ
pdFALSE
 )

2351 ifĞ
	`xTaskRemoveFromEv’tLi¡
Ğ&Ğ
pxQueue
->
xTasksWa™šgToReûive
 ) ) !ğ
pdFALSE
 )

2355 
	`vTaskMis£dY›ld
();

2359 
	`mtCOVERAGE_TEST_MARKER
();

2369 --
cTxLock
;

2372 
pxQueue
->
cTxLock
 = 
queueUNLOCKED
;

2374 
	`skEXIT_CRITICAL
();

2377 
	`skENTER_CRITICAL
();

2379 
št8_t
 
cRxLock
 = 
pxQueue
->cRxLock;

2381  
cRxLock
 > 
queueLOCKED_UNMODIFIED
 )

2383 ifĞ
	`li¡LIST_IS_EMPTY
Ğ&Ğ
pxQueue
->
xTasksWa™šgToS’d
 ) ) =ğ
pdFALSE
 )

2385 ifĞ
	`xTaskRemoveFromEv’tLi¡
Ğ&Ğ
pxQueue
->
xTasksWa™šgToS’d
 ) ) !ğ
pdFALSE
 )

2387 
	`vTaskMis£dY›ld
();

2391 
	`mtCOVERAGE_TEST_MARKER
();

2394 --
cRxLock
;

2402 
pxQueue
->
cRxLock
 = 
queueUNLOCKED
;

2404 
	`skEXIT_CRITICAL
();

2405 
	}
}

2408 
Ba£Ty³_t
 
	$´vIsQueueEm±y
ĞcÚ¡ 
Queue_t
 * 
pxQueue
 )

2410 
Ba£Ty³_t
 
xR‘uº
;

2412 
	`skENTER_CRITICAL
();

2414 ifĞ
pxQueue
->
uxMes§gesWa™šg
 =ğĞ
UBa£Ty³_t
 ) 0 )

2416 
xR‘uº
 = 
pdTRUE
;

2420 
xR‘uº
 = 
pdFALSE
;

2423 
	`skEXIT_CRITICAL
();

2425  
xR‘uº
;

2426 
	}
}

2429 
Ba£Ty³_t
 
	$xQueueIsQueueEm±yFromISR
ĞcÚ¡ 
QueueHªdË_t
 
xQueue
 )

2431 
Ba£Ty³_t
 
xR‘uº
;

2432 
Queue_t
 * cÚ¡ 
pxQueue
 = 
xQueue
;

2434 
	`cÚfigASSERT
Ğ
pxQueue
 );

2436 ifĞ
pxQueue
->
uxMes§gesWa™šg
 =ğĞ
UBa£Ty³_t
 ) 0 )

2438 
xR‘uº
 = 
pdTRUE
;

2442 
xR‘uº
 = 
pdFALSE
;

2445  
xR‘uº
;

2446 
	}
}

2449 
Ba£Ty³_t
 
	$´vIsQueueFuÎ
ĞcÚ¡ 
Queue_t
 * 
pxQueue
 )

2451 
Ba£Ty³_t
 
xR‘uº
;

2453 
	`skENTER_CRITICAL
();

2455 ifĞ
pxQueue
->
uxMes§gesWa™šg
 =ğpxQueue->
uxL’gth
 )

2457 
xR‘uº
 = 
pdTRUE
;

2461 
xR‘uº
 = 
pdFALSE
;

2464 
	`skEXIT_CRITICAL
();

2466  
xR‘uº
;

2467 
	}
}

2470 
Ba£Ty³_t
 
	$xQueueIsQueueFuÎFromISR
ĞcÚ¡ 
QueueHªdË_t
 
xQueue
 )

2472 
Ba£Ty³_t
 
xR‘uº
;

2473 
Queue_t
 * cÚ¡ 
pxQueue
 = 
xQueue
;

2475 
	`cÚfigASSERT
Ğ
pxQueue
 );

2477 ifĞ
pxQueue
->
uxMes§gesWa™šg
 =ğpxQueue->
uxL’gth
 )

2479 
xR‘uº
 = 
pdTRUE
;

2483 
xR‘uº
 = 
pdFALSE
;

2486  
xR‘uº
;

2487 
	}
}

2490 #iàĞ
cÚfigUSE_CO_ROUTINES
 == 1 )

2492 
Ba£Ty³_t
 
	$xQueueCRS’d
Ğ
QueueHªdË_t
 
xQueue
,

2493 cÚ¡ * 
pvI‹mToQueue
,

2494 
TickTy³_t
 
xTicksToWa™
 )

2496 
Ba£Ty³_t
 
xR‘uº
;

2497 
Queue_t
 * cÚ¡ 
pxQueue
 = 
xQueue
;

2502 
	`pÜtDISABLE_INTERRUPTS
();

2504 ifĞ
	`´vIsQueueFuÎ
Ğ
pxQueue
 ) !ğ
pdFALSE
 )

2508 ifĞ
xTicksToWa™
 > ( 
TickTy³_t
 ) 0 )

2512 
	`vCoRoutšeAddToD–ayedLi¡
Ğ
xTicksToWa™
, &Ğ
pxQueue
->
xTasksWa™šgToS’d
 ) );

2513 
	`pÜtENABLE_INTERRUPTS
();

2514  
”rQUEUE_BLOCKED
;

2518 
	`pÜtENABLE_INTERRUPTS
();

2519  
”rQUEUE_FULL
;

2523 
	`pÜtENABLE_INTERRUPTS
();

2525 
	`pÜtDISABLE_INTERRUPTS
();

2527 ifĞ
pxQueue
->
uxMes§gesWa™šg
 <…xQueue->
uxL’gth
 )

2530 
	`´vCİyD©aToQueue
Ğ
pxQueue
, 
pvI‹mToQueue
, 
queueSEND_TO_BACK
 );

2531 
xR‘uº
 = 
pdPASS
;

2534 ifĞ
	`li¡LIST_IS_EMPTY
Ğ&Ğ
pxQueue
->
xTasksWa™šgToReûive
 ) ) =ğ
pdFALSE
 )

2540 ifĞ
	`xCoRoutšeRemoveFromEv’tLi¡
Ğ&Ğ
pxQueue
->
xTasksWa™šgToReûive
 ) ) !ğ
pdFALSE
 )

2544 
xR‘uº
 = 
”rQUEUE_YIELD
;

2548 
	`mtCOVERAGE_TEST_MARKER
();

2553 
	`mtCOVERAGE_TEST_MARKER
();

2558 
xR‘uº
 = 
”rQUEUE_FULL
;

2561 
	`pÜtENABLE_INTERRUPTS
();

2563  
xR‘uº
;

2564 
	}
}

2569 #iàĞ
cÚfigUSE_CO_ROUTINES
 == 1 )

2571 
Ba£Ty³_t
 
	$xQueueCRReûive
Ğ
QueueHªdË_t
 
xQueue
,

2572 * 
pvBufãr
,

2573 
TickTy³_t
 
xTicksToWa™
 )

2575 
Ba£Ty³_t
 
xR‘uº
;

2576 
Queue_t
 * cÚ¡ 
pxQueue
 = 
xQueue
;

2581 
	`pÜtDISABLE_INTERRUPTS
();

2583 ifĞ
pxQueue
->
uxMes§gesWa™šg
 =ğĞ
UBa£Ty³_t
 ) 0 )

2587 ifĞ
xTicksToWa™
 > ( 
TickTy³_t
 ) 0 )

2591 
	`vCoRoutšeAddToD–ayedLi¡
Ğ
xTicksToWa™
, &Ğ
pxQueue
->
xTasksWa™šgToReûive
 ) );

2592 
	`pÜtENABLE_INTERRUPTS
();

2593  
”rQUEUE_BLOCKED
;

2597 
	`pÜtENABLE_INTERRUPTS
();

2598  
”rQUEUE_FULL
;

2603 
	`mtCOVERAGE_TEST_MARKER
();

2606 
	`pÜtENABLE_INTERRUPTS
();

2608 
	`pÜtDISABLE_INTERRUPTS
();

2610 ifĞ
pxQueue
->
uxMes§gesWa™šg
 > ( 
UBa£Ty³_t
 ) 0 )

2613 
pxQueue
->
u
.
xQueue
.
pcR—dFrom
 +ğpxQueue->
uxI‹mSize
;

2615 ifĞ
pxQueue
->
u
.
xQueue
.
pcR—dFrom
 >ğpxQueue->u.xQueue.
pcTa
 )

2617 
pxQueue
->
u
.
xQueue
.
pcR—dFrom
 =…xQueue->
pcH—d
;

2621 
	`mtCOVERAGE_TEST_MARKER
();

2624 --Ğ
pxQueue
->
uxMes§gesWa™šg
 );

2625 Ğè
	`memıy
ĞĞ* ) 
pvBufãr
, ( * ) 
pxQueue
->
u
.
xQueue
.
pcR—dFrom
, ( èpxQueue->
uxI‹mSize
 );

2627 
xR‘uº
 = 
pdPASS
;

2630 ifĞ
	`li¡LIST_IS_EMPTY
Ğ&Ğ
pxQueue
->
xTasksWa™šgToS’d
 ) ) =ğ
pdFALSE
 )

2636 ifĞ
	`xCoRoutšeRemoveFromEv’tLi¡
Ğ&Ğ
pxQueue
->
xTasksWa™šgToS’d
 ) ) !ğ
pdFALSE
 )

2638 
xR‘uº
 = 
”rQUEUE_YIELD
;

2642 
	`mtCOVERAGE_TEST_MARKER
();

2647 
	`mtCOVERAGE_TEST_MARKER
();

2652 
xR‘uº
 = 
pdFAIL
;

2655 
	`pÜtENABLE_INTERRUPTS
();

2657  
xR‘uº
;

2658 
	}
}

2663 #iàĞ
cÚfigUSE_CO_ROUTINES
 == 1 )

2665 
Ba£Ty³_t
 
	$xQueueCRS’dFromISR
Ğ
QueueHªdË_t
 
xQueue
,

2666 cÚ¡ * 
pvI‹mToQueue
,

2667 
Ba£Ty³_t
 
xCoRoutšeP»viou¦yWok’
 )

2669 
Queue_t
 * cÚ¡ 
pxQueue
 = 
xQueue
;

2673 ifĞ
pxQueue
->
uxMes§gesWa™šg
 <…xQueue->
uxL’gth
 )

2675 
	`´vCİyD©aToQueue
Ğ
pxQueue
, 
pvI‹mToQueue
, 
queueSEND_TO_BACK
 );

2679 ifĞ
xCoRoutšeP»viou¦yWok’
 =ğ
pdFALSE
 )

2681 ifĞ
	`li¡LIST_IS_EMPTY
Ğ&Ğ
pxQueue
->
xTasksWa™šgToReûive
 ) ) =ğ
pdFALSE
 )

2683 ifĞ
	`xCoRoutšeRemoveFromEv’tLi¡
Ğ&Ğ
pxQueue
->
xTasksWa™šgToReûive
 ) ) !ğ
pdFALSE
 )

2685  
pdTRUE
;

2689 
	`mtCOVERAGE_TEST_MARKER
();

2694 
	`mtCOVERAGE_TEST_MARKER
();

2699 
	`mtCOVERAGE_TEST_MARKER
();

2704 
	`mtCOVERAGE_TEST_MARKER
();

2707  
xCoRoutšeP»viou¦yWok’
;

2708 
	}
}

2713 #iàĞ
cÚfigUSE_CO_ROUTINES
 == 1 )

2715 
Ba£Ty³_t
 
	$xQueueCRReûiveFromISR
Ğ
QueueHªdË_t
 
xQueue
,

2716 * 
pvBufãr
,

2717 
Ba£Ty³_t
 * 
pxCoRoutšeWok’
 )

2719 
Ba£Ty³_t
 
xR‘uº
;

2720 
Queue_t
 * cÚ¡ 
pxQueue
 = 
xQueue
;

2724 ifĞ
pxQueue
->
uxMes§gesWa™šg
 > ( 
UBa£Ty³_t
 ) 0 )

2727 
pxQueue
->
u
.
xQueue
.
pcR—dFrom
 +ğpxQueue->
uxI‹mSize
;

2729 ifĞ
pxQueue
->
u
.
xQueue
.
pcR—dFrom
 >ğpxQueue->u.xQueue.
pcTa
 )

2731 
pxQueue
->
u
.
xQueue
.
pcR—dFrom
 =…xQueue->
pcH—d
;

2735 
	`mtCOVERAGE_TEST_MARKER
();

2738 --Ğ
pxQueue
->
uxMes§gesWa™šg
 );

2739 Ğè
	`memıy
ĞĞ* ) 
pvBufãr
, ( * ) 
pxQueue
->
u
.
xQueue
.
pcR—dFrom
, ( èpxQueue->
uxI‹mSize
 );

2741 ifĞĞ*
pxCoRoutšeWok’
 ) =ğ
pdFALSE
 )

2743 ifĞ
	`li¡LIST_IS_EMPTY
Ğ&Ğ
pxQueue
->
xTasksWa™šgToS’d
 ) ) =ğ
pdFALSE
 )

2745 ifĞ
	`xCoRoutšeRemoveFromEv’tLi¡
Ğ&Ğ
pxQueue
->
xTasksWa™šgToS’d
 ) ) !ğ
pdFALSE
 )

2747 *
pxCoRoutšeWok’
 = 
pdTRUE
;

2751 
	`mtCOVERAGE_TEST_MARKER
();

2756 
	`mtCOVERAGE_TEST_MARKER
();

2761 
	`mtCOVERAGE_TEST_MARKER
();

2764 
xR‘uº
 = 
pdPASS
;

2768 
xR‘uº
 = 
pdFAIL
;

2771  
xR‘uº
;

2772 
	}
}

2777 #iàĞ
cÚfigQUEUE_REGISTRY_SIZE
 > 0 )

2779 
	$vQueueAddToRegi¡ry
Ğ
QueueHªdË_t
 
xQueue
,

2780 cÚ¡ * 
pcQueueName
 )

2782 
UBa£Ty³_t
 
ux
;

2783 
QueueRegi¡ryI‹m_t
 * 
pxEÁryToWr™e
 = 
NULL
;

2785 
	`cÚfigASSERT
Ğ
xQueue
 );

2787 ifĞ
pcQueueName
 !ğ
NULL
 )

2791  
ux
 = ( 
UBa£Ty³_t
 ) 0U; ux < ( UBa£Ty³_ˆè
cÚfigQUEUE_REGISTRY_SIZE
; ux++ )

2794 ifĞ
xQueue
 =ğ
xQueueRegi¡ry
[ 
ux
 ].
xHªdË
 )

2796 
pxEÁryToWr™e
 = &Ğ
xQueueRegi¡ry
[ 
ux
 ] );

2800 ifĞĞ
pxEÁryToWr™e
 =ğ
NULL
 ) && ( 
xQueueRegi¡ry
[ 
ux
 ].
pcQueueName
 == NULL ) )

2802 
pxEÁryToWr™e
 = &Ğ
xQueueRegi¡ry
[ 
ux
 ] );

2806 
	`mtCOVERAGE_TEST_MARKER
();

2811 ifĞ
pxEÁryToWr™e
 !ğ
NULL
 )

2814 
pxEÁryToWr™e
->
pcQueueName
 =…cQueueName;

2815 
pxEÁryToWr™e
->
xHªdË
 = 
xQueue
;

2817 
	`ŒaûQUEUE_REGISTRY_ADD
Ğ
xQueue
, 
pcQueueName
 );

2819 
	}
}

2824 #iàĞ
cÚfigQUEUE_REGISTRY_SIZE
 > 0 )

2826 cÚ¡ * 
	$pcQueueG‘Name
Ğ
QueueHªdË_t
 
xQueue
 )

2828 
UBa£Ty³_t
 
ux
;

2829 cÚ¡ * 
pcR‘uº
 = 
NULL
;

2831 
	`cÚfigASSERT
Ğ
xQueue
 );

2836  
ux
 = ( 
UBa£Ty³_t
 ) 0U; ux < ( UBa£Ty³_ˆè
cÚfigQUEUE_REGISTRY_SIZE
; ux++ )

2838 ifĞ
xQueueRegi¡ry
[ 
ux
 ].
xHªdË
 =ğ
xQueue
 )

2840 
pcR‘uº
 = 
xQueueRegi¡ry
[ 
ux
 ].
pcQueueName
;

2845 
	`mtCOVERAGE_TEST_MARKER
();

2849  
pcR‘uº
;

2850 
	}
}

2855 #iàĞ
cÚfigQUEUE_REGISTRY_SIZE
 > 0 )

2857 
	$vQueueUÄegi¡”Queue
Ğ
QueueHªdË_t
 
xQueue
 )

2859 
UBa£Ty³_t
 
ux
;

2861 
	`cÚfigASSERT
Ğ
xQueue
 );

2865  
ux
 = ( 
UBa£Ty³_t
 ) 0U; ux < ( UBa£Ty³_ˆè
cÚfigQUEUE_REGISTRY_SIZE
; ux++ )

2867 ifĞ
xQueueRegi¡ry
[ 
ux
 ].
xHªdË
 =ğ
xQueue
 )

2870 
xQueueRegi¡ry
[ 
ux
 ].
pcQueueName
 = 
NULL
;

2875 
xQueueRegi¡ry
[ 
ux
 ].
xHªdË
 = ( 
QueueHªdË_t
 ) 0;

2880 
	`mtCOVERAGE_TEST_MARKER
();

2883 
	}
}

2888 #iàĞ
cÚfigUSE_TIMERS
 == 1 )

2890 
	$vQueueWa™FÜMes§geRe¡riùed
Ğ
QueueHªdË_t
 
xQueue
,

2891 
TickTy³_t
 
xTicksToWa™
,

2892 cÚ¡ 
Ba£Ty³_t
 
xWa™Indefš™–y
 )

2894 
Queue_t
 * cÚ¡ 
pxQueue
 = 
xQueue
;

2910 
	`´vLockQueue
Ğ
pxQueue
 );

2912 ifĞ
pxQueue
->
uxMes§gesWa™šg
 =ğĞ
UBa£Ty³_t
 ) 0U )

2915 
	`vTaskPÏûOnEv’tLi¡Re¡riùed
Ğ&Ğ
pxQueue
->
xTasksWa™šgToReûive
 ), 
xTicksToWa™
, 
xWa™Indefš™–y
 );

2919 
	`mtCOVERAGE_TEST_MARKER
();

2922 
	`´vUÆockQueue
Ğ
pxQueue
 );

2923 
	}
}

2928 #iàĞĞ
cÚfigUSE_QUEUE_SETS
 =ğ1 ) && ( 
cÚfigSUPPORT_DYNAMIC_ALLOCATION
 == 1 ) )

2930 
QueueS‘HªdË_t
 
	$xQueueC»©eS‘
ĞcÚ¡ 
UBa£Ty³_t
 
uxEv’tQueueL’gth
 )

2932 
QueueS‘HªdË_t
 
pxQueue
;

2934 
pxQueue
 = 
	`xQueueG’”icC»©e
Ğ
uxEv’tQueueL’gth
, ( 
UBa£Ty³_t
 ) Ğ
Queue_t
 * ), 
queueQUEUE_TYPE_SET
 );

2936  
pxQueue
;

2937 
	}
}

2942 #iàĞ
cÚfigUSE_QUEUE_SETS
 == 1 )

2944 
Ba£Ty³_t
 
	$xQueueAddToS‘
Ğ
QueueS‘Memb”HªdË_t
 
xQueueOrSem­hÜe
,

2945 
QueueS‘HªdË_t
 
xQueueS‘
 )

2947 
Ba£Ty³_t
 
xR‘uº
;

2949 
	`skENTER_CRITICAL
();

2951 ifĞĞĞ
Queue_t
 * ) 
xQueueOrSem­hÜe
 )->
pxQueueS‘CÚš”
 !ğ
NULL
 )

2954 
xR‘uº
 = 
pdFAIL
;

2956 ifĞĞĞ
Queue_t
 * ) 
xQueueOrSem­hÜe
 )->
uxMes§gesWa™šg
 !ğĞ
UBa£Ty³_t
 ) 0 )

2960 
xR‘uº
 = 
pdFAIL
;

2964 ĞĞ
Queue_t
 * ) 
xQueueOrSem­hÜe
 )->
pxQueueS‘CÚš”
 = 
xQueueS‘
;

2965 
xR‘uº
 = 
pdPASS
;

2968 
	`skEXIT_CRITICAL
();

2970  
xR‘uº
;

2971 
	}
}

2976 #iàĞ
cÚfigUSE_QUEUE_SETS
 == 1 )

2978 
Ba£Ty³_t
 
	$xQueueRemoveFromS‘
Ğ
QueueS‘Memb”HªdË_t
 
xQueueOrSem­hÜe
,

2979 
QueueS‘HªdË_t
 
xQueueS‘
 )

2981 
Ba£Ty³_t
 
xR‘uº
;

2982 
Queue_t
 * cÚ¡ 
pxQueueOrSem­hÜe
 = ( Queue_ˆ* ) 
xQueueOrSem­hÜe
;

2984 ifĞ
pxQueueOrSem­hÜe
->
pxQueueS‘CÚš”
 !ğ
xQueueS‘
 )

2987 
xR‘uº
 = 
pdFAIL
;

2989 ifĞ
pxQueueOrSem­hÜe
->
uxMes§gesWa™šg
 !ğĞ
UBa£Ty³_t
 ) 0 )

2994 
xR‘uº
 = 
pdFAIL
;

2998 
	`skENTER_CRITICAL
();

3001 
pxQueueOrSem­hÜe
->
pxQueueS‘CÚš”
 = 
NULL
;

3003 
	`skEXIT_CRITICAL
();

3004 
xR‘uº
 = 
pdPASS
;

3007  
xR‘uº
;

3008 
	}
}

3013 #iàĞ
cÚfigUSE_QUEUE_SETS
 == 1 )

3015 
QueueS‘Memb”HªdË_t
 
	$xQueueS–eùFromS‘
Ğ
QueueS‘HªdË_t
 
xQueueS‘
,

3016 
TickTy³_t
 cÚ¡ 
xTicksToWa™
 )

3018 
QueueS‘Memb”HªdË_t
 
xR‘uº
 = 
NULL
;

3020 Ğè
	`xQueueReûive
ĞĞ
QueueHªdË_t
 ) 
xQueueS‘
, &
xR‘uº
, 
xTicksToWa™
 );

3021  
xR‘uº
;

3022 
	}
}

3027 #iàĞ
cÚfigUSE_QUEUE_SETS
 == 1 )

3029 
QueueS‘Memb”HªdË_t
 
	$xQueueS–eùFromS‘FromISR
Ğ
QueueS‘HªdË_t
 
xQueueS‘
 )

3031 
QueueS‘Memb”HªdË_t
 
xR‘uº
 = 
NULL
;

3033 Ğè
	`xQueueReûiveFromISR
ĞĞ
QueueHªdË_t
 ) 
xQueueS‘
, &
xR‘uº
, 
NULL
 );

3034  
xR‘uº
;

3035 
	}
}

3040 #iàĞ
cÚfigUSE_QUEUE_SETS
 == 1 )

3042 
Ba£Ty³_t
 
	$´vNÙifyQueueS‘CÚš”
ĞcÚ¡ 
Queue_t
 * cÚ¡ 
pxQueue
 )

3044 
Queue_t
 * 
pxQueueS‘CÚš”
 = 
pxQueue
->pxQueueSetContainer;

3045 
Ba£Ty³_t
 
xR‘uº
 = 
pdFALSE
;

3052 
	`cÚfigASSERT
Ğ
pxQueueS‘CÚš”
 );

3053 
	`cÚfigASSERT
Ğ
pxQueueS‘CÚš”
->
uxMes§gesWa™šg
 <…xQueueS‘CÚš”->
uxL’gth
 );

3055 ifĞ
pxQueueS‘CÚš”
->
uxMes§gesWa™šg
 <…xQueueS‘CÚš”->
uxL’gth
 )

3057 cÚ¡ 
št8_t
 
cTxLock
 = 
pxQueueS‘CÚš”
->cTxLock;

3059 
	`ŒaûQUEUE_SET_SEND
Ğ
pxQueueS‘CÚš”
 );

3062 
xR‘uº
 = 
	`´vCİyD©aToQueue
Ğ
pxQueueS‘CÚš”
, &
pxQueue
, 
queueSEND_TO_BACK
 );

3064 ifĞ
cTxLock
 =ğ
queueUNLOCKED
 )

3066 ifĞ
	`li¡LIST_IS_EMPTY
Ğ&Ğ
pxQueueS‘CÚš”
->
xTasksWa™šgToReûive
 ) ) =ğ
pdFALSE
 )

3068 ifĞ
	`xTaskRemoveFromEv’tLi¡
Ğ&Ğ
pxQueueS‘CÚš”
->
xTasksWa™šgToReûive
 ) ) !ğ
pdFALSE
 )

3071 
xR‘uº
 = 
pdTRUE
;

3075 
	`mtCOVERAGE_TEST_MARKER
();

3080 
	`mtCOVERAGE_TEST_MARKER
();

3085 
	`´vInüem’tQueueTxLock
Ğ
pxQueueS‘CÚš”
, 
cTxLock
 );

3090 
	`mtCOVERAGE_TEST_MARKER
();

3093  
xR‘uº
;

3094 
	}
}

	@stream_buffer.c

30 
	~<¡dšt.h
>

31 
	~<¡ršg.h
>

36 
	#MPU_WRAPPERS_INCLUDED_FROM_API_FILE


	)

39 
	~"F»eRTOS.h
"

40 
	~"sk.h
"

41 
	~"¡»am_bufãr.h
"

43 #iàĞ
cÚfigUSE_TASK_NOTIFICATIONS
 != 1 )

44 #”rÜ 
cÚfigUSE_TASK_NOTIFICATIONS
 
mu¡
 
be
 
£t
 
to
 1Ø
bud
 
¡»am_bufãr
.
c


51 #undeà
MPU_WRAPPERS_INCLUDED_FROM_API_FILE


57 #iâdeà
sbRECEIVE_COMPLETED


58 
	#sbRECEIVE_COMPLETED
Ğ
pxSŒ—mBufãr
 ) \

59 
	`vTaskSu¥’dAÎ
(); \

61 ifĞĞ
pxSŒ—mBufãr
 )->
xTaskWa™šgToS’d
 !ğ
NULL
 ) \

63 Ğè
	`xTaskNÙify
ĞĞ
pxSŒ—mBufãr
 )->
xTaskWa™šgToS’d
, \

64 Ğ
ušt32_t
 ) 0, \

65 
eNoAùiÚ
 ); \

66 Ğ
pxSŒ—mBufãr
 )->
xTaskWa™šgToS’d
 = 
NULL
; \

69 Ğè
	`xTaskResumeAÎ
();

	)

72 #iâdeà
sbRECEIVE_COMPLETED_FROM_ISR


73 
	#sbRECEIVE_COMPLETED_FROM_ISR
Ğ
pxSŒ—mBufãr
, \

74 
pxHigh”PriÜ™yTaskWok’
 ) \

76 
UBa£Ty³_t
 
uxSavedIÁ”ru±Stus
; \

78 
uxSavedIÁ”ru±Stus
 = ( 
UBa£Ty³_t
 ) 
	`pÜtSET_INTERRUPT_MASK_FROM_ISR
(); \

80 ifĞĞ
pxSŒ—mBufãr
 )->
xTaskWa™šgToS’d
 !ğ
NULL
 ) \

82 Ğè
	`xTaskNÙifyFromISR
ĞĞ
pxSŒ—mBufãr
 )->
xTaskWa™šgToS’d
, \

83 Ğ
ušt32_t
 ) 0, \

84 
eNoAùiÚ
, \

85 
pxHigh”PriÜ™yTaskWok’
 ); \

86 Ğ
pxSŒ—mBufãr
 )->
xTaskWa™šgToS’d
 = 
NULL
; \

89 
	`pÜtCLEAR_INTERRUPT_MASK_FROM_ISR
Ğ
uxSavedIÁ”ru±Stus
 ); \

90 }

	)

96 #iâdeà
sbSEND_COMPLETED


97 
	#sbSEND_COMPLETED
Ğ
pxSŒ—mBufãr
 ) \

98 
	`vTaskSu¥’dAÎ
(); \

100 ifĞĞ
pxSŒ—mBufãr
 )->
xTaskWa™šgToReûive
 !ğ
NULL
 ) \

102 Ğè
	`xTaskNÙify
ĞĞ
pxSŒ—mBufãr
 )->
xTaskWa™šgToReûive
, \

103 Ğ
ušt32_t
 ) 0, \

104 
eNoAùiÚ
 ); \

105 Ğ
pxSŒ—mBufãr
 )->
xTaskWa™šgToReûive
 = 
NULL
; \

108 Ğè
	`xTaskResumeAÎ
();

	)

111 #iâdeà
sbSEND_COMPLETE_FROM_ISR


112 
	#sbSEND_COMPLETE_FROM_ISR
Ğ
pxSŒ—mBufãr
, 
pxHigh”PriÜ™yTaskWok’
 ) \

114 
UBa£Ty³_t
 
uxSavedIÁ”ru±Stus
; \

116 
uxSavedIÁ”ru±Stus
 = ( 
UBa£Ty³_t
 ) 
	`pÜtSET_INTERRUPT_MASK_FROM_ISR
(); \

118 ifĞĞ
pxSŒ—mBufãr
 )->
xTaskWa™šgToReûive
 !ğ
NULL
 ) \

120 Ğè
	`xTaskNÙifyFromISR
ĞĞ
pxSŒ—mBufãr
 )->
xTaskWa™šgToReûive
, \

121 Ğ
ušt32_t
 ) 0, \

122 
eNoAùiÚ
, \

123 
pxHigh”PriÜ™yTaskWok’
 ); \

124 Ğ
pxSŒ—mBufãr
 )->
xTaskWa™šgToReûive
 = 
NULL
; \

127 
	`pÜtCLEAR_INTERRUPT_MASK_FROM_ISR
Ğ
uxSavedIÁ”ru±Stus
 ); \

128 }

	)

133 
	#sbBYTES_TO_STORE_MESSAGE_LENGTH
 ( Ğ
cÚfigMESSAGE_BUFFER_LENGTH_TYPE
 ) )

	)

136 
	#sbFLAGS_IS_MESSAGE_BUFFER
 ( ( 
ušt8_t
 ) 1 )

	)

137 
	#sbFLAGS_IS_STATICALLY_ALLOCATED
 ( ( 
ušt8_t
 ) 2 )

	)

142 
	sSŒ—mBufãrDef_t


144 vŞ©
size_t
 
	mxTa
;

145 vŞ©
size_t
 
	mxH—d
;

146 
size_t
 
	mxL’gth
;

147 
size_t
 
	mxTrigg”Lev–By‹s
;

148 vŞ©
TaskHªdË_t
 
	mxTaskWa™šgToReûive
;

149 vŞ©
TaskHªdË_t
 
	mxTaskWa™šgToS’d
;

150 
ušt8_t
 * 
	mpucBufãr
;

151 
ušt8_t
 
	mucFÏgs
;

153 #iàĞ
cÚfigUSE_TRACE_FACILITY
 == 1 )

154 
UBa£Ty³_t
 
	muxSŒ—mBufãrNumb”
;

156 } 
	tSŒ—mBufãr_t
;

161 
size_t
 
	$´vBy‹sInBufãr
ĞcÚ¡ 
SŒ—mBufãr_t
 * cÚ¡ 
pxSŒ—mBufãr
 ) 
PRIVILEGED_FUNCTION
;

174 
size_t
 
	$´vWr™eBy‹sToBufãr
Ğ
SŒ—mBufãr_t
 * cÚ¡ 
pxSŒ—mBufãr
,

175 cÚ¡ 
ušt8_t
 * 
pucD©a
,

176 
size_t
 
xCouÁ
,

177 
size_t
 
xH—d
 ) 
PRIVILEGED_FUNCTION
;

186 
size_t
 
	$´vR—dMes§geFromBufãr
Ğ
SŒ—mBufãr_t
 * 
pxSŒ—mBufãr
,

187 * 
pvRxD©a
,

188 
size_t
 
xBufãrL’gthBy‹s
,

189 
size_t
 
xBy‹sAvaabË
 ) 
PRIVILEGED_FUNCTION
;

198 
size_t
 
	$´vWr™eMes§geToBufãr
Ğ
SŒ—mBufãr_t
 * cÚ¡ 
pxSŒ—mBufãr
,

199 cÚ¡ * 
pvTxD©a
,

200 
size_t
 
xD©aL’gthBy‹s
,

201 
size_t
 
xS·û
,

202 
size_t
 
xRequœedS·û
 ) 
PRIVILEGED_FUNCTION
;

216 
size_t
 
	$´vR—dBy‹sFromBufãr
Ğ
SŒ—mBufãr_t
 * 
pxSŒ—mBufãr
,

217 
ušt8_t
 * 
pucD©a
,

218 
size_t
 
xCouÁ
,

219 
size_t
 
xTa
 ) 
PRIVILEGED_FUNCTION
;

225 
	$´vIn™Ÿli£NewSŒ—mBufãr
Ğ
SŒ—mBufãr_t
 * cÚ¡ 
pxSŒ—mBufãr
,

226 
ušt8_t
 * cÚ¡ 
pucBufãr
,

227 
size_t
 
xBufãrSizeBy‹s
,

228 
size_t
 
xTrigg”Lev–By‹s
,

229 
ušt8_t
 
ucFÏgs
 ) 
PRIVILEGED_FUNCTION
;

233 #iàĞ
cÚfigSUPPORT_DYNAMIC_ALLOCATION
 == 1 )

235 
SŒ—mBufãrHªdË_t
 
	$xSŒ—mBufãrG’”icC»©e
Ğ
size_t
 
xBufãrSizeBy‹s
,

236 
size_t
 
xTrigg”Lev–By‹s
,

237 
Ba£Ty³_t
 
xIsMes§geBufãr
 )

239 
ušt8_t
 * 
pucAÎoÿ‹dMemÜy
;

240 
ušt8_t
 
ucFÏgs
;

246 ifĞ
xIsMes§geBufãr
 =ğ
pdTRUE
 )

249 
ucFÏgs
 = 
sbFLAGS_IS_MESSAGE_BUFFER
;

250 
	`cÚfigASSERT
Ğ
xBufãrSizeBy‹s
 > 
sbBYTES_TO_STORE_MESSAGE_LENGTH
 );

255 
ucFÏgs
 = 0;

256 
	`cÚfigASSERT
Ğ
xBufãrSizeBy‹s
 > 0 );

259 
	`cÚfigASSERT
Ğ
xTrigg”Lev–By‹s
 <ğ
xBufãrSizeBy‹s
 );

263 ifĞ
xTrigg”Lev–By‹s
 =ğĞ
size_t
 ) 0 )

265 
xTrigg”Lev–By‹s
 = ( 
size_t
 ) 1;

276 ifĞ
xBufãrSizeBy‹s
 < ( xBufãrSizeBy‹ + 1 + Ğ
SŒ—mBufãr_t
 ) ) )

278 
xBufãrSizeBy‹s
++;

279 
pucAÎoÿ‹dMemÜy
 = ( 
ušt8_t
 * ) 
	`pvPÜtM®loc
Ğ
xBufãrSizeBy‹s
 + Ğ
SŒ—mBufãr_t
 ) );

283 
pucAÎoÿ‹dMemÜy
 = 
NULL
;

286 ifĞ
pucAÎoÿ‹dMemÜy
 !ğ
NULL
 )

288 
	`´vIn™Ÿli£NewSŒ—mBufãr
ĞĞ
SŒ—mBufãr_t
 * ) 
pucAÎoÿ‹dMemÜy
,

289 
pucAÎoÿ‹dMemÜy
 + Ğ
SŒ—mBufãr_t
 ),

290 
xBufãrSizeBy‹s
,

291 
xTrigg”Lev–By‹s
,

292 
ucFÏgs
 );

294 
	`ŒaûSTREAM_BUFFER_CREATE
ĞĞĞ
SŒ—mBufãr_t
 * ) 
pucAÎoÿ‹dMemÜy
 ), 
xIsMes§geBufãr
 );

298 
	`ŒaûSTREAM_BUFFER_CREATE_FAILED
Ğ
xIsMes§geBufãr
 );

301  ( 
SŒ—mBufãrHªdË_t
 ) 
pucAÎoÿ‹dMemÜy
;

302 
	}
}

307 #iàĞ
cÚfigSUPPORT_STATIC_ALLOCATION
 == 1 )

309 
SŒ—mBufãrHªdË_t
 
	$xSŒ—mBufãrG’”icC»©eStic
Ğ
size_t
 
xBufãrSizeBy‹s
,

310 
size_t
 
xTrigg”Lev–By‹s
,

311 
Ba£Ty³_t
 
xIsMes§geBufãr
,

312 
ušt8_t
 * cÚ¡ 
pucSŒ—mBufãrStÜageA»a
,

313 
SticSŒ—mBufãr_t
 * cÚ¡ 
pxSticSŒ—mBufãr
 )

315 
SŒ—mBufãr_t
 * cÚ¡ 
pxSŒ—mBufãr
 = ( SŒ—mBufãr_ˆ* ) 
pxSticSŒ—mBufãr
;

316 
SŒ—mBufãrHªdË_t
 
xR‘uº
;

317 
ušt8_t
 
ucFÏgs
;

319 
	`cÚfigASSERT
Ğ
pucSŒ—mBufãrStÜageA»a
 );

320 
	`cÚfigASSERT
Ğ
pxSticSŒ—mBufãr
 );

321 
	`cÚfigASSERT
Ğ
xTrigg”Lev–By‹s
 <ğ
xBufãrSizeBy‹s
 );

325 ifĞ
xTrigg”Lev–By‹s
 =ğĞ
size_t
 ) 0 )

327 
xTrigg”Lev–By‹s
 = ( 
size_t
 ) 1;

330 ifĞ
xIsMes§geBufãr
 !ğ
pdFALSE
 )

333 
ucFÏgs
 = 
sbFLAGS_IS_MESSAGE_BUFFER
 | 
sbFLAGS_IS_STATICALLY_ALLOCATED
;

338 
ucFÏgs
 = 
sbFLAGS_IS_STATICALLY_ALLOCATED
;

345 
	`cÚfigASSERT
Ğ
xBufãrSizeBy‹s
 > 
sbBYTES_TO_STORE_MESSAGE_LENGTH
 );

347 #iàĞ
cÚfigASSERT_DEFINED
 == 1 )

352 vŞ©
size_t
 
xSize
 = Ğ
SticSŒ—mBufãr_t
 );

353 
	`cÚfigASSERT
Ğ
xSize
 =ğĞ
SŒ—mBufãr_t
 ) );

357 ifĞĞ
pucSŒ—mBufãrStÜageA»a
 !ğ
NULL
 ) && ( 
pxSticSŒ—mBufãr
 != NULL ) )

359 
	`´vIn™Ÿli£NewSŒ—mBufãr
Ğ
pxSŒ—mBufãr
,

360 
pucSŒ—mBufãrStÜageA»a
,

361 
xBufãrSizeBy‹s
,

362 
xTrigg”Lev–By‹s
,

363 
ucFÏgs
 );

367 
pxSŒ—mBufãr
->
ucFÏgs
 |ğ
sbFLAGS_IS_STATICALLY_ALLOCATED
;

369 
	`ŒaûSTREAM_BUFFER_CREATE
Ğ
pxSŒ—mBufãr
, 
xIsMes§geBufãr
 );

371 
xR‘uº
 = ( 
SŒ—mBufãrHªdË_t
 ) 
pxSticSŒ—mBufãr
;

375 
xR‘uº
 = 
NULL
;

376 
	`ŒaûSTREAM_BUFFER_CREATE_STATIC_FAILED
Ğ
xR‘uº
, 
xIsMes§geBufãr
 );

379  
xR‘uº
;

380 
	}
}

385 
	$vSŒ—mBufãrD–‘e
Ğ
SŒ—mBufãrHªdË_t
 
xSŒ—mBufãr
 )

387 
SŒ—mBufãr_t
 * 
pxSŒ—mBufãr
 = 
xSŒ—mBufãr
;

389 
	`cÚfigASSERT
Ğ
pxSŒ—mBufãr
 );

391 
	`ŒaûSTREAM_BUFFER_DELETE
Ğ
xSŒ—mBufãr
 );

393 ifĞĞ
pxSŒ—mBufãr
->
ucFÏgs
 & 
sbFLAGS_IS_STATICALLY_ALLOCATED
 ) =ğĞ
ušt8_t
 ) 
pdFALSE
 )

395 #iàĞ
cÚfigSUPPORT_DYNAMIC_ALLOCATION
 == 1 )

399 
	`vPÜtF»e
ĞĞ* ) 
pxSŒ—mBufãr
 );

405 
	`cÚfigASSERT
Ğ
xSŒ—mBufãr
 =ğĞ
SŒ—mBufãrHªdË_t
 ) ~0 );

413 Ğè
	`mem£t
Ğ
pxSŒ—mBufãr
, 0x00, Ğ
SŒ—mBufãr_t
 ) );

415 
	}
}

418 
Ba£Ty³_t
 
	$xSŒ—mBufãrRe£t
Ğ
SŒ—mBufãrHªdË_t
 
xSŒ—mBufãr
 )

420 
SŒ—mBufãr_t
 * cÚ¡ 
pxSŒ—mBufãr
 = 
xSŒ—mBufãr
;

421 
Ba£Ty³_t
 
xR‘uº
 = 
pdFAIL
;

423 #iàĞ
cÚfigUSE_TRACE_FACILITY
 == 1 )

424 
UBa£Ty³_t
 
uxSŒ—mBufãrNumb”
;

427 
	`cÚfigASSERT
Ğ
pxSŒ—mBufãr
 );

429 #iàĞ
cÚfigUSE_TRACE_FACILITY
 == 1 )

433 
uxSŒ—mBufãrNumb”
 = 
pxSŒ—mBufãr
->uxStreamBufferNumber;

438 
	`skENTER_CRITICAL
();

440 ifĞ
pxSŒ—mBufãr
->
xTaskWa™šgToReûive
 =ğ
NULL
 )

442 ifĞ
pxSŒ—mBufãr
->
xTaskWa™šgToS’d
 =ğ
NULL
 )

444 
	`´vIn™Ÿli£NewSŒ—mBufãr
Ğ
pxSŒ—mBufãr
,

445 
pxSŒ—mBufãr
->
pucBufãr
,

446 
pxSŒ—mBufãr
->
xL’gth
,

447 
pxSŒ—mBufãr
->
xTrigg”Lev–By‹s
,

448 
pxSŒ—mBufãr
->
ucFÏgs
 );

449 
xR‘uº
 = 
pdPASS
;

451 #iàĞ
cÚfigUSE_TRACE_FACILITY
 == 1 )

453 
pxSŒ—mBufãr
->
uxSŒ—mBufãrNumb”
 = uxStreamBufferNumber;

457 
	`ŒaûSTREAM_BUFFER_RESET
Ğ
xSŒ—mBufãr
 );

461 
	`skEXIT_CRITICAL
();

463  
xR‘uº
;

464 
	}
}

467 
Ba£Ty³_t
 
	$xSŒ—mBufãrS‘Trigg”Lev–
Ğ
SŒ—mBufãrHªdË_t
 
xSŒ—mBufãr
,

468 
size_t
 
xTrigg”Lev–
 )

470 
SŒ—mBufãr_t
 * cÚ¡ 
pxSŒ—mBufãr
 = 
xSŒ—mBufãr
;

471 
Ba£Ty³_t
 
xR‘uº
;

473 
	`cÚfigASSERT
Ğ
pxSŒ—mBufãr
 );

476 ifĞ
xTrigg”Lev–
 =ğĞ
size_t
 ) 0 )

478 
xTrigg”Lev–
 = ( 
size_t
 ) 1;

483 ifĞ
xTrigg”Lev–
 < 
pxSŒ—mBufãr
->
xL’gth
 )

485 
pxSŒ—mBufãr
->
xTrigg”Lev–By‹s
 = 
xTrigg”Lev–
;

486 
xR‘uº
 = 
pdPASS
;

490 
xR‘uº
 = 
pdFALSE
;

493  
xR‘uº
;

494 
	}
}

497 
size_t
 
	$xSŒ—mBufãrS·ûsAvaabË
Ğ
SŒ—mBufãrHªdË_t
 
xSŒ—mBufãr
 )

499 cÚ¡ 
SŒ—mBufãr_t
 * cÚ¡ 
pxSŒ—mBufãr
 = 
xSŒ—mBufãr
;

500 
size_t
 
xS·û
;

501 
size_t
 
xOrigš®Ta
;

503 
	`cÚfigASSERT
Ğ
pxSŒ—mBufãr
 );

510 
xOrigš®Ta
 = 
pxSŒ—mBufãr
->
xTa
;

511 
xS·û
 = 
pxSŒ—mBufãr
->
xL’gth
 +…xSŒ—mBufãr->
xTa
;

512 
xS·û
 -ğ
pxSŒ—mBufãr
->
xH—d
;

513 }  
xOrigš®Ta
 !ğ
pxSŒ—mBufãr
->
xTa
 );

515 
xS·û
 -ğĞ
size_t
 ) 1;

517 ifĞ
xS·û
 >ğ
pxSŒ—mBufãr
->
xL’gth
 )

519 
xS·û
 -ğ
pxSŒ—mBufãr
->
xL’gth
;

523 
	`mtCOVERAGE_TEST_MARKER
();

526  
xS·û
;

527 
	}
}

530 
size_t
 
	$xSŒ—mBufãrBy‹sAvaabË
Ğ
SŒ—mBufãrHªdË_t
 
xSŒ—mBufãr
 )

532 cÚ¡ 
SŒ—mBufãr_t
 * cÚ¡ 
pxSŒ—mBufãr
 = 
xSŒ—mBufãr
;

533 
size_t
 
xR‘uº
;

535 
	`cÚfigASSERT
Ğ
pxSŒ—mBufãr
 );

537 
xR‘uº
 = 
	`´vBy‹sInBufãr
Ğ
pxSŒ—mBufãr
 );

538  
xR‘uº
;

539 
	}
}

542 
size_t
 
	$xSŒ—mBufãrS’d
Ğ
SŒ—mBufãrHªdË_t
 
xSŒ—mBufãr
,

543 cÚ¡ * 
pvTxD©a
,

544 
size_t
 
xD©aL’gthBy‹s
,

545 
TickTy³_t
 
xTicksToWa™
 )

547 
SŒ—mBufãr_t
 * cÚ¡ 
pxSŒ—mBufãr
 = 
xSŒ—mBufãr
;

548 
size_t
 
xR‘uº
, 
xS·û
 = 0;

549 
size_t
 
xRequœedS·û
 = 
xD©aL’gthBy‹s
;

550 
TimeOut_t
 
xTimeOut
;

551 
size_t
 
xMaxR•Ü‹dS·û
 = 0;

553 
	`cÚfigASSERT
Ğ
pvTxD©a
 );

554 
	`cÚfigASSERT
Ğ
pxSŒ—mBufãr
 );

558 
xMaxR•Ü‹dS·û
 = 
pxSŒ—mBufãr
->
xL’gth
 - ( 
size_t
 ) 1;

564 ifĞĞ
pxSŒ—mBufãr
->
ucFÏgs
 & 
sbFLAGS_IS_MESSAGE_BUFFER
 ) !ğĞ
ušt8_t
 ) 0 )

566 
xRequœedS·û
 +ğ
sbBYTES_TO_STORE_MESSAGE_LENGTH
;

569 
	`cÚfigASSERT
Ğ
xRequœedS·û
 > 
xD©aL’gthBy‹s
 );

573 ifĞ
xRequœedS·û
 > 
xMaxR•Ü‹dS·û
 )

577 
xTicksToWa™
 = ( 
TickTy³_t
 ) 0;

581 
	`mtCOVERAGE_TEST_MARKER
();

589 ifĞ
xRequœedS·û
 > 
xMaxR•Ü‹dS·û
 )

591 
xRequœedS·û
 = 
xMaxR•Ü‹dS·û
;

595 
	`mtCOVERAGE_TEST_MARKER
();

599 ifĞ
xTicksToWa™
 !ğĞ
TickTy³_t
 ) 0 )

601 
	`vTaskS‘TimeOutS‹
Ğ&
xTimeOut
 );

607 
	`skENTER_CRITICAL
();

609 
xS·û
 = 
	`xSŒ—mBufãrS·ûsAvaabË
Ğ
pxSŒ—mBufãr
 );

611 ifĞ
xS·û
 < 
xRequœedS·û
 )

614 Ğè
	`xTaskNÙifyS‹CË¬
Ğ
NULL
 );

617 
	`cÚfigASSERT
Ğ
pxSŒ—mBufãr
->
xTaskWa™šgToS’d
 =ğ
NULL
 );

618 
pxSŒ—mBufãr
->
xTaskWa™šgToS’d
 = 
	`xTaskG‘Cu¼’tTaskHªdË
();

622 
	`skEXIT_CRITICAL
();

626 
	`skEXIT_CRITICAL
();

628 
	`ŒaûBLOCKING_ON_STREAM_BUFFER_SEND
Ğ
xSŒ—mBufãr
 );

629 Ğè
	`xTaskNÙifyWa™
ĞĞ
ušt32_t
 ) 0, ( ušt32_ˆè0, 
NULL
, 
xTicksToWa™
 );

630 
pxSŒ—mBufãr
->
xTaskWa™šgToS’d
 = 
NULL
;

631 }  
	`xTaskCheckFÜTimeOut
Ğ&
xTimeOut
, &
xTicksToWa™
 ) =ğ
pdFALSE
 );

635 
	`mtCOVERAGE_TEST_MARKER
();

638 ifĞ
xS·û
 =ğĞ
size_t
 ) 0 )

640 
xS·û
 = 
	`xSŒ—mBufãrS·ûsAvaabË
Ğ
pxSŒ—mBufãr
 );

644 
	`mtCOVERAGE_TEST_MARKER
();

647 
xR‘uº
 = 
	`´vWr™eMes§geToBufãr
Ğ
pxSŒ—mBufãr
, 
pvTxD©a
, 
xD©aL’gthBy‹s
, 
xS·û
, 
xRequœedS·û
 );

649 ifĞ
xR‘uº
 > ( 
size_t
 ) 0 )

651 
	`ŒaûSTREAM_BUFFER_SEND
Ğ
xSŒ—mBufãr
, 
xR‘uº
 );

654 ifĞ
	`´vBy‹sInBufãr
Ğ
pxSŒ—mBufãr
 ) >ğpxSŒ—mBufãr->
xTrigg”Lev–By‹s
 )

656 
	`sbSEND_COMPLETED
Ğ
pxSŒ—mBufãr
 );

660 
	`mtCOVERAGE_TEST_MARKER
();

665 
	`mtCOVERAGE_TEST_MARKER
();

666 
	`ŒaûSTREAM_BUFFER_SEND_FAILED
Ğ
xSŒ—mBufãr
 );

669  
xR‘uº
;

670 
	}
}

673 
size_t
 
	$xSŒ—mBufãrS’dFromISR
Ğ
SŒ—mBufãrHªdË_t
 
xSŒ—mBufãr
,

674 cÚ¡ * 
pvTxD©a
,

675 
size_t
 
xD©aL’gthBy‹s
,

676 
Ba£Ty³_t
 * cÚ¡ 
pxHigh”PriÜ™yTaskWok’
 )

678 
SŒ—mBufãr_t
 * cÚ¡ 
pxSŒ—mBufãr
 = 
xSŒ—mBufãr
;

679 
size_t
 
xR‘uº
, 
xS·û
;

680 
size_t
 
xRequœedS·û
 = 
xD©aL’gthBy‹s
;

682 
	`cÚfigASSERT
Ğ
pvTxD©a
 );

683 
	`cÚfigASSERT
Ğ
pxSŒ—mBufãr
 );

689 ifĞĞ
pxSŒ—mBufãr
->
ucFÏgs
 & 
sbFLAGS_IS_MESSAGE_BUFFER
 ) !ğĞ
ušt8_t
 ) 0 )

691 
xRequœedS·û
 +ğ
sbBYTES_TO_STORE_MESSAGE_LENGTH
;

695 
	`mtCOVERAGE_TEST_MARKER
();

698 
xS·û
 = 
	`xSŒ—mBufãrS·ûsAvaabË
Ğ
pxSŒ—mBufãr
 );

699 
xR‘uº
 = 
	`´vWr™eMes§geToBufãr
Ğ
pxSŒ—mBufãr
, 
pvTxD©a
, 
xD©aL’gthBy‹s
, 
xS·û
, 
xRequœedS·û
 );

701 ifĞ
xR‘uº
 > ( 
size_t
 ) 0 )

704 ifĞ
	`´vBy‹sInBufãr
Ğ
pxSŒ—mBufãr
 ) >ğpxSŒ—mBufãr->
xTrigg”Lev–By‹s
 )

706 
	`sbSEND_COMPLETE_FROM_ISR
Ğ
pxSŒ—mBufãr
, 
pxHigh”PriÜ™yTaskWok’
 );

710 
	`mtCOVERAGE_TEST_MARKER
();

715 
	`mtCOVERAGE_TEST_MARKER
();

718 
	`ŒaûSTREAM_BUFFER_SEND_FROM_ISR
Ğ
xSŒ—mBufãr
, 
xR‘uº
 );

720  
xR‘uº
;

721 
	}
}

724 
size_t
 
	$´vWr™eMes§geToBufãr
Ğ
SŒ—mBufãr_t
 * cÚ¡ 
pxSŒ—mBufãr
,

725 cÚ¡ * 
pvTxD©a
,

726 
size_t
 
xD©aL’gthBy‹s
,

727 
size_t
 
xS·û
,

728 
size_t
 
xRequœedS·û
 )

730 
size_t
 
xNextH—d
 = 
pxSŒ—mBufãr
->
xH—d
;

731 
cÚfigMESSAGE_BUFFER_LENGTH_TYPE
 
xMes§geL’gth
;

733 ifĞĞ
pxSŒ—mBufãr
->
ucFÏgs
 & 
sbFLAGS_IS_MESSAGE_BUFFER
 ) !ğĞ
ušt8_t
 ) 0 )

738 
xMes§geL’gth
 = ( 
cÚfigMESSAGE_BUFFER_LENGTH_TYPE
 ) 
xD©aL’gthBy‹s
;

741 
	`cÚfigASSERT
ĞĞ
size_t
 ) 
xMes§geL’gth
 =ğ
xD©aL’gthBy‹s
 );

743 ifĞ
xS·û
 >ğ
xRequœedS·û
 )

748 
xNextH—d
 = 
	`´vWr™eBy‹sToBufãr
Ğ
pxSŒ—mBufãr
, ( cÚ¡ 
ušt8_t
 * ) &Ğ
xMes§geL’gth
 ), 
sbBYTES_TO_STORE_MESSAGE_LENGTH
, xNextHead );

753 
xD©aL’gthBy‹s
 = 0;

761 
xD©aL’gthBy‹s
 = 
	`cÚfigMIN
ĞxD©aL’gthBy‹s, 
xS·û
 );

764 ifĞ
xD©aL’gthBy‹s
 !ğĞ
size_t
 ) 0 )

767 
pxSŒ—mBufãr
->
xH—d
 = 
	`´vWr™eBy‹sToBufãr
ĞpxSŒ—mBufãr, ( cÚ¡ 
ušt8_t
 * ) 
pvTxD©a
, 
xD©aL’gthBy‹s
, 
xNextH—d
 );

770  
xD©aL’gthBy‹s
;

771 
	}
}

774 
size_t
 
	$xSŒ—mBufãrReûive
Ğ
SŒ—mBufãrHªdË_t
 
xSŒ—mBufãr
,

775 * 
pvRxD©a
,

776 
size_t
 
xBufãrL’gthBy‹s
,

777 
TickTy³_t
 
xTicksToWa™
 )

779 
SŒ—mBufãr_t
 * cÚ¡ 
pxSŒ—mBufãr
 = 
xSŒ—mBufãr
;

780 
size_t
 
xReûivedL’gth
 = 0, 
xBy‹sAvaabË
, 
xBy‹sToStÜeMes§geL’gth
;

782 
	`cÚfigASSERT
Ğ
pvRxD©a
 );

783 
	`cÚfigASSERT
Ğ
pxSŒ—mBufãr
 );

790 ifĞĞ
pxSŒ—mBufãr
->
ucFÏgs
 & 
sbFLAGS_IS_MESSAGE_BUFFER
 ) !ğĞ
ušt8_t
 ) 0 )

792 
xBy‹sToStÜeMes§geL’gth
 = 
sbBYTES_TO_STORE_MESSAGE_LENGTH
;

796 
xBy‹sToStÜeMes§geL’gth
 = 0;

799 ifĞ
xTicksToWa™
 !ğĞ
TickTy³_t
 ) 0 )

803 
	`skENTER_CRITICAL
();

805 
xBy‹sAvaabË
 = 
	`´vBy‹sInBufãr
Ğ
pxSŒ—mBufãr
 );

812 ifĞ
xBy‹sAvaabË
 <ğ
xBy‹sToStÜeMes§geL’gth
 )

815 Ğè
	`xTaskNÙifyS‹CË¬
Ğ
NULL
 );

818 
	`cÚfigASSERT
Ğ
pxSŒ—mBufãr
->
xTaskWa™šgToReûive
 =ğ
NULL
 );

819 
pxSŒ—mBufãr
->
xTaskWa™šgToReûive
 = 
	`xTaskG‘Cu¼’tTaskHªdË
();

823 
	`mtCOVERAGE_TEST_MARKER
();

826 
	`skEXIT_CRITICAL
();

828 ifĞ
xBy‹sAvaabË
 <ğ
xBy‹sToStÜeMes§geL’gth
 )

831 
	`ŒaûBLOCKING_ON_STREAM_BUFFER_RECEIVE
Ğ
xSŒ—mBufãr
 );

832 Ğè
	`xTaskNÙifyWa™
ĞĞ
ušt32_t
 ) 0, ( ušt32_ˆè0, 
NULL
, 
xTicksToWa™
 );

833 
pxSŒ—mBufãr
->
xTaskWa™šgToReûive
 = 
NULL
;

836 
xBy‹sAvaabË
 = 
	`´vBy‹sInBufãr
Ğ
pxSŒ—mBufãr
 );

840 
	`mtCOVERAGE_TEST_MARKER
();

845 
xBy‹sAvaabË
 = 
	`´vBy‹sInBufãr
Ğ
pxSŒ—mBufãr
 );

853 ifĞ
xBy‹sAvaabË
 > 
xBy‹sToStÜeMes§geL’gth
 )

855 
xReûivedL’gth
 = 
	`´vR—dMes§geFromBufãr
Ğ
pxSŒ—mBufãr
, 
pvRxD©a
, 
xBufãrL’gthBy‹s
, 
xBy‹sAvaabË
 );

858 ifĞ
xReûivedL’gth
 !ğĞ
size_t
 ) 0 )

860 
	`ŒaûSTREAM_BUFFER_RECEIVE
Ğ
xSŒ—mBufãr
, 
xReûivedL’gth
 );

861 
	`sbRECEIVE_COMPLETED
Ğ
pxSŒ—mBufãr
 );

865 
	`mtCOVERAGE_TEST_MARKER
();

870 
	`ŒaûSTREAM_BUFFER_RECEIVE_FAILED
Ğ
xSŒ—mBufãr
 );

871 
	`mtCOVERAGE_TEST_MARKER
();

874  
xReûivedL’gth
;

875 
	}
}

878 
size_t
 
	$xSŒ—mBufãrNextMes§geL’gthBy‹s
Ğ
SŒ—mBufãrHªdË_t
 
xSŒ—mBufãr
 )

880 
SŒ—mBufãr_t
 * cÚ¡ 
pxSŒ—mBufãr
 = 
xSŒ—mBufãr
;

881 
size_t
 
xR‘uº
, 
xBy‹sAvaabË
;

882 
cÚfigMESSAGE_BUFFER_LENGTH_TYPE
 
xTempR‘uº
;

884 
	`cÚfigASSERT
Ğ
pxSŒ—mBufãr
 );

887 ifĞĞ
pxSŒ—mBufãr
->
ucFÏgs
 & 
sbFLAGS_IS_MESSAGE_BUFFER
 ) !ğĞ
ušt8_t
 ) 0 )

889 
xBy‹sAvaabË
 = 
	`´vBy‹sInBufãr
Ğ
pxSŒ—mBufãr
 );

891 ifĞ
xBy‹sAvaabË
 > 
sbBYTES_TO_STORE_MESSAGE_LENGTH
 )

896 Ğè
	`´vR—dBy‹sFromBufãr
Ğ
pxSŒ—mBufãr
, ( 
ušt8_t
 * ) &
xTempR‘uº
, 
sbBYTES_TO_STORE_MESSAGE_LENGTH
,…xSŒ—mBufãr->
xTa
 );

897 
xR‘uº
 = ( 
size_t
 ) 
xTempR‘uº
;

905 
	`cÚfigASSERT
Ğ
xBy‹sAvaabË
 == 0 );

906 
xR‘uº
 = 0;

911 
xR‘uº
 = 0;

914  
xR‘uº
;

915 
	}
}

918 
size_t
 
	$xSŒ—mBufãrReûiveFromISR
Ğ
SŒ—mBufãrHªdË_t
 
xSŒ—mBufãr
,

919 * 
pvRxD©a
,

920 
size_t
 
xBufãrL’gthBy‹s
,

921 
Ba£Ty³_t
 * cÚ¡ 
pxHigh”PriÜ™yTaskWok’
 )

923 
SŒ—mBufãr_t
 * cÚ¡ 
pxSŒ—mBufãr
 = 
xSŒ—mBufãr
;

924 
size_t
 
xReûivedL’gth
 = 0, 
xBy‹sAvaabË
, 
xBy‹sToStÜeMes§geL’gth
;

926 
	`cÚfigASSERT
Ğ
pvRxD©a
 );

927 
	`cÚfigASSERT
Ğ
pxSŒ—mBufãr
 );

934 ifĞĞ
pxSŒ—mBufãr
->
ucFÏgs
 & 
sbFLAGS_IS_MESSAGE_BUFFER
 ) !ğĞ
ušt8_t
 ) 0 )

936 
xBy‹sToStÜeMes§geL’gth
 = 
sbBYTES_TO_STORE_MESSAGE_LENGTH
;

940 
xBy‹sToStÜeMes§geL’gth
 = 0;

943 
xBy‹sAvaabË
 = 
	`´vBy‹sInBufãr
Ğ
pxSŒ—mBufãr
 );

950 ifĞ
xBy‹sAvaabË
 > 
xBy‹sToStÜeMes§geL’gth
 )

952 
xReûivedL’gth
 = 
	`´vR—dMes§geFromBufãr
Ğ
pxSŒ—mBufãr
, 
pvRxD©a
, 
xBufãrL’gthBy‹s
, 
xBy‹sAvaabË
 );

955 ifĞ
xReûivedL’gth
 !ğĞ
size_t
 ) 0 )

957 
	`sbRECEIVE_COMPLETED_FROM_ISR
Ğ
pxSŒ—mBufãr
, 
pxHigh”PriÜ™yTaskWok’
 );

961 
	`mtCOVERAGE_TEST_MARKER
();

966 
	`mtCOVERAGE_TEST_MARKER
();

969 
	`ŒaûSTREAM_BUFFER_RECEIVE_FROM_ISR
Ğ
xSŒ—mBufãr
, 
xReûivedL’gth
 );

971  
xReûivedL’gth
;

972 
	}
}

975 
size_t
 
	$´vR—dMes§geFromBufãr
Ğ
SŒ—mBufãr_t
 * 
pxSŒ—mBufãr
,

976 * 
pvRxD©a
,

977 
size_t
 
xBufãrL’gthBy‹s
,

978 
size_t
 
xBy‹sAvaabË
 )

980 
size_t
 
xCouÁ
, 
xNextMes§geL’gth
;

981 
cÚfigMESSAGE_BUFFER_LENGTH_TYPE
 
xTempNextMes§geL’gth
;

982 
size_t
 
xNextTa
 = 
pxSŒ—mBufãr
->
xTa
;

984 ifĞĞ
pxSŒ—mBufãr
->
ucFÏgs
 & 
sbFLAGS_IS_MESSAGE_BUFFER
 ) !ğĞ
ušt8_t
 ) 0 )

988 
xNextTa
 = 
	`´vR—dBy‹sFromBufãr
Ğ
pxSŒ—mBufãr
, ( 
ušt8_t
 * ) &
xTempNextMes§geL’gth
, 
sbBYTES_TO_STORE_MESSAGE_LENGTH
, xNextTail );

989 
xNextMes§geL’gth
 = ( 
size_t
 ) 
xTempNextMes§geL’gth
;

993 
xBy‹sAvaabË
 -ğ
sbBYTES_TO_STORE_MESSAGE_LENGTH
;

997 ifĞ
xNextMes§geL’gth
 > 
xBufãrL’gthBy‹s
 )

1000 
xNextMes§geL’gth
 = 0;

1004 
	`mtCOVERAGE_TEST_MARKER
();

1011 
xNextMes§geL’gth
 = 
xBufãrL’gthBy‹s
;

1015 
xCouÁ
 = 
	`cÚfigMIN
Ğ
xNextMes§geL’gth
, 
xBy‹sAvaabË
 );

1017 ifĞ
xCouÁ
 !ğĞ
size_t
 ) 0 )

1020 
pxSŒ—mBufãr
->
xTa
 = 
	`´vR—dBy‹sFromBufãr
ĞpxSŒ—mBufãr, ( 
ušt8_t
 * ) 
pvRxD©a
, 
xCouÁ
, 
xNextTa
 );

1023  
xCouÁ
;

1024 
	}
}

1027 
Ba£Ty³_t
 
	$xSŒ—mBufãrIsEm±y
Ğ
SŒ—mBufãrHªdË_t
 
xSŒ—mBufãr
 )

1029 cÚ¡ 
SŒ—mBufãr_t
 * cÚ¡ 
pxSŒ—mBufãr
 = 
xSŒ—mBufãr
;

1030 
Ba£Ty³_t
 
xR‘uº
;

1031 
size_t
 
xTa
;

1033 
	`cÚfigASSERT
Ğ
pxSŒ—mBufãr
 );

1036 
xTa
 = 
pxSŒ—mBufãr
->xTail;

1038 ifĞ
pxSŒ—mBufãr
->
xH—d
 =ğ
xTa
 )

1040 
xR‘uº
 = 
pdTRUE
;

1044 
xR‘uº
 = 
pdFALSE
;

1047  
xR‘uº
;

1048 
	}
}

1051 
Ba£Ty³_t
 
	$xSŒ—mBufãrIsFuÎ
Ğ
SŒ—mBufãrHªdË_t
 
xSŒ—mBufãr
 )

1053 
Ba£Ty³_t
 
xR‘uº
;

1054 
size_t
 
xBy‹sToStÜeMes§geL’gth
;

1055 cÚ¡ 
SŒ—mBufãr_t
 * cÚ¡ 
pxSŒ—mBufãr
 = 
xSŒ—mBufãr
;

1057 
	`cÚfigASSERT
Ğ
pxSŒ—mBufãr
 );

1063 ifĞĞ
pxSŒ—mBufãr
->
ucFÏgs
 & 
sbFLAGS_IS_MESSAGE_BUFFER
 ) !ğĞ
ušt8_t
 ) 0 )

1065 
xBy‹sToStÜeMes§geL’gth
 = 
sbBYTES_TO_STORE_MESSAGE_LENGTH
;

1069 
xBy‹sToStÜeMes§geL’gth
 = 0;

1073 ifĞ
	`xSŒ—mBufãrS·ûsAvaabË
Ğ
xSŒ—mBufãr
 ) <ğ
xBy‹sToStÜeMes§geL’gth
 )

1075 
xR‘uº
 = 
pdTRUE
;

1079 
xR‘uº
 = 
pdFALSE
;

1082  
xR‘uº
;

1083 
	}
}

1086 
Ba£Ty³_t
 
	$xSŒ—mBufãrS’dCom¶‘edFromISR
Ğ
SŒ—mBufãrHªdË_t
 
xSŒ—mBufãr
,

1087 
Ba£Ty³_t
 * 
pxHigh”PriÜ™yTaskWok’
 )

1089 
SŒ—mBufãr_t
 * cÚ¡ 
pxSŒ—mBufãr
 = 
xSŒ—mBufãr
;

1090 
Ba£Ty³_t
 
xR‘uº
;

1091 
UBa£Ty³_t
 
uxSavedIÁ”ru±Stus
;

1093 
	`cÚfigASSERT
Ğ
pxSŒ—mBufãr
 );

1095 
uxSavedIÁ”ru±Stus
 = ( 
UBa£Ty³_t
 ) 
	`pÜtSET_INTERRUPT_MASK_FROM_ISR
();

1097 ifĞĞ
pxSŒ—mBufãr
 )->
xTaskWa™šgToReûive
 !ğ
NULL
 )

1099 Ğè
	`xTaskNÙifyFromISR
ĞĞ
pxSŒ—mBufãr
 )->
xTaskWa™šgToReûive
,

1100 Ğ
ušt32_t
 ) 0,

1101 
eNoAùiÚ
,

1102 
pxHigh”PriÜ™yTaskWok’
 );

1103 Ğ
pxSŒ—mBufãr
 )->
xTaskWa™šgToReûive
 = 
NULL
;

1104 
xR‘uº
 = 
pdTRUE
;

1108 
xR‘uº
 = 
pdFALSE
;

1111 
	`pÜtCLEAR_INTERRUPT_MASK_FROM_ISR
Ğ
uxSavedIÁ”ru±Stus
 );

1113  
xR‘uº
;

1114 
	}
}

1117 
Ba£Ty³_t
 
	$xSŒ—mBufãrReûiveCom¶‘edFromISR
Ğ
SŒ—mBufãrHªdË_t
 
xSŒ—mBufãr
,

1118 
Ba£Ty³_t
 * 
pxHigh”PriÜ™yTaskWok’
 )

1120 
SŒ—mBufãr_t
 * cÚ¡ 
pxSŒ—mBufãr
 = 
xSŒ—mBufãr
;

1121 
Ba£Ty³_t
 
xR‘uº
;

1122 
UBa£Ty³_t
 
uxSavedIÁ”ru±Stus
;

1124 
	`cÚfigASSERT
Ğ
pxSŒ—mBufãr
 );

1126 
uxSavedIÁ”ru±Stus
 = ( 
UBa£Ty³_t
 ) 
	`pÜtSET_INTERRUPT_MASK_FROM_ISR
();

1128 ifĞĞ
pxSŒ—mBufãr
 )->
xTaskWa™šgToS’d
 !ğ
NULL
 )

1130 Ğè
	`xTaskNÙifyFromISR
ĞĞ
pxSŒ—mBufãr
 )->
xTaskWa™šgToS’d
,

1131 Ğ
ušt32_t
 ) 0,

1132 
eNoAùiÚ
,

1133 
pxHigh”PriÜ™yTaskWok’
 );

1134 Ğ
pxSŒ—mBufãr
 )->
xTaskWa™šgToS’d
 = 
NULL
;

1135 
xR‘uº
 = 
pdTRUE
;

1139 
xR‘uº
 = 
pdFALSE
;

1142 
	`pÜtCLEAR_INTERRUPT_MASK_FROM_ISR
Ğ
uxSavedIÁ”ru±Stus
 );

1144  
xR‘uº
;

1145 
	}
}

1148 
size_t
 
	$´vWr™eBy‹sToBufãr
Ğ
SŒ—mBufãr_t
 * cÚ¡ 
pxSŒ—mBufãr
,

1149 cÚ¡ 
ušt8_t
 * 
pucD©a
,

1150 
size_t
 
xCouÁ
,

1151 
size_t
 
xH—d
 )

1153 
size_t
 
xFœ¡L’gth
;

1155 
	`cÚfigASSERT
Ğ
xCouÁ
 > ( 
size_t
 ) 0 );

1160 
xFœ¡L’gth
 = 
	`cÚfigMIN
Ğ
pxSŒ—mBufãr
->
xL’gth
 - 
xH—d
, 
xCouÁ
 );

1163 
	`cÚfigASSERT
ĞĞ
xH—d
 + 
xFœ¡L’gth
 ) <ğ
pxSŒ—mBufãr
->
xL’gth
 );

1164 Ğè
	`memıy
ĞĞ* ) ( &Ğ
pxSŒ—mBufãr
->
pucBufãr
[ 
xH—d
 ] ) ), ( cÚ¡ * ) 
pucD©a
, 
xFœ¡L’gth
 );

1168 ifĞ
xCouÁ
 > 
xFœ¡L’gth
 )

1171 
	`cÚfigASSERT
ĞĞ
xCouÁ
 - 
xFœ¡L’gth
 ) <ğ
pxSŒ—mBufãr
->
xL’gth
 );

1172 Ğè
	`memıy
ĞĞ* ) 
pxSŒ—mBufãr
->
pucBufãr
, ( cÚ¡ * ) &Ğ
pucD©a
[ 
xFœ¡L’gth
 ] ), 
xCouÁ
 - xFirstLength );

1176 
	`mtCOVERAGE_TEST_MARKER
();

1179 
xH—d
 +ğ
xCouÁ
;

1181 ifĞ
xH—d
 >ğ
pxSŒ—mBufãr
->
xL’gth
 )

1183 
xH—d
 -ğ
pxSŒ—mBufãr
->
xL’gth
;

1187 
	`mtCOVERAGE_TEST_MARKER
();

1190  
xH—d
;

1191 
	}
}

1194 
size_t
 
	$´vR—dBy‹sFromBufãr
Ğ
SŒ—mBufãr_t
 * 
pxSŒ—mBufãr
,

1195 
ušt8_t
 * 
pucD©a
,

1196 
size_t
 
xCouÁ
,

1197 
size_t
 
xTa
 )

1199 
size_t
 
xFœ¡L’gth
;

1201 
	`cÚfigASSERT
Ğ
xCouÁ
 !ğĞ
size_t
 ) 0 );

1206 
xFœ¡L’gth
 = 
	`cÚfigMIN
Ğ
pxSŒ—mBufãr
->
xL’gth
 - 
xTa
, 
xCouÁ
 );

1210 
	`cÚfigASSERT
Ğ
xFœ¡L’gth
 <ğ
xCouÁ
 );

1211 
	`cÚfigASSERT
ĞĞ
xTa
 + 
xFœ¡L’gth
 ) <ğ
pxSŒ—mBufãr
->
xL’gth
 );

1212 Ğè
	`memıy
ĞĞ* ) 
pucD©a
, ( cÚ¡ * ) &Ğ
pxSŒ—mBufãr
->
pucBufãr
[ 
xTa
 ] ), 
xFœ¡L’gth
 );

1216 ifĞ
xCouÁ
 > 
xFœ¡L’gth
 )

1219 Ğè
	`memıy
ĞĞ* ) &Ğ
pucD©a
[ 
xFœ¡L’gth
 ] ), ( * ) ( 
pxSŒ—mBufãr
->
pucBufãr
 ), 
xCouÁ
 - xFirstLength );

1223 
	`mtCOVERAGE_TEST_MARKER
();

1227 
xTa
 +ğ
xCouÁ
;

1229 ifĞ
xTa
 >ğ
pxSŒ—mBufãr
->
xL’gth
 )

1231 
xTa
 -ğ
pxSŒ—mBufãr
->
xL’gth
;

1234  
xTa
;

1235 
	}
}

1238 
size_t
 
	$´vBy‹sInBufãr
ĞcÚ¡ 
SŒ—mBufãr_t
 * cÚ¡ 
pxSŒ—mBufãr
 )

1241 
size_t
 
xCouÁ
;

1243 
xCouÁ
 = 
pxSŒ—mBufãr
->
xL’gth
 +…xSŒ—mBufãr->
xH—d
;

1244 
xCouÁ
 -ğ
pxSŒ—mBufãr
->
xTa
;

1246 ifĞ
xCouÁ
 >ğ
pxSŒ—mBufãr
->
xL’gth
 )

1248 
xCouÁ
 -ğ
pxSŒ—mBufãr
->
xL’gth
;

1252 
	`mtCOVERAGE_TEST_MARKER
();

1255  
xCouÁ
;

1256 
	}
}

1259 
	$´vIn™Ÿli£NewSŒ—mBufãr
Ğ
SŒ—mBufãr_t
 * cÚ¡ 
pxSŒ—mBufãr
,

1260 
ušt8_t
 * cÚ¡ 
pucBufãr
,

1261 
size_t
 
xBufãrSizeBy‹s
,

1262 
size_t
 
xTrigg”Lev–By‹s
,

1263 
ušt8_t
 
ucFÏgs
 )

1268 #iàĞ
cÚfigASSERT_DEFINED
 == 1 )

1273 cÚ¡ 
Ba£Ty³_t
 
xWr™eV®ue
 = 0x55;

1274 
	`cÚfigASSERT
Ğ
	`mem£t
Ğ
pucBufãr
, ( è
xWr™eV®ue
, 
xBufãrSizeBy‹s
 ) ==…ucBuffer );

1278 Ğè
	`mem£t
ĞĞ* ) 
pxSŒ—mBufãr
, 0x00, Ğ
SŒ—mBufãr_t
 ) );

1279 
pxSŒ—mBufãr
->
pucBufãr
 =…ucBuffer;

1280 
pxSŒ—mBufãr
->
xL’gth
 = 
xBufãrSizeBy‹s
;

1281 
pxSŒ—mBufãr
->
xTrigg”Lev–By‹s
 = xTriggerLevelBytes;

1282 
pxSŒ—mBufãr
->
ucFÏgs
 = ucFlags;

1283 
	}
}

1285 #iàĞ
cÚfigUSE_TRACE_FACILITY
 == 1 )

1287 
UBa£Ty³_t
 
	$uxSŒ—mBufãrG‘SŒ—mBufãrNumb”
Ğ
SŒ—mBufãrHªdË_t
 
xSŒ—mBufãr
 )

1289  
xSŒ—mBufãr
->
uxSŒ—mBufãrNumb”
;

1290 
	}
}

1295 #iàĞ
cÚfigUSE_TRACE_FACILITY
 == 1 )

1297 
	$vSŒ—mBufãrS‘SŒ—mBufãrNumb”
Ğ
SŒ—mBufãrHªdË_t
 
xSŒ—mBufãr
,

1298 
UBa£Ty³_t
 
uxSŒ—mBufãrNumb”
 )

1300 
xSŒ—mBufãr
->
uxSŒ—mBufãrNumb”
 = uxStreamBufferNumber;

1301 
	}
}

1306 #iàĞ
cÚfigUSE_TRACE_FACILITY
 == 1 )

1308 
ušt8_t
 
	$ucSŒ—mBufãrG‘SŒ—mBufãrTy³
Ğ
SŒ—mBufãrHªdË_t
 
xSŒ—mBufãr
 )

1310 Ğ
xSŒ—mBufãr
->
ucFÏgs
 & 
sbFLAGS_IS_MESSAGE_BUFFER
 );

1311 
	}
}

	@tasks.c

30 
	~<¡dlib.h
>

31 
	~<¡ršg.h
>

36 
	#MPU_WRAPPERS_INCLUDED_FROM_API_FILE


	)

39 
	~"F»eRTOS.h
"

40 
	~"sk.h
"

41 
	~"tim”s.h
"

42 
	~"¡ack_maüos.h
"

48 #undeà
MPU_WRAPPERS_INCLUDED_FROM_API_FILE


52 #iàĞ
cÚfigUSE_STATS_FORMATTING_FUNCTIONS
 == 1 )

58 
	~<¡dio.h
>

61 #iàĞ
cÚfigUSE_PREEMPTION
 == 0 )

65 
	#skYIELD_IF_USING_PREEMPTION
()

	)

67 
	#skYIELD_IF_USING_PREEMPTION
(è
	`pÜtYIELD_WITHIN_API
()

	)

71 
	#skNOT_WAITING_NOTIFICATION
 ( ( 
ušt8_t
 ) 0 )

	)

72 
	#skWAITING_NOTIFICATION
 ( ( 
ušt8_t
 ) 1 )

	)

73 
	#skNOTIFICATION_RECEIVED
 ( ( 
ušt8_t
 ) 2 )

	)

79 
	#tskSTACK_FILL_BYTE
 ( 0xa5U )

	)

82 
	#tskDYNAMICALLY_ALLOCATED_STACK_AND_TCB
 ( ( 
ušt8_t
 ) 0 )

	)

83 
	#tskSTATICALLY_ALLOCATED_STACK_ONLY
 ( ( 
ušt8_t
 ) 1 )

	)

84 
	#tskSTATICALLY_ALLOCATED_STACK_AND_TCB
 ( ( 
ušt8_t
 ) 2 )

	)

89 #iàĞĞ
cÚfigCHECK_FOR_STACK_OVERFLOW
 > 1 ) || ( 
cÚfigUSE_TRACE_FACILITY
 =ğ1 ) || ( 
INCLUDE_uxTaskG‘SckHighW©”M¬k
 =ğ1 ) || ( 
INCLUDE_uxTaskG‘SckHighW©”M¬k2
 == 1 ) )

90 
	#tskSET_NEW_STACKS_TO_KNOWN_VALUE
 1

	)

92 
	#tskSET_NEW_STACKS_TO_KNOWN_VALUE
 0

	)

98 
	#tskRUNNING_CHAR
 ( 'X' )

	)

99 
	#tskBLOCKED_CHAR
 ( 'B' )

	)

100 
	#tskREADY_CHAR
 ( 'R' )

	)

101 
	#tskDELETED_CHAR
 ( 'D' )

	)

102 
	#tskSUSPENDED_CHAR
 ( 'S' )

	)

108 #ifdeà
pÜtREMOVE_STATIC_QUALIFIER


109 

	)

114 #iâdeà
cÚfigIDLE_TASK_NAME


115 
	#cÚfigIDLE_TASK_NAME
 "IDLE"

	)

118 #iàĞ
cÚfigUSE_PORT_OPTIMISED_TASK_SELECTION
 == 0 )

126 
	#skRECORD_READY_PRIORITY
Ğ
uxPriÜ™y
 ) \

	)

128 ifĞĞ
	guxPriÜ™y
 ) > 
	guxTİR—dyPriÜ™y
 ) \

130 
	guxTİR—dyPriÜ™y
 = ( 
uxPriÜ™y
 ); \

136 
	#skSELECT_HIGHEST_PRIORITY_TASK
(è\

	)

138 
UBa£Ty³_t
 
	guxTİPriÜ™y
 = 
uxTİR—dyPriÜ™y
; \

141  
li¡LIST_IS_EMPTY
Ğ&Ğ
pxR—dyTasksLi¡s
[ 
uxTİPriÜ™y
 ] ) ) ) \

143 
cÚfigASSERT
Ğ
uxTİPriÜ™y
 ); \

144 --
	guxTİPriÜ™y
; \

149 
li¡GET_OWNER_OF_NEXT_ENTRY
Ğ
pxCu¼’tTCB
, &Ğ
pxR—dyTasksLi¡s
[ 
uxTİPriÜ™y
 ] ) ); \

150 
	guxTİR—dyPriÜ™y
 = 
uxTİPriÜ™y
; \

158 
	#skRESET_READY_PRIORITY
Ğ
uxPriÜ™y
 )

	)

159 
	#pÜtRESET_READY_PRIORITY
Ğ
uxPriÜ™y
, 
uxTİR—dyPriÜ™y
 )

	)

168 
	#skRECORD_READY_PRIORITY
Ğ
uxPriÜ™y
 ) 
	`pÜtRECORD_READY_PRIORITY
ĞuxPriÜ™y, 
uxTİR—dyPriÜ™y
 )

	)

172 
	#skSELECT_HIGHEST_PRIORITY_TASK
(è\

	)

174 
UBa£Ty³_t
 
	guxTİPriÜ™y
; \

177 
pÜtGET_HIGHEST_PRIORITY
Ğ
uxTİPriÜ™y
, 
uxTİR—dyPriÜ™y
 ); \

178 
cÚfigASSERT
Ğ
li¡CURRENT_LIST_LENGTH
Ğ&Ğ
pxR—dyTasksLi¡s
[ 
uxTİPriÜ™y
 ] ) ) > 0 ); \

179 
li¡GET_OWNER_OF_NEXT_ENTRY
Ğ
pxCu¼’tTCB
, &Ğ
pxR—dyTasksLi¡s
[ 
uxTİPriÜ™y
 ] ) ); \

187 
	#skRESET_READY_PRIORITY
Ğ
uxPriÜ™y
 ) \

	)

189 ifĞ
li¡CURRENT_LIST_LENGTH
Ğ&Ğ
pxR—dyTasksLi¡s
[ ( 
uxPriÜ™y
 ) ] ) ) =ğĞ
UBa£Ty³_t
 ) 0 ) \

191 
pÜtRESET_READY_PRIORITY
ĞĞ
uxPriÜ™y
 ), ( 
uxTİR—dyPriÜ™y
 ) ); \

201 
	#skSWITCH_DELAYED_LISTS
(è\

	)

203 
Li¡_t
 * 
	gpxTemp
; \

206 
cÚfigASSERT
ĞĞ
li¡LIST_IS_EMPTY
Ğ
pxD–ayedTaskLi¡
 ) ) ); \

208 
	gpxTemp
 = 
pxD–ayedTaskLi¡
; \

209 
	gpxD–ayedTaskLi¡
 = 
pxOv”æowD–ayedTaskLi¡
; \

210 
	gpxOv”æowD–ayedTaskLi¡
 = 
pxTemp
; \

211 
	gxNumOfOv”æows
++; \

212 
´vRe£tNextTaskUnblockTime
(); \

221 
	#´vAddTaskToR—dyLi¡
Ğ
pxTCB
 ) \

	)

222 
ŒaûMOVED_TASK_TO_READY_STATE
Ğ
pxTCB
 ); \

223 
skRECORD_READY_PRIORITY
ĞĞ
pxTCB
 )->
uxPriÜ™y
 ); \

224 
li¡INSERT_END
Ğ&Ğ
pxR—dyTasksLi¡s
[ ( 
pxTCB
 )->
uxPriÜ™y
 ] ), &ĞĞpxTCB )->
xS‹Li¡I‹m
 ) ); \

225 
	$ŒaûPOST_MOVED_TASK_TO_READY_STATE
Ğ
pxTCB
 )

234 
	#´vG‘TCBFromHªdË
Ğ
pxHªdË
 ) ( ( (…xHªdË ) =ğ
NULL
 ) ? 
pxCu¼’tTCB
 : (…xHªdË ) )

	)

244 #iàĞ
cÚfigUSE_16_BIT_TICKS
 == 1 )

245 
	#skEVENT_LIST_ITEM_VALUE_IN_USE
 0x8000U

	)

247 
	#skEVENT_LIST_ITEM_VALUE_IN_USE
 0x80000000UL

	)

255 
	stskTaskCÚŒŞBlock


257 vŞ©
SckTy³_t
 * 
pxTİOfSck
;

259 #iàĞ
pÜtUSING_MPU_WRAPPERS
 == 1 )

260 
xMPU_SETTINGS
 
xMPUS‘tšgs
;

263 
Li¡I‹m_t
 
xS‹Li¡I‹m
;

264 
Li¡I‹m_t
 
xEv’tLi¡I‹m
;

265 
UBa£Ty³_t
 
uxPriÜ™y
;

266 
SckTy³_t
 * 
pxSck
;

267 
pcTaskName
[ 
cÚfigMAX_TASK_NAME_LEN
 ];

269 #iàĞĞ
pÜtSTACK_GROWTH
 > 0 ) || ( 
cÚfigRECORD_STACK_HIGH_ADDRESS
 == 1 ) )

270 
SckTy³_t
 * 
pxEndOfSck
;

273 #iàĞ
pÜtCRITICAL_NESTING_IN_TCB
 == 1 )

274 
UBa£Ty³_t
 
uxCr™iÿlNe¡šg
;

277 #iàĞ
cÚfigUSE_TRACE_FACILITY
 == 1 )

278 
UBa£Ty³_t
 
uxTCBNumb”
;

279 
UBa£Ty³_t
 
uxTaskNumb”
;

282 #iàĞ
cÚfigUSE_MUTEXES
 == 1 )

283 
UBa£Ty³_t
 
uxBa£PriÜ™y
;

284 
UBa£Ty³_t
 
uxMu‹xesH–d
;

287 #iàĞ
cÚfigUSE_APPLICATION_TASK_TAG
 == 1 )

288 
TaskHookFunùiÚ_t
 
pxTaskTag
;

291 #iàĞ
cÚfigNUM_THREAD_LOCAL_STORAGE_POINTERS
 > 0 )

292 * 
pvTh»adLoÿlStÜagePoš‹rs
[ 
cÚfigNUM_THREAD_LOCAL_STORAGE_POINTERS
 ];

295 #iàĞ
cÚfigGENERATE_RUN_TIME_STATS
 == 1 )

296 
cÚfigRUN_TIME_COUNTER_TYPE
 
ulRunTimeCouÁ”
;

299 #iàĞ
cÚfigUSE_NEWLIB_REENTRANT
 == 1 )

311 
_»’t
 
xNewLib_»’t
;

314 #iàĞ
cÚfigUSE_TASK_NOTIFICATIONS
 == 1 )

315 vŞ©
ušt32_t
 
ulNÙif›dV®ue
[ 
cÚfigTASK_NOTIFICATION_ARRAY_ENTRIES
 ];

316 vŞ©
ušt8_t
 
ucNÙifyS‹
[ 
cÚfigTASK_NOTIFICATION_ARRAY_ENTRIES
 ];

321 #iàĞ
tskSTATIC_AND_DYNAMIC_ALLOCATION_POSSIBLE
 != 0 )

322 
ušt8_t
 
ucStiÿÎyAÎoÿ‹d
;

325 #iàĞ
INCLUDE_xTaskAbÜtD–ay
 == 1 )

326 
ušt8_t
 
ucD–ayAbÜ‹d
;

329 #iàĞ
cÚfigUSE_POSIX_ERRNO
 == 1 )

330 
iTaskE¼no
;

332 } 
	ttskTCB
;

336 
tskTCB
 
	tTCB_t
;

340 
PRIVILEGED_DATA
 
TCB_t
 * vŞ©
pxCu¼’tTCB
 = 
NULL
;

346 
PRIVILEGED_DATA
 
Li¡_t
 
pxR—dyTasksLi¡s
[ 
cÚfigMAX_PRIORITIES
 ];

347 
PRIVILEGED_DATA
 
Li¡_t
 
xD–ayedTaskLi¡1
;

348 
PRIVILEGED_DATA
 
Li¡_t
 
xD–ayedTaskLi¡2
;

349 
PRIVILEGED_DATA
 
Li¡_t
 * vŞ©
pxD–ayedTaskLi¡
;

350 
PRIVILEGED_DATA
 
Li¡_t
 * vŞ©
pxOv”æowD–ayedTaskLi¡
;

351 
PRIVILEGED_DATA
 
Li¡_t
 
xP’dšgR—dyLi¡
;

353 #iàĞ
INCLUDE_vTaskD–‘e
 == 1 )

355 
PRIVILEGED_DATA
 
Li¡_t
 
xTasksWa™šgT”mš©iÚ
;

356 
PRIVILEGED_DATA
 vŞ©
UBa£Ty³_t
 
uxD–‘edTasksWa™šgCËªUp
 = ( UBaseType_t ) 0U;

360 #iàĞ
INCLUDE_vTaskSu¥’d
 == 1 )

362 
PRIVILEGED_DATA
 
Li¡_t
 
xSu¥’dedTaskLi¡
;

368 #iàĞ
cÚfigUSE_POSIX_ERRNO
 == 1 )

369 
F»eRTOS_”ºo
 = 0;

373 
PRIVILEGED_DATA
 vŞ©
UBa£Ty³_t
 
uxCu¼’tNumb”OfTasks
 = ( UBaseType_t ) 0U;

374 
PRIVILEGED_DATA
 vŞ©
TickTy³_t
 
xTickCouÁ
 = ( TickTy³_ˆè
cÚfigINITIAL_TICK_COUNT
;

375 
PRIVILEGED_DATA
 vŞ©
UBa£Ty³_t
 
uxTİR—dyPriÜ™y
 = 
tskIDLE_PRIORITY
;

376 
PRIVILEGED_DATA
 vŞ©
Ba£Ty³_t
 
xScheduËrRuÂšg
 = 
pdFALSE
;

377 
PRIVILEGED_DATA
 vŞ©
TickTy³_t
 
xP’dedTicks
 = ( TickType_t ) 0U;

378 
PRIVILEGED_DATA
 vŞ©
Ba£Ty³_t
 
xY›ldP’dšg
 = 
pdFALSE
;

379 
PRIVILEGED_DATA
 vŞ©
Ba£Ty³_t
 
xNumOfOv”æows
 = ( BaseType_t ) 0;

380 
PRIVILEGED_DATA
 
UBa£Ty³_t
 
uxTaskNumb”
 = ( UBaseType_t ) 0U;

381 
PRIVILEGED_DATA
 vŞ©
TickTy³_t
 
xNextTaskUnblockTime
 = ( TickType_t ) 0U;

382 
PRIVILEGED_DATA
 
TaskHªdË_t
 
xIdËTaskHªdË
 = 
NULL
;

387 cÚ¡ vŞ©
UBa£Ty³_t
 
uxTİU£dPriÜ™y
 = 
cÚfigMAX_PRIORITIES
 - 1U;

397 
PRIVILEGED_DATA
 vŞ©
UBa£Ty³_t
 
uxScheduËrSu¥’ded
 = ( UBa£Ty³_ˆè
pdFALSE
;

399 #iàĞ
cÚfigGENERATE_RUN_TIME_STATS
 == 1 )

403 
PRIVILEGED_DATA
 
cÚfigRUN_TIME_COUNTER_TYPE
 
ulTaskSw™chedInTime
 = 0UL;

404 
PRIVILEGED_DATA
 vŞ©
cÚfigRUN_TIME_COUNTER_TYPE
 
ulTÙ®RunTime
 = 0UL;

419 #iàĞ
INCLUDE_vTaskSu¥’d
 == 1 )

421 
Ba£Ty³_t
 
	$´vTaskIsTaskSu¥’ded
ĞcÚ¡ 
TaskHªdË_t
 
xTask
 ) 
PRIVILEGED_FUNCTION
;

429 
	$´vIn™Ÿli£TaskLi¡s
Ğè
PRIVILEGED_FUNCTION
;

442 
	$pÜtTASK_FUNCTION_PROTO
Ğ
´vIdËTask
, 
pvP¬am‘”s
 ) 
PRIVILEGED_FUNCTION
;

451 #iàĞ
INCLUDE_vTaskD–‘e
 == 1 )

453 
	$´vD–‘eTCB
Ğ
TCB_t
 * 
pxTCB
 ) 
PRIVILEGED_FUNCTION
;

462 
	$´vCheckTasksWa™šgT”mš©iÚ
Ğè
PRIVILEGED_FUNCTION
;

468 
	$´vAddCu¼’tTaskToD–ayedLi¡
Ğ
TickTy³_t
 
xTicksToWa™
,

469 cÚ¡ 
Ba£Ty³_t
 
xCªBlockIndefš™–y
 ) 
PRIVILEGED_FUNCTION
;

479 #iàĞ
cÚfigUSE_TRACE_FACILITY
 == 1 )

481 
UBa£Ty³_t
 
	$´vLi¡TasksW™hšSšgËLi¡
Ğ
TaskStus_t
 * 
pxTaskStusA¼ay
,

482 
Li¡_t
 * 
pxLi¡
,

483 
eTaskS‹
 
eS‹
 ) 
PRIVILEGED_FUNCTION
;

491 #iàĞ
INCLUDE_xTaskG‘HªdË
 == 1 )

493 
TCB_t
 * 
	$´vS—rchFÜNameW™hšSšgËLi¡
Ğ
Li¡_t
 * 
pxLi¡
,

494 cÚ¡ 
pcNameToQu”y
[] ) 
PRIVILEGED_FUNCTION
;

503 #iàĞĞ
cÚfigUSE_TRACE_FACILITY
 =ğ1 ) || ( 
INCLUDE_uxTaskG‘SckHighW©”M¬k
 =ğ1 ) || ( 
INCLUDE_uxTaskG‘SckHighW©”M¬k2
 == 1 ) )

505 
cÚfigSTACK_DEPTH_TYPE
 
	$´vTaskCheckF»eSckS·û
ĞcÚ¡ 
ušt8_t
 * 
pucSckBy‹
 ) 
PRIVILEGED_FUNCTION
;

518 #iàĞ
cÚfigUSE_TICKLESS_IDLE
 != 0 )

520 
TickTy³_t
 
	$´vG‘Ex³ùedIdËTime
Ğè
PRIVILEGED_FUNCTION
;

528 
	$´vRe£tNextTaskUnblockTime
Ğè
PRIVILEGED_FUNCTION
;

530 #iàĞĞĞ
cÚfigUSE_TRACE_FACILITY
 =ğ1 ) || ( 
cÚfigGENERATE_RUN_TIME_STATS
 == 1 ) ) && \

531 Ğ
cÚfigUSE_STATS_FORMATTING_FUNCTIONS
 > 0 ) && \

532 Ğ
cÚfigSUPPORT_DYNAMIC_ALLOCATION
 == 1 ) )

538 * 
	$´vWr™eNameToBufãr
Ğ* 
pcBufãr
,

539 cÚ¡ * 
pcTaskName
 ) 
PRIVILEGED_FUNCTION
;

547 
	$´vIn™Ÿli£NewTask
Ğ
TaskFunùiÚ_t
 
pxTaskCode
,

548 cÚ¡ * cÚ¡ 
pcName
,

549 cÚ¡ 
ušt32_t
 
ulSckD•th
,

550 * cÚ¡ 
pvP¬am‘”s
,

551 
UBa£Ty³_t
 
uxPriÜ™y
,

552 
TaskHªdË_t
 * cÚ¡ 
pxC»©edTask
,

553 
TCB_t
 * 
pxNewTCB
,

554 cÚ¡ 
MemÜyRegiÚ_t
 * cÚ¡ 
xRegiÚs
 ) 
PRIVILEGED_FUNCTION
;

560 
	$´vAddNewTaskToR—dyLi¡
Ğ
TCB_t
 * 
pxNewTCB
 ) 
PRIVILEGED_FUNCTION
;

567 #ifdeà
FREERTOS_TASKS_C_ADDITIONS_INIT


569 
	$ä“¹os_sks_c_add™iÚs_š™
Ğè
PRIVILEGED_FUNCTION
;

575 #iàĞ
cÚfigSUPPORT_STATIC_ALLOCATION
 == 1 )

577 
TaskHªdË_t
 
	$xTaskC»©eStic
Ğ
TaskFunùiÚ_t
 
pxTaskCode
,

578 cÚ¡ * cÚ¡ 
pcName
,

579 cÚ¡ 
ušt32_t
 
ulSckD•th
,

580 * cÚ¡ 
pvP¬am‘”s
,

581 
UBa£Ty³_t
 
uxPriÜ™y
,

582 
SckTy³_t
 * cÚ¡ 
puxSckBufãr
,

583 
SticTask_t
 * cÚ¡ 
pxTaskBufãr
 )

585 
TCB_t
 * 
pxNewTCB
;

586 
TaskHªdË_t
 
xR‘uº
;

588 
	`cÚfigASSERT
Ğ
puxSckBufãr
 !ğ
NULL
 );

589 
	`cÚfigASSERT
Ğ
pxTaskBufãr
 !ğ
NULL
 );

591 #iàĞ
cÚfigASSERT_DEFINED
 == 1 )

596 vŞ©
size_t
 
xSize
 = Ğ
SticTask_t
 );

597 
	`cÚfigASSERT
Ğ
xSize
 =ğĞ
TCB_t
 ) );

598 Ğè
xSize
;

602 ifĞĞ
pxTaskBufãr
 !ğ
NULL
 ) && ( 
puxSckBufãr
 != NULL ) )

606 
pxNewTCB
 = ( 
TCB_t
 * ) 
pxTaskBufãr
;

607 
	`mem£t
ĞĞ* ) 
pxNewTCB
, 0x00, Ğ
TCB_t
 ) );

608 
pxNewTCB
->
pxSck
 = ( 
SckTy³_t
 * ) 
puxSckBufãr
;

610 #iàĞ
tskSTATIC_AND_DYNAMIC_ALLOCATION_POSSIBLE
 != 0 )

614 
pxNewTCB
->
ucStiÿÎyAÎoÿ‹d
 = 
tskSTATICALLY_ALLOCATED_STACK_AND_TCB
;

618 
	`´vIn™Ÿli£NewTask
Ğ
pxTaskCode
, 
pcName
, 
ulSckD•th
, 
pvP¬am‘”s
, 
uxPriÜ™y
, &
xR‘uº
, 
pxNewTCB
, 
NULL
 );

619 
	`´vAddNewTaskToR—dyLi¡
Ğ
pxNewTCB
 );

623 
xR‘uº
 = 
NULL
;

626  
xR‘uº
;

627 
	}
}

632 #iàĞĞ
pÜtUSING_MPU_WRAPPERS
 =ğ1 ) && ( 
cÚfigSUPPORT_STATIC_ALLOCATION
 == 1 ) )

634 
Ba£Ty³_t
 
	$xTaskC»©eRe¡riùedStic
ĞcÚ¡ 
TaskP¬am‘”s_t
 * cÚ¡ 
pxTaskDefš™iÚ
,

635 
TaskHªdË_t
 * 
pxC»©edTask
 )

637 
TCB_t
 * 
pxNewTCB
;

638 
Ba£Ty³_t
 
xR‘uº
 = 
”rCOULD_NOT_ALLOCATE_REQUIRED_MEMORY
;

640 
	`cÚfigASSERT
Ğ
pxTaskDefš™iÚ
->
puxSckBufãr
 !ğ
NULL
 );

641 
	`cÚfigASSERT
Ğ
pxTaskDefš™iÚ
->
pxTaskBufãr
 !ğ
NULL
 );

643 ifĞĞ
pxTaskDefš™iÚ
->
puxSckBufãr
 !ğ
NULL
 ) && (…xTaskDefš™iÚ->
pxTaskBufãr
 != NULL ) )

648 
pxNewTCB
 = ( 
TCB_t
 * ) 
pxTaskDefš™iÚ
->
pxTaskBufãr
;

649 
	`mem£t
ĞĞ* ) 
pxNewTCB
, 0x00, Ğ
TCB_t
 ) );

652 
pxNewTCB
->
pxSck
 = 
pxTaskDefš™iÚ
->
puxSckBufãr
;

654 #iàĞ
tskSTATIC_AND_DYNAMIC_ALLOCATION_POSSIBLE
 != 0 )

658 
pxNewTCB
->
ucStiÿÎyAÎoÿ‹d
 = 
tskSTATICALLY_ALLOCATED_STACK_AND_TCB
;

662 
	`´vIn™Ÿli£NewTask
Ğ
pxTaskDefš™iÚ
->
pvTaskCode
,

663 
pxTaskDefš™iÚ
->
pcName
,

664 Ğ
ušt32_t
 ) 
pxTaskDefš™iÚ
->
usSckD•th
,

665 
pxTaskDefš™iÚ
->
pvP¬am‘”s
,

666 
pxTaskDefš™iÚ
->
uxPriÜ™y
,

667 
pxC»©edTask
, 
pxNewTCB
,

668 
pxTaskDefš™iÚ
->
xRegiÚs
 );

670 
	`´vAddNewTaskToR—dyLi¡
Ğ
pxNewTCB
 );

671 
xR‘uº
 = 
pdPASS
;

674  
xR‘uº
;

675 
	}
}

680 #iàĞĞ
pÜtUSING_MPU_WRAPPERS
 =ğ1 ) && ( 
cÚfigSUPPORT_DYNAMIC_ALLOCATION
 == 1 ) )

682 
Ba£Ty³_t
 
	$xTaskC»©eRe¡riùed
ĞcÚ¡ 
TaskP¬am‘”s_t
 * cÚ¡ 
pxTaskDefš™iÚ
,

683 
TaskHªdË_t
 * 
pxC»©edTask
 )

685 
TCB_t
 * 
pxNewTCB
;

686 
Ba£Ty³_t
 
xR‘uº
 = 
”rCOULD_NOT_ALLOCATE_REQUIRED_MEMORY
;

688 
	`cÚfigASSERT
Ğ
pxTaskDefš™iÚ
->
puxSckBufãr
 );

690 ifĞ
pxTaskDefš™iÚ
->
puxSckBufãr
 !ğ
NULL
 )

695 
pxNewTCB
 = ( 
TCB_t
 * ) 
	`pvPÜtM®loc
( ( TCB_t ) );

697 ifĞ
pxNewTCB
 !ğ
NULL
 )

699 
	`mem£t
ĞĞ* ) 
pxNewTCB
, 0x00, Ğ
TCB_t
 ) );

702 
pxNewTCB
->
pxSck
 = 
pxTaskDefš™iÚ
->
puxSckBufãr
;

704 #iàĞ
tskSTATIC_AND_DYNAMIC_ALLOCATION_POSSIBLE
 != 0 )

709 
pxNewTCB
->
ucStiÿÎyAÎoÿ‹d
 = 
tskSTATICALLY_ALLOCATED_STACK_ONLY
;

713 
	`´vIn™Ÿli£NewTask
Ğ
pxTaskDefš™iÚ
->
pvTaskCode
,

714 
pxTaskDefš™iÚ
->
pcName
,

715 Ğ
ušt32_t
 ) 
pxTaskDefš™iÚ
->
usSckD•th
,

716 
pxTaskDefš™iÚ
->
pvP¬am‘”s
,

717 
pxTaskDefš™iÚ
->
uxPriÜ™y
,

718 
pxC»©edTask
, 
pxNewTCB
,

719 
pxTaskDefš™iÚ
->
xRegiÚs
 );

721 
	`´vAddNewTaskToR—dyLi¡
Ğ
pxNewTCB
 );

722 
xR‘uº
 = 
pdPASS
;

726  
xR‘uº
;

727 
	}
}

732 #iàĞ
cÚfigSUPPORT_DYNAMIC_ALLOCATION
 == 1 )

734 
Ba£Ty³_t
 
	$xTaskC»©e
Ğ
TaskFunùiÚ_t
 
pxTaskCode
,

735 cÚ¡ * cÚ¡ 
pcName
,

736 cÚ¡ 
cÚfigSTACK_DEPTH_TYPE
 
usSckD•th
,

737 * cÚ¡ 
pvP¬am‘”s
,

738 
UBa£Ty³_t
 
uxPriÜ™y
,

739 
TaskHªdË_t
 * cÚ¡ 
pxC»©edTask
 )

741 
TCB_t
 * 
pxNewTCB
;

742 
Ba£Ty³_t
 
xR‘uº
;

747 #iàĞ
pÜtSTACK_GROWTH
 > 0 )

752 
pxNewTCB
 = ( 
TCB_t
 * ) 
	`pvPÜtM®loc
( ( TCB_t ) );

754 ifĞ
pxNewTCB
 !ğ
NULL
 )

756 
	`mem£t
ĞĞ* ) 
pxNewTCB
, 0x00, Ğ
TCB_t
 ) );

761 
pxNewTCB
->
pxSck
 = ( 
SckTy³_t
 * ) 
	`pvPÜtM®locSck
ĞĞĞĞ
size_t
 ) 
usSckD•th
 ) * ( StackType_t ) ) );

763 ifĞ
pxNewTCB
->
pxSck
 =ğ
NULL
 )

766 
	`vPÜtF»e
Ğ
pxNewTCB
 );

767 
pxNewTCB
 = 
NULL
;

773 
SckTy³_t
 * 
pxSck
;

776 
pxSck
 = 
	`pvPÜtM®locSck
ĞĞĞĞ
size_t
 ) 
usSckD•th
 ) * Ğ
SckTy³_t
 ) ) );

778 ifĞ
pxSck
 !ğ
NULL
 )

781 
pxNewTCB
 = ( 
TCB_t
 * ) 
	`pvPÜtM®loc
( ( TCB_t ) );

783 ifĞ
pxNewTCB
 !ğ
NULL
 )

785 
	`mem£t
ĞĞ* ) 
pxNewTCB
, 0x00, Ğ
TCB_t
 ) );

788 
pxNewTCB
->
pxSck
 =…xStack;

794 
	`vPÜtF»eSck
Ğ
pxSck
 );

799 
pxNewTCB
 = 
NULL
;

804 ifĞ
pxNewTCB
 !ğ
NULL
 )

806 #iàĞ
tskSTATIC_AND_DYNAMIC_ALLOCATION_POSSIBLE
 != 0 )

810 
pxNewTCB
->
ucStiÿÎyAÎoÿ‹d
 = 
tskDYNAMICALLY_ALLOCATED_STACK_AND_TCB
;

814 
	`´vIn™Ÿli£NewTask
Ğ
pxTaskCode
, 
pcName
, ( 
ušt32_t
 ) 
usSckD•th
, 
pvP¬am‘”s
, 
uxPriÜ™y
, 
pxC»©edTask
, 
pxNewTCB
, 
NULL
 );

815 
	`´vAddNewTaskToR—dyLi¡
Ğ
pxNewTCB
 );

816 
xR‘uº
 = 
pdPASS
;

820 
xR‘uº
 = 
”rCOULD_NOT_ALLOCATE_REQUIRED_MEMORY
;

823  
xR‘uº
;

824 
	}
}

829 
	$´vIn™Ÿli£NewTask
Ğ
TaskFunùiÚ_t
 
pxTaskCode
,

830 cÚ¡ * cÚ¡ 
pcName
,

831 cÚ¡ 
ušt32_t
 
ulSckD•th
,

832 * cÚ¡ 
pvP¬am‘”s
,

833 
UBa£Ty³_t
 
uxPriÜ™y
,

834 
TaskHªdË_t
 * cÚ¡ 
pxC»©edTask
,

835 
TCB_t
 * 
pxNewTCB
,

836 cÚ¡ 
MemÜyRegiÚ_t
 * cÚ¡ 
xRegiÚs
 )

838 
SckTy³_t
 * 
pxTİOfSck
;

839 
UBa£Ty³_t
 
x
;

841 #iàĞ
pÜtUSING_MPU_WRAPPERS
 == 1 )

843 
Ba£Ty³_t
 
xRunPriveged
;

845 ifĞĞ
uxPriÜ™y
 & 
pÜtPRIVILEGE_BIT
 ) != 0U )

847 
xRunPriveged
 = 
pdTRUE
;

851 
xRunPriveged
 = 
pdFALSE
;

853 
uxPriÜ™y
 &ğ~
pÜtPRIVILEGE_BIT
;

857 #iàĞ
tskSET_NEW_STACKS_TO_KNOWN_VALUE
 == 1 )

860 Ğè
	`mem£t
Ğ
pxNewTCB
->
pxSck
, ( è
tskSTACK_FILL_BYTE
, ( 
size_t
 ) 
ulSckD•th
 * Ğ
SckTy³_t
 ) );

868 #iàĞ
pÜtSTACK_GROWTH
 < 0 )

870 
pxTİOfSck
 = &Ğ
pxNewTCB
->
pxSck
[ 
ulSckD•th
 - ( 
ušt32_t
 ) 1 ] );

871 
pxTİOfSck
 = ( 
SckTy³_t
 * ) ( ( ( 
pÜtPOINTER_SIZE_TYPE
 )…xTİOfSck ) & ( ~ĞĞpÜtPOINTER_SIZE_TYPE ) 
pÜtBYTE_ALIGNMENT_MASK
 ) ) );

874 
	`cÚfigASSERT
ĞĞĞĞ
pÜtPOINTER_SIZE_TYPE
 ) 
pxTİOfSck
 & (…ÜtPOINTER_SIZE_TYPE ) 
pÜtBYTE_ALIGNMENT_MASK
 ) == 0UL ) );

876 #iàĞ
cÚfigRECORD_STACK_HIGH_ADDRESS
 == 1 )

880 
pxNewTCB
->
pxEndOfSck
 = 
pxTİOfSck
;

886 
pxTİOfSck
 = 
pxNewTCB
->
pxSck
;

889 
	`cÚfigASSERT
ĞĞĞĞ
pÜtPOINTER_SIZE_TYPE
 ) 
pxNewTCB
->
pxSck
 & (…ÜtPOINTER_SIZE_TYPE ) 
pÜtBYTE_ALIGNMENT_MASK
 ) == 0UL ) );

893 
pxNewTCB
->
pxEndOfSck
 =…xNewTCB->
pxSck
 + ( 
ulSckD•th
 - ( 
ušt32_t
 ) 1 );

898 ifĞ
pcName
 !ğ
NULL
 )

900  
x
 = ( 
UBa£Ty³_t
 ) 0; x < ( UBa£Ty³_ˆè
cÚfigMAX_TASK_NAME_LEN
; x++ )

902 
pxNewTCB
->
pcTaskName
[ 
x
 ] = 
pcName
[ x ];

907 ifĞ
pcName
[ 
x
 ] == ( ) 0x00 )

913 
	`mtCOVERAGE_TEST_MARKER
();

919 
pxNewTCB
->
pcTaskName
[ 
cÚfigMAX_TASK_NAME_LEN
 - 1 ] = '\0';

923 
	`mtCOVERAGE_TEST_MARKER
();

927 
	`cÚfigASSERT
Ğ
uxPriÜ™y
 < 
cÚfigMAX_PRIORITIES
 );

929 ifĞ
uxPriÜ™y
 >ğĞ
UBa£Ty³_t
 ) 
cÚfigMAX_PRIORITIES
 )

931 
uxPriÜ™y
 = ( 
UBa£Ty³_t
 ) 
cÚfigMAX_PRIORITIES
 - ( UBaseType_t ) 1U;

935 
	`mtCOVERAGE_TEST_MARKER
();

938 
pxNewTCB
->
uxPriÜ™y
 = uxPriority;

939 #iàĞ
cÚfigUSE_MUTEXES
 == 1 )

941 
pxNewTCB
->
uxBa£PriÜ™y
 = 
uxPriÜ™y
;

945 
	`vLi¡In™Ÿli£I‹m
Ğ&Ğ
pxNewTCB
->
xS‹Li¡I‹m
 ) );

946 
	`vLi¡In™Ÿli£I‹m
Ğ&Ğ
pxNewTCB
->
xEv’tLi¡I‹m
 ) );

950 
	`li¡SET_LIST_ITEM_OWNER
Ğ&Ğ
pxNewTCB
->
xS‹Li¡I‹m
 ),…xNewTCB );

953 
	`li¡SET_LIST_ITEM_VALUE
Ğ&Ğ
pxNewTCB
->
xEv’tLi¡I‹m
 ), ( 
TickTy³_t
 ) 
cÚfigMAX_PRIORITIES
 - ( TickTy³_ˆè
uxPriÜ™y
 );

954 
	`li¡SET_LIST_ITEM_OWNER
Ğ&Ğ
pxNewTCB
->
xEv’tLi¡I‹m
 ),…xNewTCB );

956 #iàĞ
pÜtUSING_MPU_WRAPPERS
 == 1 )

958 
	`vPÜtStÜeTaskMPUS‘tšgs
Ğ&Ğ
pxNewTCB
->
xMPUS‘tšgs
 ), 
xRegiÚs
,…xNewTCB->
pxSck
, 
ulSckD•th
 );

963 Ğè
xRegiÚs
;

967 #iàĞ
cÚfigUSE_NEWLIB_REENTRANT
 == 1 )

972 
	`_REENT_INIT_PTR
ĞĞ&Ğ
pxNewTCB
->
xNewLib_»’t
 ) ) );

980 #iàĞ
pÜtUSING_MPU_WRAPPERS
 == 1 )

985 #iàĞ
pÜtHAS_STACK_OVERFLOW_CHECKING
 == 1 )

987 #iàĞ
pÜtSTACK_GROWTH
 < 0 )

989 
pxNewTCB
->
pxTİOfSck
 = 
	`pxPÜtIn™Ÿli£Sck
ĞpxTİOfSck,…xNewTCB->
pxSck
, 
pxTaskCode
, 
pvP¬am‘”s
, 
xRunPriveged
 );

993 
pxNewTCB
->
pxTİOfSck
 = 
	`pxPÜtIn™Ÿli£Sck
ĞpxTİOfSck,…xNewTCB->
pxEndOfSck
, 
pxTaskCode
, 
pvP¬am‘”s
, 
xRunPriveged
 );

999 
pxNewTCB
->
pxTİOfSck
 = 
	`pxPÜtIn™Ÿli£Sck
ĞpxTİOfSck, 
pxTaskCode
, 
pvP¬am‘”s
, 
xRunPriveged
 );

1008 #iàĞ
pÜtHAS_STACK_OVERFLOW_CHECKING
 == 1 )

1010 #iàĞ
pÜtSTACK_GROWTH
 < 0 )

1012 
pxNewTCB
->
pxTİOfSck
 = 
	`pxPÜtIn™Ÿli£Sck
ĞpxTİOfSck,…xNewTCB->
pxSck
, 
pxTaskCode
, 
pvP¬am‘”s
 );

1016 
pxNewTCB
->
pxTİOfSck
 = 
	`pxPÜtIn™Ÿli£Sck
ĞpxTİOfSck,…xNewTCB->
pxEndOfSck
, 
pxTaskCode
, 
pvP¬am‘”s
 );

1022 
pxNewTCB
->
pxTİOfSck
 = 
	`pxPÜtIn™Ÿli£Sck
ĞpxTİOfSck, 
pxTaskCode
, 
pvP¬am‘”s
 );

1028 ifĞ
pxC»©edTask
 !ğ
NULL
 )

1032 *
pxC»©edTask
 = ( 
TaskHªdË_t
 ) 
pxNewTCB
;

1036 
	`mtCOVERAGE_TEST_MARKER
();

1038 
	}
}

1041 
	$´vAddNewTaskToR—dyLi¡
Ğ
TCB_t
 * 
pxNewTCB
 )

1045 
	`skENTER_CRITICAL
();

1047 
uxCu¼’tNumb”OfTasks
++;

1049 ifĞ
pxCu¼’tTCB
 =ğ
NULL
 )

1053 
pxCu¼’tTCB
 = 
pxNewTCB
;

1055 ifĞ
uxCu¼’tNumb”OfTasks
 =ğĞ
UBa£Ty³_t
 ) 1 )

1060 
	`´vIn™Ÿli£TaskLi¡s
();

1064 
	`mtCOVERAGE_TEST_MARKER
();

1072 ifĞ
xScheduËrRuÂšg
 =ğ
pdFALSE
 )

1074 ifĞ
pxCu¼’tTCB
->
uxPriÜ™y
 <ğ
pxNewTCB
->uxPriority )

1076 
pxCu¼’tTCB
 = 
pxNewTCB
;

1080 
	`mtCOVERAGE_TEST_MARKER
();

1085 
	`mtCOVERAGE_TEST_MARKER
();

1089 
uxTaskNumb”
++;

1091 #iàĞ
cÚfigUSE_TRACE_FACILITY
 == 1 )

1094 
pxNewTCB
->
uxTCBNumb”
 = 
uxTaskNumb”
;

1097 
	`ŒaûTASK_CREATE
Ğ
pxNewTCB
 );

1099 
	`´vAddTaskToR—dyLi¡
Ğ
pxNewTCB
 );

1101 
	`pÜtSETUP_TCB
Ğ
pxNewTCB
 );

1103 
	`skEXIT_CRITICAL
();

1105 ifĞ
xScheduËrRuÂšg
 !ğ
pdFALSE
 )

1109 ifĞ
pxCu¼’tTCB
->
uxPriÜ™y
 < 
pxNewTCB
->uxPriority )

1111 
	`skYIELD_IF_USING_PREEMPTION
();

1115 
	`mtCOVERAGE_TEST_MARKER
();

1120 
	`mtCOVERAGE_TEST_MARKER
();

1122 
	}
}

1125 #iàĞ
INCLUDE_vTaskD–‘e
 == 1 )

1127 
	$vTaskD–‘e
Ğ
TaskHªdË_t
 
xTaskToD–‘e
 )

1129 
TCB_t
 * 
pxTCB
;

1131 
	`skENTER_CRITICAL
();

1135 
pxTCB
 = 
	`´vG‘TCBFromHªdË
Ğ
xTaskToD–‘e
 );

1138 ifĞ
	`uxLi¡Remove
Ğ&Ğ
pxTCB
->
xS‹Li¡I‹m
 ) ) =ğĞ
UBa£Ty³_t
 ) 0 )

1140 
	`skRESET_READY_PRIORITY
Ğ
pxTCB
->
uxPriÜ™y
 );

1144 
	`mtCOVERAGE_TEST_MARKER
();

1148 ifĞ
	`li¡LIST_ITEM_CONTAINER
Ğ&Ğ
pxTCB
->
xEv’tLi¡I‹m
 ) ) !ğ
NULL
 )

1150 Ğè
	`uxLi¡Remove
Ğ&Ğ
pxTCB
->
xEv’tLi¡I‹m
 ) );

1154 
	`mtCOVERAGE_TEST_MARKER
();

1161 
uxTaskNumb”
++;

1163 ifĞ
pxTCB
 =ğ
pxCu¼’tTCB
 )

1170 
	`vLi¡In£¹End
Ğ&
xTasksWa™šgT”mš©iÚ
, &Ğ
pxTCB
->
xS‹Li¡I‹m
 ) );

1175 ++
uxD–‘edTasksWa™šgCËªUp
;

1179 
	`ŒaûTASK_DELETE
Ğ
pxTCB
 );

1186 
	`pÜtPRE_TASK_DELETE_HOOK
Ğ
pxTCB
, &
xY›ldP’dšg
 );

1190 --
uxCu¼’tNumb”OfTasks
;

1191 
	`ŒaûTASK_DELETE
Ğ
pxTCB
 );

1195 
	`´vRe£tNextTaskUnblockTime
();

1198 
	`skEXIT_CRITICAL
();

1203 ifĞ
pxTCB
 !ğ
pxCu¼’tTCB
 )

1205 
	`´vD–‘eTCB
Ğ
pxTCB
 );

1210 ifĞ
xScheduËrRuÂšg
 !ğ
pdFALSE
 )

1212 ifĞ
pxTCB
 =ğ
pxCu¼’tTCB
 )

1214 
	`cÚfigASSERT
Ğ
uxScheduËrSu¥’ded
 == 0 );

1215 
	`pÜtYIELD_WITHIN_API
();

1219 
	`mtCOVERAGE_TEST_MARKER
();

1222 
	}
}

1227 #iàĞ
INCLUDE_xTaskD–ayUÁ
 == 1 )

1229 
Ba£Ty³_t
 
	$xTaskD–ayUÁ
Ğ
TickTy³_t
 * cÚ¡ 
pxP»viousWakeTime
,

1230 cÚ¡ 
TickTy³_t
 
xTimeInüem’t
 )

1232 
TickTy³_t
 
xTimeToWake
;

1233 
Ba£Ty³_t
 
xAÌ—dyY›lded
, 
xShouldD–ay
 = 
pdFALSE
;

1235 
	`cÚfigASSERT
Ğ
pxP»viousWakeTime
 );

1236 
	`cÚfigASSERT
ĞĞ
xTimeInüem’t
 > 0U ) );

1237 
	`cÚfigASSERT
Ğ
uxScheduËrSu¥’ded
 == 0 );

1239 
	`vTaskSu¥’dAÎ
();

1243 cÚ¡ 
TickTy³_t
 
xCÚ¡TickCouÁ
 = 
xTickCouÁ
;

1246 
xTimeToWake
 = *
pxP»viousWakeTime
 + 
xTimeInüem’t
;

1248 ifĞ
xCÚ¡TickCouÁ
 < *
pxP»viousWakeTime
 )

1255 ifĞĞ
xTimeToWake
 < *
pxP»viousWakeTime
 ) && ( xTimeToWak> 
xCÚ¡TickCouÁ
 ) )

1257 
xShouldD–ay
 = 
pdTRUE
;

1261 
	`mtCOVERAGE_TEST_MARKER
();

1269 ifĞĞ
xTimeToWake
 < *
pxP»viousWakeTime
 ) || ( xTimeToWak> 
xCÚ¡TickCouÁ
 ) )

1271 
xShouldD–ay
 = 
pdTRUE
;

1275 
	`mtCOVERAGE_TEST_MARKER
();

1280 *
pxP»viousWakeTime
 = 
xTimeToWake
;

1282 ifĞ
xShouldD–ay
 !ğ
pdFALSE
 )

1284 
	`ŒaûTASK_DELAY_UNTIL
Ğ
xTimeToWake
 );

1288 
	`´vAddCu¼’tTaskToD–ayedLi¡
Ğ
xTimeToWake
 - 
xCÚ¡TickCouÁ
, 
pdFALSE
 );

1292 
	`mtCOVERAGE_TEST_MARKER
();

1295 
xAÌ—dyY›lded
 = 
	`xTaskResumeAÎ
();

1299 ifĞ
xAÌ—dyY›lded
 =ğ
pdFALSE
 )

1301 
	`pÜtYIELD_WITHIN_API
();

1305 
	`mtCOVERAGE_TEST_MARKER
();

1308  
xShouldD–ay
;

1309 
	}
}

1314 #iàĞ
INCLUDE_vTaskD–ay
 == 1 )

1316 
	$vTaskD–ay
ĞcÚ¡ 
TickTy³_t
 
xTicksToD–ay
 )

1318 
Ba£Ty³_t
 
xAÌ—dyY›lded
 = 
pdFALSE
;

1321 ifĞ
xTicksToD–ay
 > ( 
TickTy³_t
 ) 0U )

1323 
	`cÚfigASSERT
Ğ
uxScheduËrSu¥’ded
 == 0 );

1324 
	`vTaskSu¥’dAÎ
();

1326 
	`ŒaûTASK_DELAY
();

1335 
	`´vAddCu¼’tTaskToD–ayedLi¡
Ğ
xTicksToD–ay
, 
pdFALSE
 );

1337 
xAÌ—dyY›lded
 = 
	`xTaskResumeAÎ
();

1341 
	`mtCOVERAGE_TEST_MARKER
();

1346 ifĞ
xAÌ—dyY›lded
 =ğ
pdFALSE
 )

1348 
	`pÜtYIELD_WITHIN_API
();

1352 
	`mtCOVERAGE_TEST_MARKER
();

1354 
	}
}

1359 #iàĞĞ
INCLUDE_eTaskG‘S‹
 =ğ1 ) || ( 
cÚfigUSE_TRACE_FACILITY
 =ğ1 ) || ( 
INCLUDE_xTaskAbÜtD–ay
 == 1 ) )

1361 
eTaskS‹
 
	$eTaskG‘S‹
Ğ
TaskHªdË_t
 
xTask
 )

1363 
eTaskS‹
 
eR‘uº
;

1364 
Li¡_t
 cÚ¡ * 
pxS‹Li¡
, * 
pxD–ayedLi¡
, * 
pxOv”æowedD–ayedLi¡
;

1365 cÚ¡ 
TCB_t
 * cÚ¡ 
pxTCB
 = 
xTask
;

1367 
	`cÚfigASSERT
Ğ
pxTCB
 );

1369 ifĞ
pxTCB
 =ğ
pxCu¼’tTCB
 )

1372 
eR‘uº
 = 
eRuÂšg
;

1376 
	`skENTER_CRITICAL
();

1378 
pxS‹Li¡
 = 
	`li¡LIST_ITEM_CONTAINER
Ğ&Ğ
pxTCB
->
xS‹Li¡I‹m
 ) );

1379 
pxD–ayedLi¡
 = 
pxD–ayedTaskLi¡
;

1380 
pxOv”æowedD–ayedLi¡
 = 
pxOv”æowD–ayedTaskLi¡
;

1382 
	`skEXIT_CRITICAL
();

1384 ifĞĞ
pxS‹Li¡
 =ğ
pxD–ayedLi¡
 ) || (…xS‹Li¡ =ğ
pxOv”æowedD–ayedLi¡
 ) )

1388 
eR‘uº
 = 
eBlocked
;

1391 #iàĞ
INCLUDE_vTaskSu¥’d
 == 1 )

1392 ifĞ
pxS‹Li¡
 =ğ&
xSu¥’dedTaskLi¡
 )

1397 ifĞ
	`li¡LIST_ITEM_CONTAINER
Ğ&Ğ
pxTCB
->
xEv’tLi¡I‹m
 ) ) =ğ
NULL
 )

1399 #iàĞ
cÚfigUSE_TASK_NOTIFICATIONS
 == 1 )

1401 
Ba£Ty³_t
 
x
;

1408 
eR‘uº
 = 
eSu¥’ded
;

1410  
x
 = 0; x < 
cÚfigTASK_NOTIFICATION_ARRAY_ENTRIES
; x++ )

1412 ifĞ
pxTCB
->
ucNÙifyS‹
[ 
x
 ] =ğ
skWAITING_NOTIFICATION
 )

1414 
eR‘uº
 = 
eBlocked
;

1421 
eR‘uº
 = 
eSu¥’ded
;

1427 
eR‘uº
 = 
eBlocked
;

1432 #iàĞ
INCLUDE_vTaskD–‘e
 == 1 )

1433 ifĞĞ
pxS‹Li¡
 =ğ&
xTasksWa™šgT”mš©iÚ
 ) || (…xS‹Li¡ =ğ
NULL
 ) )

1438 
eR‘uº
 = 
eD–‘ed
;

1446 
eR‘uº
 = 
eR—dy
;

1450  
eR‘uº
;

1451 
	}
}

1456 #iàĞ
INCLUDE_uxTaskPriÜ™yG‘
 == 1 )

1458 
UBa£Ty³_t
 
	$uxTaskPriÜ™yG‘
ĞcÚ¡ 
TaskHªdË_t
 
xTask
 )

1460 
TCB_t
 cÚ¡ * 
pxTCB
;

1461 
UBa£Ty³_t
 
uxR‘uº
;

1463 
	`skENTER_CRITICAL
();

1467 
pxTCB
 = 
	`´vG‘TCBFromHªdË
Ğ
xTask
 );

1468 
uxR‘uº
 = 
pxTCB
->
uxPriÜ™y
;

1470 
	`skEXIT_CRITICAL
();

1472  
uxR‘uº
;

1473 
	}
}

1478 #iàĞ
INCLUDE_uxTaskPriÜ™yG‘
 == 1 )

1480 
UBa£Ty³_t
 
	$uxTaskPriÜ™yG‘FromISR
ĞcÚ¡ 
TaskHªdË_t
 
xTask
 )

1482 
TCB_t
 cÚ¡ * 
pxTCB
;

1483 
UBa£Ty³_t
 
uxR‘uº
, 
uxSavedIÁ”ru±S‹
;

1501 
	`pÜtASSERT_IF_INTERRUPT_PRIORITY_INVALID
();

1503 
uxSavedIÁ”ru±S‹
 = 
	`pÜtSET_INTERRUPT_MASK_FROM_ISR
();

1507 
pxTCB
 = 
	`´vG‘TCBFromHªdË
Ğ
xTask
 );

1508 
uxR‘uº
 = 
pxTCB
->
uxPriÜ™y
;

1510 
	`pÜtCLEAR_INTERRUPT_MASK_FROM_ISR
Ğ
uxSavedIÁ”ru±S‹
 );

1512  
uxR‘uº
;

1513 
	}
}

1518 #iàĞ
INCLUDE_vTaskPriÜ™yS‘
 == 1 )

1520 
	$vTaskPriÜ™yS‘
Ğ
TaskHªdË_t
 
xTask
,

1521 
UBa£Ty³_t
 
uxNewPriÜ™y
 )

1523 
TCB_t
 * 
pxTCB
;

1524 
UBa£Ty³_t
 
uxCu¼’tBa£PriÜ™y
, 
uxPriÜ™yU£dOnEÁry
;

1525 
Ba£Ty³_t
 
xY›ldRequœed
 = 
pdFALSE
;

1527 
	`cÚfigASSERT
Ğ
uxNewPriÜ™y
 < 
cÚfigMAX_PRIORITIES
 );

1530 ifĞ
uxNewPriÜ™y
 >ğĞ
UBa£Ty³_t
 ) 
cÚfigMAX_PRIORITIES
 )

1532 
uxNewPriÜ™y
 = ( 
UBa£Ty³_t
 ) 
cÚfigMAX_PRIORITIES
 - ( UBaseType_t ) 1U;

1536 
	`mtCOVERAGE_TEST_MARKER
();

1539 
	`skENTER_CRITICAL
();

1543 
pxTCB
 = 
	`´vG‘TCBFromHªdË
Ğ
xTask
 );

1545 
	`ŒaûTASK_PRIORITY_SET
Ğ
pxTCB
, 
uxNewPriÜ™y
 );

1547 #iàĞ
cÚfigUSE_MUTEXES
 == 1 )

1549 
uxCu¼’tBa£PriÜ™y
 = 
pxTCB
->
uxBa£PriÜ™y
;

1553 
uxCu¼’tBa£PriÜ™y
 = 
pxTCB
->
uxPriÜ™y
;

1557 ifĞ
uxCu¼’tBa£PriÜ™y
 !ğ
uxNewPriÜ™y
 )

1561 ifĞ
uxNewPriÜ™y
 > 
uxCu¼’tBa£PriÜ™y
 )

1563 ifĞ
pxTCB
 !ğ
pxCu¼’tTCB
 )

1568 ifĞ
uxNewPriÜ™y
 >ğ
pxCu¼’tTCB
->
uxPriÜ™y
 )

1570 
xY›ldRequœed
 = 
pdTRUE
;

1574 
	`mtCOVERAGE_TEST_MARKER
();

1584 ifĞ
pxTCB
 =ğ
pxCu¼’tTCB
 )

1589 
xY›ldRequœed
 = 
pdTRUE
;

1601 
uxPriÜ™yU£dOnEÁry
 = 
pxTCB
->
uxPriÜ™y
;

1603 #iàĞ
cÚfigUSE_MUTEXES
 == 1 )

1607 ifĞ
pxTCB
->
uxBa£PriÜ™y
 =ğpxTCB->
uxPriÜ™y
 )

1609 
pxTCB
->
uxPriÜ™y
 = 
uxNewPriÜ™y
;

1613 
	`mtCOVERAGE_TEST_MARKER
();

1617 
pxTCB
->
uxBa£PriÜ™y
 = 
uxNewPriÜ™y
;

1621 
pxTCB
->
uxPriÜ™y
 = 
uxNewPriÜ™y
;

1627 ifĞĞ
	`li¡GET_LIST_ITEM_VALUE
Ğ&Ğ
pxTCB
->
xEv’tLi¡I‹m
 ) ) & 
skEVENT_LIST_ITEM_VALUE_IN_USE
 ) == 0UL )

1629 
	`li¡SET_LIST_ITEM_VALUE
Ğ&Ğ
pxTCB
->
xEv’tLi¡I‹m
 ), ( ( 
TickTy³_t
 ) 
cÚfigMAX_PRIORITIES
 - ( TickTy³_ˆè
uxNewPriÜ™y
 ) );

1633 
	`mtCOVERAGE_TEST_MARKER
();

1640 ifĞ
	`li¡IS_CONTAINED_WITHIN
Ğ&Ğ
pxR—dyTasksLi¡s
[ 
uxPriÜ™yU£dOnEÁry
 ] ), &Ğ
pxTCB
->
xS‹Li¡I‹m
 ) ) !ğ
pdFALSE
 )

1645 ifĞ
	`uxLi¡Remove
Ğ&Ğ
pxTCB
->
xS‹Li¡I‹m
 ) ) =ğĞ
UBa£Ty³_t
 ) 0 )

1650 
	`pÜtRESET_READY_PRIORITY
Ğ
uxPriÜ™yU£dOnEÁry
, 
uxTİR—dyPriÜ™y
 );

1654 
	`mtCOVERAGE_TEST_MARKER
();

1657 
	`´vAddTaskToR—dyLi¡
Ğ
pxTCB
 );

1661 
	`mtCOVERAGE_TEST_MARKER
();

1664 ifĞ
xY›ldRequœed
 !ğ
pdFALSE
 )

1666 
	`skYIELD_IF_USING_PREEMPTION
();

1670 
	`mtCOVERAGE_TEST_MARKER
();

1675 Ğè
uxPriÜ™yU£dOnEÁry
;

1678 
	`skEXIT_CRITICAL
();

1679 
	}
}

1684 #iàĞ
INCLUDE_vTaskSu¥’d
 == 1 )

1686 
	$vTaskSu¥’d
Ğ
TaskHªdË_t
 
xTaskToSu¥’d
 )

1688 
TCB_t
 * 
pxTCB
;

1690 
	`skENTER_CRITICAL
();

1694 
pxTCB
 = 
	`´vG‘TCBFromHªdË
Ğ
xTaskToSu¥’d
 );

1696 
	`ŒaûTASK_SUSPEND
Ğ
pxTCB
 );

1700 ifĞ
	`uxLi¡Remove
Ğ&Ğ
pxTCB
->
xS‹Li¡I‹m
 ) ) =ğĞ
UBa£Ty³_t
 ) 0 )

1702 
	`skRESET_READY_PRIORITY
Ğ
pxTCB
->
uxPriÜ™y
 );

1706 
	`mtCOVERAGE_TEST_MARKER
();

1710 ifĞ
	`li¡LIST_ITEM_CONTAINER
Ğ&Ğ
pxTCB
->
xEv’tLi¡I‹m
 ) ) !ğ
NULL
 )

1712 Ğè
	`uxLi¡Remove
Ğ&Ğ
pxTCB
->
xEv’tLi¡I‹m
 ) );

1716 
	`mtCOVERAGE_TEST_MARKER
();

1719 
	`vLi¡In£¹End
Ğ&
xSu¥’dedTaskLi¡
, &Ğ
pxTCB
->
xS‹Li¡I‹m
 ) );

1721 #iàĞ
cÚfigUSE_TASK_NOTIFICATIONS
 == 1 )

1723 
Ba£Ty³_t
 
x
;

1725  
x
 = 0; x < 
cÚfigTASK_NOTIFICATION_ARRAY_ENTRIES
; x++ )

1727 ifĞ
pxTCB
->
ucNÙifyS‹
[ 
x
 ] =ğ
skWAITING_NOTIFICATION
 )

1731 
pxTCB
->
ucNÙifyS‹
[ 
x
 ] = 
skNOT_WAITING_NOTIFICATION
;

1737 
	`skEXIT_CRITICAL
();

1739 ifĞ
xScheduËrRuÂšg
 !ğ
pdFALSE
 )

1743 
	`skENTER_CRITICAL
();

1745 
	`´vRe£tNextTaskUnblockTime
();

1747 
	`skEXIT_CRITICAL
();

1751 
	`mtCOVERAGE_TEST_MARKER
();

1754 ifĞ
pxTCB
 =ğ
pxCu¼’tTCB
 )

1756 ifĞ
xScheduËrRuÂšg
 !ğ
pdFALSE
 )

1759 
	`cÚfigASSERT
Ğ
uxScheduËrSu¥’ded
 == 0 );

1760 
	`pÜtYIELD_WITHIN_API
();

1767 ifĞ
	`li¡CURRENT_LIST_LENGTH
Ğ&
xSu¥’dedTaskLi¡
 ) =ğ
uxCu¼’tNumb”OfTasks
 )

1773 
pxCu¼’tTCB
 = 
NULL
;

1777 
	`vTaskSw™chCÚ‹xt
();

1783 
	`mtCOVERAGE_TEST_MARKER
();

1785 
	}
}

1790 #iàĞ
INCLUDE_vTaskSu¥’d
 == 1 )

1792 
Ba£Ty³_t
 
	$´vTaskIsTaskSu¥’ded
ĞcÚ¡ 
TaskHªdË_t
 
xTask
 )

1794 
Ba£Ty³_t
 
xR‘uº
 = 
pdFALSE
;

1795 cÚ¡ 
TCB_t
 * cÚ¡ 
pxTCB
 = 
xTask
;

1801 
	`cÚfigASSERT
Ğ
xTask
 );

1804 ifĞ
	`li¡IS_CONTAINED_WITHIN
Ğ&
xSu¥’dedTaskLi¡
, &Ğ
pxTCB
->
xS‹Li¡I‹m
 ) ) !ğ
pdFALSE
 )

1807 ifĞ
	`li¡IS_CONTAINED_WITHIN
Ğ&
xP’dšgR—dyLi¡
, &Ğ
pxTCB
->
xEv’tLi¡I‹m
 ) ) =ğ
pdFALSE
 )

1811 ifĞ
	`li¡IS_CONTAINED_WITHIN
Ğ
NULL
, &Ğ
pxTCB
->
xEv’tLi¡I‹m
 ) ) !ğ
pdFALSE
 )

1813 
xR‘uº
 = 
pdTRUE
;

1817 
	`mtCOVERAGE_TEST_MARKER
();

1822 
	`mtCOVERAGE_TEST_MARKER
();

1827 
	`mtCOVERAGE_TEST_MARKER
();

1830  
xR‘uº
;

1831 
	}
}

1836 #iàĞ
INCLUDE_vTaskSu¥’d
 == 1 )

1838 
	$vTaskResume
Ğ
TaskHªdË_t
 
xTaskToResume
 )

1840 
TCB_t
 * cÚ¡ 
pxTCB
 = 
xTaskToResume
;

1843 
	`cÚfigASSERT
Ğ
xTaskToResume
 );

1847 ifĞĞ
pxTCB
 !ğ
pxCu¼’tTCB
 ) && (…xTCB !ğ
NULL
 ) )

1849 
	`skENTER_CRITICAL
();

1851 ifĞ
	`´vTaskIsTaskSu¥’ded
Ğ
pxTCB
 ) !ğ
pdFALSE
 )

1853 
	`ŒaûTASK_RESUME
Ğ
pxTCB
 );

1857 Ğè
	`uxLi¡Remove
Ğ&Ğ
pxTCB
->
xS‹Li¡I‹m
 ) );

1858 
	`´vAddTaskToR—dyLi¡
Ğ
pxTCB
 );

1861 ifĞ
pxTCB
->
uxPriÜ™y
 >ğ
pxCu¼’tTCB
->uxPriority )

1866 
	`skYIELD_IF_USING_PREEMPTION
();

1870 
	`mtCOVERAGE_TEST_MARKER
();

1875 
	`mtCOVERAGE_TEST_MARKER
();

1878 
	`skEXIT_CRITICAL
();

1882 
	`mtCOVERAGE_TEST_MARKER
();

1884 
	}
}

1890 #iàĞĞ
INCLUDE_xTaskResumeFromISR
 =ğ1 ) && ( 
INCLUDE_vTaskSu¥’d
 == 1 ) )

1892 
Ba£Ty³_t
 
	$xTaskResumeFromISR
Ğ
TaskHªdË_t
 
xTaskToResume
 )

1894 
Ba£Ty³_t
 
xY›ldRequœed
 = 
pdFALSE
;

1895 
TCB_t
 * cÚ¡ 
pxTCB
 = 
xTaskToResume
;

1896 
UBa£Ty³_t
 
uxSavedIÁ”ru±Stus
;

1898 
	`cÚfigASSERT
Ğ
xTaskToResume
 );

1916 
	`pÜtASSERT_IF_INTERRUPT_PRIORITY_INVALID
();

1918 
uxSavedIÁ”ru±Stus
 = 
	`pÜtSET_INTERRUPT_MASK_FROM_ISR
();

1920 ifĞ
	`´vTaskIsTaskSu¥’ded
Ğ
pxTCB
 ) !ğ
pdFALSE
 )

1922 
	`ŒaûTASK_RESUME_FROM_ISR
Ğ
pxTCB
 );

1925 ifĞ
uxScheduËrSu¥’ded
 =ğĞ
UBa£Ty³_t
 ) 
pdFALSE
 )

1929 ifĞ
pxTCB
->
uxPriÜ™y
 >ğ
pxCu¼’tTCB
->uxPriority )

1931 
xY›ldRequœed
 = 
pdTRUE
;

1936 
xY›ldP’dšg
 = 
pdTRUE
;

1940 
	`mtCOVERAGE_TEST_MARKER
();

1943 Ğè
	`uxLi¡Remove
Ğ&Ğ
pxTCB
->
xS‹Li¡I‹m
 ) );

1944 
	`´vAddTaskToR—dyLi¡
Ğ
pxTCB
 );

1951 
	`vLi¡In£¹End
Ğ&Ğ
xP’dšgR—dyLi¡
 ), &Ğ
pxTCB
->
xEv’tLi¡I‹m
 ) );

1956 
	`mtCOVERAGE_TEST_MARKER
();

1959 
	`pÜtCLEAR_INTERRUPT_MASK_FROM_ISR
Ğ
uxSavedIÁ”ru±Stus
 );

1961  
xY›ldRequœed
;

1962 
	}
}

1967 
	$vTaskS¹ScheduËr
( )

1969 
Ba£Ty³_t
 
xR‘uº
;

1972 #iàĞ
cÚfigSUPPORT_STATIC_ALLOCATION
 == 1 )

1974 
SticTask_t
 * 
pxIdËTaskTCBBufãr
 = 
NULL
;

1975 
SckTy³_t
 * 
pxIdËTaskSckBufãr
 = 
NULL
;

1976 
ušt32_t
 
ulIdËTaskSckSize
;

1980 
	`vAµliÿtiÚG‘IdËTaskMemÜy
Ğ&
pxIdËTaskTCBBufãr
, &
pxIdËTaskSckBufãr
, &
ulIdËTaskSckSize
 );

1981 
xIdËTaskHªdË
 = 
	`xTaskC»©eStic
Ğ
´vIdËTask
,

1982 
cÚfigIDLE_TASK_NAME
,

1983 
ulIdËTaskSckSize
,

1984 Ğ* ) 
NULL
,

1985 
pÜtPRIVILEGE_BIT
,

1986 
pxIdËTaskSckBufãr
,

1987 
pxIdËTaskTCBBufãr
 );

1989 ifĞ
xIdËTaskHªdË
 !ğ
NULL
 )

1991 
xR‘uº
 = 
pdPASS
;

1995 
xR‘uº
 = 
pdFAIL
;

2001 
xR‘uº
 = 
	`xTaskC»©e
Ğ
´vIdËTask
,

2002 
cÚfigIDLE_TASK_NAME
,

2003 
cÚfigMINIMAL_STACK_SIZE
,

2004 Ğ* ) 
NULL
,

2005 
pÜtPRIVILEGE_BIT
,

2006 &
xIdËTaskHªdË
 );

2010 #iàĞ
cÚfigUSE_TIMERS
 == 1 )

2012 ifĞ
xR‘uº
 =ğ
pdPASS
 )

2014 
xR‘uº
 = 
	`xTim”C»©eTim”Task
();

2018 
	`mtCOVERAGE_TEST_MARKER
();

2023 ifĞ
xR‘uº
 =ğ
pdPASS
 )

2028 #ifdeà
FREERTOS_TASKS_C_ADDITIONS_INIT


2030 
	`ä“¹os_sks_c_add™iÚs_š™
();

2039 
	`pÜtDISABLE_INTERRUPTS
();

2041 #iàĞ
cÚfigUSE_NEWLIB_REENTRANT
 == 1 )

2047 
_impu»_±r
 = &Ğ
pxCu¼’tTCB
->
xNewLib_»’t
 );

2051 
xNextTaskUnblockTime
 = 
pÜtMAX_DELAY
;

2052 
xScheduËrRuÂšg
 = 
pdTRUE
;

2053 
xTickCouÁ
 = ( 
TickTy³_t
 ) 
cÚfigINITIAL_TICK_COUNT
;

2061 
	`pÜtCONFIGURE_TIMER_FOR_RUN_TIME_STATS
();

2063 
	`ŒaûTASK_SWITCHED_IN
();

2067 ifĞ
	`xPÜtS¹ScheduËr
(è!ğ
pdFALSE
 )

2082 
	`cÚfigASSERT
Ğ
xR‘uº
 !ğ
”rCOULD_NOT_ALLOCATE_REQUIRED_MEMORY
 );

2087 Ğè
xIdËTaskHªdË
;

2091 Ğè
uxTİU£dPriÜ™y
;

2092 
	}
}

2095 
	$vTaskEndScheduËr
( )

2100 
	`pÜtDISABLE_INTERRUPTS
();

2101 
xScheduËrRuÂšg
 = 
pdFALSE
;

2102 
	`vPÜtEndScheduËr
();

2103 
	}
}

2106 
	$vTaskSu¥’dAÎ
( )

2115 
	`pÜtSOFTWARE_BARRIER
();

2119 ++
uxScheduËrSu¥’ded
;

2123 
	`pÜtMEMORY_BARRIER
();

2124 
	}
}

2127 #iàĞ
cÚfigUSE_TICKLESS_IDLE
 != 0 )

2129 
TickTy³_t
 
	$´vG‘Ex³ùedIdËTime
( )

2131 
TickTy³_t
 
xR‘uº
;

2132 
UBa£Ty³_t
 
uxHigh”PriÜ™yR—dyTasks
 = 
pdFALSE
;

2138 #iàĞ
cÚfigUSE_PORT_OPTIMISED_TASK_SELECTION
 == 0 )

2140 ifĞ
uxTİR—dyPriÜ™y
 > 
tskIDLE_PRIORITY
 )

2142 
uxHigh”PriÜ™yR—dyTasks
 = 
pdTRUE
;

2147 cÚ¡ 
UBa£Ty³_t
 
uxL—¡SignifiÿÁB™
 = ( UBaseType_t ) 0x01;

2154 ifĞ
uxTİR—dyPriÜ™y
 > 
uxL—¡SignifiÿÁB™
 )

2156 
uxHigh”PriÜ™yR—dyTasks
 = 
pdTRUE
;

2161 ifĞ
pxCu¼’tTCB
->
uxPriÜ™y
 > 
tskIDLE_PRIORITY
 )

2163 
xR‘uº
 = 0;

2165 ifĞ
	`li¡CURRENT_LIST_LENGTH
Ğ&Ğ
pxR—dyTasksLi¡s
[ 
tskIDLE_PRIORITY
 ] ) ) > 1 )

2170 
xR‘uº
 = 0;

2172 ifĞ
uxHigh”PriÜ™yR—dyTasks
 !ğ
pdFALSE
 )

2177 
xR‘uº
 = 0;

2181 
xR‘uº
 = 
xNextTaskUnblockTime
 - 
xTickCouÁ
;

2184  
xR‘uº
;

2185 
	}
}

2190 
Ba£Ty³_t
 
	$xTaskResumeAÎ
( )

2192 
TCB_t
 * 
pxTCB
 = 
NULL
;

2193 
Ba£Ty³_t
 
xAÌ—dyY›lded
 = 
pdFALSE
;

2197 
	`cÚfigASSERT
Ğ
uxScheduËrSu¥’ded
 );

2204 
	`skENTER_CRITICAL
();

2206 --
uxScheduËrSu¥’ded
;

2208 ifĞ
uxScheduËrSu¥’ded
 =ğĞ
UBa£Ty³_t
 ) 
pdFALSE
 )

2210 ifĞ
uxCu¼’tNumb”OfTasks
 > ( 
UBa£Ty³_t
 ) 0U )

2214  
	`li¡LIST_IS_EMPTY
Ğ&
xP’dšgR—dyLi¡
 ) =ğ
pdFALSE
 )

2216 
pxTCB
 = 
	`li¡GET_OWNER_OF_HEAD_ENTRY
ĞĞ&
xP’dšgR—dyLi¡
 ) );

2217 
	`li¡REMOVE_ITEM
Ğ&Ğ
pxTCB
->
xEv’tLi¡I‹m
 ) );

2218 
	`pÜtMEMORY_BARRIER
();

2219 
	`li¡REMOVE_ITEM
Ğ&Ğ
pxTCB
->
xS‹Li¡I‹m
 ) );

2220 
	`´vAddTaskToR—dyLi¡
Ğ
pxTCB
 );

2224 ifĞ
pxTCB
->
uxPriÜ™y
 >ğ
pxCu¼’tTCB
->uxPriority )

2226 
xY›ldP’dšg
 = 
pdTRUE
;

2230 
	`mtCOVERAGE_TEST_MARKER
();

2234 ifĞ
pxTCB
 !ğ
NULL
 )

2242 
	`´vRe£tNextTaskUnblockTime
();

2250 
TickTy³_t
 
xP’dedCouÁs
 = 
xP’dedTicks
;

2252 ifĞ
xP’dedCouÁs
 > ( 
TickTy³_t
 ) 0U )

2256 ifĞ
	`xTaskInüem’tTick
(è!ğ
pdFALSE
 )

2258 
xY›ldP’dšg
 = 
pdTRUE
;

2262 
	`mtCOVERAGE_TEST_MARKER
();

2265 --
xP’dedCouÁs
;

2266 }  
xP’dedCouÁs
 > ( 
TickTy³_t
 ) 0U );

2268 
xP’dedTicks
 = 0;

2272 
	`mtCOVERAGE_TEST_MARKER
();

2276 ifĞ
xY›ldP’dšg
 !ğ
pdFALSE
 )

2278 #iàĞ
cÚfigUSE_PREEMPTION
 != 0 )

2280 
xAÌ—dyY›lded
 = 
pdTRUE
;

2283 
	`skYIELD_IF_USING_PREEMPTION
();

2287 
	`mtCOVERAGE_TEST_MARKER
();

2293 
	`mtCOVERAGE_TEST_MARKER
();

2296 
	`skEXIT_CRITICAL
();

2298  
xAÌ—dyY›lded
;

2299 
	}
}

2302 
TickTy³_t
 
	$xTaskG‘TickCouÁ
( )

2304 
TickTy³_t
 
xTicks
;

2307 
	`pÜtTICK_TYPE_ENTER_CRITICAL
();

2309 
xTicks
 = 
xTickCouÁ
;

2311 
	`pÜtTICK_TYPE_EXIT_CRITICAL
();

2313  
xTicks
;

2314 
	}
}

2317 
TickTy³_t
 
	$xTaskG‘TickCouÁFromISR
( )

2319 
TickTy³_t
 
xR‘uº
;

2320 
UBa£Ty³_t
 
uxSavedIÁ”ru±Stus
;

2336 
	`pÜtASSERT_IF_INTERRUPT_PRIORITY_INVALID
();

2338 
uxSavedIÁ”ru±Stus
 = 
	`pÜtTICK_TYPE_SET_INTERRUPT_MASK_FROM_ISR
();

2340 
xR‘uº
 = 
xTickCouÁ
;

2342 
	`pÜtTICK_TYPE_CLEAR_INTERRUPT_MASK_FROM_ISR
Ğ
uxSavedIÁ”ru±Stus
 );

2344  
xR‘uº
;

2345 
	}
}

2348 
UBa£Ty³_t
 
	$uxTaskG‘Numb”OfTasks
( )

2352  
uxCu¼’tNumb”OfTasks
;

2353 
	}
}

2356 * 
	$pcTaskG‘Name
Ğ
TaskHªdË_t
 
xTaskToQu”y
 )

2358 
TCB_t
 * 
pxTCB
;

2362 
pxTCB
 = 
	`´vG‘TCBFromHªdË
Ğ
xTaskToQu”y
 );

2363 
	`cÚfigASSERT
Ğ
pxTCB
 );

2364  &Ğ
pxTCB
->
pcTaskName
[ 0 ] );

2365 
	}
}

2368 #iàĞ
INCLUDE_xTaskG‘HªdË
 == 1 )

2370 
TCB_t
 * 
	$´vS—rchFÜNameW™hšSšgËLi¡
Ğ
Li¡_t
 * 
pxLi¡
,

2371 cÚ¡ 
pcNameToQu”y
[] )

2373 
TCB_t
 * 
pxNextTCB
, * 
pxFœ¡TCB
, * 
pxR‘uº
 = 
NULL
;

2374 
UBa£Ty³_t
 
x
;

2375 
cNextCh¬
;

2376 
Ba£Ty³_t
 
xB»akLoİ
;

2380 ifĞ
	`li¡CURRENT_LIST_LENGTH
Ğ
pxLi¡
 ) > ( 
UBa£Ty³_t
 ) 0 )

2382 
	`li¡GET_OWNER_OF_NEXT_ENTRY
Ğ
pxFœ¡TCB
, 
pxLi¡
 );

2386 
	`li¡GET_OWNER_OF_NEXT_ENTRY
Ğ
pxNextTCB
, 
pxLi¡
 );

2390 
xB»akLoİ
 = 
pdFALSE
;

2392  
x
 = ( 
UBa£Ty³_t
 ) 0; x < ( UBa£Ty³_ˆè
cÚfigMAX_TASK_NAME_LEN
; x++ )

2394 
cNextCh¬
 = 
pxNextTCB
->
pcTaskName
[ 
x
 ];

2396 ifĞ
cNextCh¬
 !ğ
pcNameToQu”y
[ 
x
 ] )

2399 
xB»akLoİ
 = 
pdTRUE
;

2401 ifĞ
cNextCh¬
 == ( ) 0x00 )

2405 
pxR‘uº
 = 
pxNextTCB
;

2406 
xB»akLoİ
 = 
pdTRUE
;

2410 
	`mtCOVERAGE_TEST_MARKER
();

2413 ifĞ
xB»akLoİ
 !ğ
pdFALSE
 )

2419 ifĞ
pxR‘uº
 !ğ
NULL
 )

2424 }  
pxNextTCB
 !ğ
pxFœ¡TCB
 );

2428 
	`mtCOVERAGE_TEST_MARKER
();

2431  
pxR‘uº
;

2432 
	}
}

2437 #iàĞ
INCLUDE_xTaskG‘HªdË
 == 1 )

2439 
TaskHªdË_t
 
	$xTaskG‘HªdË
ĞcÚ¡ * 
pcNameToQu”y
 )

2441 
UBa£Ty³_t
 
uxQueue
 = 
cÚfigMAX_PRIORITIES
;

2442 
TCB_t
 * 
pxTCB
;

2445 
	`cÚfigASSERT
Ğ
	`¡¾’
Ğ
pcNameToQu”y
 ) < 
cÚfigMAX_TASK_NAME_LEN
 );

2447 
	`vTaskSu¥’dAÎ
();

2452 
uxQueue
--;

2453 
pxTCB
 = 
	`´vS—rchFÜNameW™hšSšgËLi¡
ĞĞ
Li¡_t
 * ) &Ğ
pxR—dyTasksLi¡s
[ 
uxQueue
 ] ), 
pcNameToQu”y
 );

2455 ifĞ
pxTCB
 !ğ
NULL
 )

2460 }  
uxQueue
 > ( 
UBa£Ty³_t
 ) 
tskIDLE_PRIORITY
 );

2463 ifĞ
pxTCB
 =ğ
NULL
 )

2465 
pxTCB
 = 
	`´vS—rchFÜNameW™hšSšgËLi¡
ĞĞ
Li¡_t
 * ) 
pxD–ayedTaskLi¡
, 
pcNameToQu”y
 );

2468 ifĞ
pxTCB
 =ğ
NULL
 )

2470 
pxTCB
 = 
	`´vS—rchFÜNameW™hšSšgËLi¡
ĞĞ
Li¡_t
 * ) 
pxOv”æowD–ayedTaskLi¡
, 
pcNameToQu”y
 );

2473 #iàĞ
INCLUDE_vTaskSu¥’d
 == 1 )

2475 ifĞ
pxTCB
 =ğ
NULL
 )

2478 
pxTCB
 = 
	`´vS—rchFÜNameW™hšSšgËLi¡
Ğ&
xSu¥’dedTaskLi¡
, 
pcNameToQu”y
 );

2483 #iàĞ
INCLUDE_vTaskD–‘e
 == 1 )

2485 ifĞ
pxTCB
 =ğ
NULL
 )

2488 
pxTCB
 = 
	`´vS—rchFÜNameW™hšSšgËLi¡
Ğ&
xTasksWa™šgT”mš©iÚ
, 
pcNameToQu”y
 );

2493 Ğè
	`xTaskResumeAÎ
();

2495  
pxTCB
;

2496 
	}
}

2501 #iàĞ
cÚfigUSE_TRACE_FACILITY
 == 1 )

2503 
UBa£Ty³_t
 
	$uxTaskG‘Sy¡emS‹
Ğ
TaskStus_t
 * cÚ¡ 
pxTaskStusA¼ay
,

2504 cÚ¡ 
UBa£Ty³_t
 
uxA¼aySize
,

2505 
cÚfigRUN_TIME_COUNTER_TYPE
 * cÚ¡ 
pulTÙ®RunTime
 )

2507 
UBa£Ty³_t
 
uxTask
 = 0, 
uxQueue
 = 
cÚfigMAX_PRIORITIES
;

2509 
	`vTaskSu¥’dAÎ
();

2512 ifĞ
uxA¼aySize
 >ğ
uxCu¼’tNumb”OfTasks
 )

2518 
uxQueue
--;

2519 
uxTask
 +ğ
	`´vLi¡TasksW™hšSšgËLi¡
Ğ&Ğ
pxTaskStusA¼ay
[ uxTask ] ), &Ğ
pxR—dyTasksLi¡s
[ 
uxQueue
 ] ), 
eR—dy
 );

2520 }  
uxQueue
 > ( 
UBa£Ty³_t
 ) 
tskIDLE_PRIORITY
 );

2524 
uxTask
 +ğ
	`´vLi¡TasksW™hšSšgËLi¡
Ğ&Ğ
pxTaskStusA¼ay
[ uxTask ] ), ( 
Li¡_t
 * ) 
pxD–ayedTaskLi¡
, 
eBlocked
 );

2525 
uxTask
 +ğ
	`´vLi¡TasksW™hšSšgËLi¡
Ğ&Ğ
pxTaskStusA¼ay
[ uxTask ] ), ( 
Li¡_t
 * ) 
pxOv”æowD–ayedTaskLi¡
, 
eBlocked
 );

2527 #iàĞ
INCLUDE_vTaskD–‘e
 == 1 )

2531 
uxTask
 +ğ
	`´vLi¡TasksW™hšSšgËLi¡
Ğ&Ğ
pxTaskStusA¼ay
[ uxTask ] ), &
xTasksWa™šgT”mš©iÚ
, 
eD–‘ed
 );

2535 #iàĞ
INCLUDE_vTaskSu¥’d
 == 1 )

2539 
uxTask
 +ğ
	`´vLi¡TasksW™hšSšgËLi¡
Ğ&Ğ
pxTaskStusA¼ay
[ uxTask ] ), &
xSu¥’dedTaskLi¡
, 
eSu¥’ded
 );

2543 #iàĞ
cÚfigGENERATE_RUN_TIME_STATS
 == 1 )

2545 ifĞ
pulTÙ®RunTime
 !ğ
NULL
 )

2547 #ifdeà
pÜtALT_GET_RUN_TIME_COUNTER_VALUE


2548 
	`pÜtALT_GET_RUN_TIME_COUNTER_VALUE
ĞĞ*
pulTÙ®RunTime
 ) );

2550 *
pulTÙ®RunTime
 = 
	`pÜtGET_RUN_TIME_COUNTER_VALUE
();

2556 ifĞ
pulTÙ®RunTime
 !ğ
NULL
 )

2558 *
pulTÙ®RunTime
 = 0;

2565 
	`mtCOVERAGE_TEST_MARKER
();

2568 Ğè
	`xTaskResumeAÎ
();

2570  
uxTask
;

2571 
	}
}

2576 #iàĞ
INCLUDE_xTaskG‘IdËTaskHªdË
 == 1 )

2578 
TaskHªdË_t
 
	$xTaskG‘IdËTaskHªdË
( )

2582 
	`cÚfigASSERT
ĞĞ
xIdËTaskHªdË
 !ğ
NULL
 ) );

2583  
xIdËTaskHªdË
;

2584 
	}
}

2593 #iàĞ
cÚfigUSE_TICKLESS_IDLE
 != 0 )

2595 
	$vTaskS‹pTick
ĞcÚ¡ 
TickTy³_t
 
xTicksToJump
 )

2600 
	`cÚfigASSERT
ĞĞ
xTickCouÁ
 + 
xTicksToJump
 ) <ğ
xNextTaskUnblockTime
 );

2601 
xTickCouÁ
 +ğ
xTicksToJump
;

2602 
	`ŒaûINCREASE_TICK_COUNT
Ğ
xTicksToJump
 );

2603 
	}
}

2608 
Ba£Ty³_t
 
	$xTaskC©chUpTicks
Ğ
TickTy³_t
 
xTicksToC©chUp
 )

2610 
Ba£Ty³_t
 
xY›ldOccu¼ed
;

2614 
	`cÚfigASSERT
Ğ
uxScheduËrSu¥’ded
 == 0 );

2618 
	`vTaskSu¥’dAÎ
();

2619 
xP’dedTicks
 +ğ
xTicksToC©chUp
;

2620 
xY›ldOccu¼ed
 = 
	`xTaskResumeAÎ
();

2622  
xY›ldOccu¼ed
;

2623 
	}
}

2626 #iàĞ
INCLUDE_xTaskAbÜtD–ay
 == 1 )

2628 
Ba£Ty³_t
 
	$xTaskAbÜtD–ay
Ğ
TaskHªdË_t
 
xTask
 )

2630 
TCB_t
 * 
pxTCB
 = 
xTask
;

2631 
Ba£Ty³_t
 
xR‘uº
;

2633 
	`cÚfigASSERT
Ğ
pxTCB
 );

2635 
	`vTaskSu¥’dAÎ
();

2639 ifĞ
	`eTaskG‘S‹
Ğ
xTask
 ) =ğ
eBlocked
 )

2641 
xR‘uº
 = 
pdPASS
;

2646 Ğè
	`uxLi¡Remove
Ğ&Ğ
pxTCB
->
xS‹Li¡I‹m
 ) );

2652 
	`skENTER_CRITICAL
();

2654 ifĞ
	`li¡LIST_ITEM_CONTAINER
Ğ&Ğ
pxTCB
->
xEv’tLi¡I‹m
 ) ) !ğ
NULL
 )

2656 Ğè
	`uxLi¡Remove
Ğ&Ğ
pxTCB
->
xEv’tLi¡I‹m
 ) );

2661 
pxTCB
->
ucD–ayAbÜ‹d
 = 
pdTRUE
;

2665 
	`mtCOVERAGE_TEST_MARKER
();

2668 
	`skEXIT_CRITICAL
();

2671 
	`´vAddTaskToR—dyLi¡
Ğ
pxTCB
 );

2675 #iàĞ
cÚfigUSE_PREEMPTION
 == 1 )

2680 ifĞ
pxTCB
->
uxPriÜ™y
 > 
pxCu¼’tTCB
->uxPriority )

2684 
xY›ldP’dšg
 = 
pdTRUE
;

2688 
	`mtCOVERAGE_TEST_MARKER
();

2695 
xR‘uº
 = 
pdFAIL
;

2698 Ğè
	`xTaskResumeAÎ
();

2700  
xR‘uº
;

2701 
	}
}

2706 
Ba£Ty³_t
 
	$xTaskInüem’tTick
( )

2708 
TCB_t
 * 
pxTCB
;

2709 
TickTy³_t
 
xI‹mV®ue
;

2710 
Ba£Ty³_t
 
xSw™chRequœed
 = 
pdFALSE
;

2715 
	`ŒaûTASK_INCREMENT_TICK
Ğ
xTickCouÁ
 );

2717 ifĞ
uxScheduËrSu¥’ded
 =ğĞ
UBa£Ty³_t
 ) 
pdFALSE
 )

2721 cÚ¡ 
TickTy³_t
 
xCÚ¡TickCouÁ
 = 
xTickCouÁ
 + ( TickType_t ) 1;

2725 
xTickCouÁ
 = 
xCÚ¡TickCouÁ
;

2727 ifĞ
xCÚ¡TickCouÁ
 =ğĞ
TickTy³_t
 ) 0U )

2729 
	`skSWITCH_DELAYED_LISTS
();

2733 
	`mtCOVERAGE_TEST_MARKER
();

2740 ifĞ
xCÚ¡TickCouÁ
 >ğ
xNextTaskUnblockTime
 )

2744 ifĞ
	`li¡LIST_IS_EMPTY
Ğ
pxD–ayedTaskLi¡
 ) !ğ
pdFALSE
 )

2751 
xNextTaskUnblockTime
 = 
pÜtMAX_DELAY
;

2760 
pxTCB
 = 
	`li¡GET_OWNER_OF_HEAD_ENTRY
Ğ
pxD–ayedTaskLi¡
 );

2761 
xI‹mV®ue
 = 
	`li¡GET_LIST_ITEM_VALUE
Ğ&Ğ
pxTCB
->
xS‹Li¡I‹m
 ) );

2763 ifĞ
xCÚ¡TickCouÁ
 < 
xI‹mV®ue
 )

2770 
xNextTaskUnblockTime
 = 
xI‹mV®ue
;

2775 
	`mtCOVERAGE_TEST_MARKER
();

2779 
	`li¡REMOVE_ITEM
Ğ&Ğ
pxTCB
->
xS‹Li¡I‹m
 ) );

2783 ifĞ
	`li¡LIST_ITEM_CONTAINER
Ğ&Ğ
pxTCB
->
xEv’tLi¡I‹m
 ) ) !ğ
NULL
 )

2785 
	`li¡REMOVE_ITEM
Ğ&Ğ
pxTCB
->
xEv’tLi¡I‹m
 ) );

2789 
	`mtCOVERAGE_TEST_MARKER
();

2794 
	`´vAddTaskToR—dyLi¡
Ğ
pxTCB
 );

2798 #iàĞ
cÚfigUSE_PREEMPTION
 == 1 )

2804 ifĞ
pxTCB
->
uxPriÜ™y
 >ğ
pxCu¼’tTCB
->uxPriority )

2806 
xSw™chRequœed
 = 
pdTRUE
;

2810 
	`mtCOVERAGE_TEST_MARKER
();

2821 #iàĞĞ
cÚfigUSE_PREEMPTION
 =ğ1 ) && ( 
cÚfigUSE_TIME_SLICING
 == 1 ) )

2823 ifĞ
	`li¡CURRENT_LIST_LENGTH
Ğ&Ğ
pxR—dyTasksLi¡s
[ 
pxCu¼’tTCB
->
uxPriÜ™y
 ] ) ) > ( 
UBa£Ty³_t
 ) 1 )

2825 
xSw™chRequœed
 = 
pdTRUE
;

2829 
	`mtCOVERAGE_TEST_MARKER
();

2834 #iàĞ
cÚfigUSE_TICK_HOOK
 == 1 )

2838 ifĞ
xP’dedTicks
 =ğĞ
TickTy³_t
 ) 0 )

2840 
	`vAµliÿtiÚTickHook
();

2844 
	`mtCOVERAGE_TEST_MARKER
();

2849 #iàĞ
cÚfigUSE_PREEMPTION
 == 1 )

2851 ifĞ
xY›ldP’dšg
 !ğ
pdFALSE
 )

2853 
xSw™chRequœed
 = 
pdTRUE
;

2857 
	`mtCOVERAGE_TEST_MARKER
();

2864 ++
xP’dedTicks
;

2868 #iàĞ
cÚfigUSE_TICK_HOOK
 == 1 )

2870 
	`vAµliÿtiÚTickHook
();

2875  
xSw™chRequœed
;

2876 
	}
}

2879 #iàĞ
cÚfigUSE_APPLICATION_TASK_TAG
 == 1 )

2881 
	$vTaskS‘AµliÿtiÚTaskTag
Ğ
TaskHªdË_t
 
xTask
,

2882 
TaskHookFunùiÚ_t
 
pxHookFunùiÚ
 )

2884 
TCB_t
 * 
xTCB
;

2888 ifĞ
xTask
 =ğ
NULL
 )

2890 
xTCB
 = ( 
TCB_t
 * ) 
pxCu¼’tTCB
;

2894 
xTCB
 = 
xTask
;

2899 
	`skENTER_CRITICAL
();

2901 
xTCB
->
pxTaskTag
 = 
pxHookFunùiÚ
;

2903 
	`skEXIT_CRITICAL
();

2904 
	}
}

2909 #iàĞ
cÚfigUSE_APPLICATION_TASK_TAG
 == 1 )

2911 
TaskHookFunùiÚ_t
 
	$xTaskG‘AµliÿtiÚTaskTag
Ğ
TaskHªdË_t
 
xTask
 )

2913 
TCB_t
 * 
pxTCB
;

2914 
TaskHookFunùiÚ_t
 
xR‘uº
;

2917 
pxTCB
 = 
	`´vG‘TCBFromHªdË
Ğ
xTask
 );

2921 
	`skENTER_CRITICAL
();

2923 
xR‘uº
 = 
pxTCB
->
pxTaskTag
;

2925 
	`skEXIT_CRITICAL
();

2927  
xR‘uº
;

2928 
	}
}

2933 #iàĞ
cÚfigUSE_APPLICATION_TASK_TAG
 == 1 )

2935 
TaskHookFunùiÚ_t
 
	$xTaskG‘AµliÿtiÚTaskTagFromISR
Ğ
TaskHªdË_t
 
xTask
 )

2937 
TCB_t
 * 
pxTCB
;

2938 
TaskHookFunùiÚ_t
 
xR‘uº
;

2939 
UBa£Ty³_t
 
uxSavedIÁ”ru±Stus
;

2942 
pxTCB
 = 
	`´vG‘TCBFromHªdË
Ğ
xTask
 );

2946 
uxSavedIÁ”ru±Stus
 = 
	`pÜtSET_INTERRUPT_MASK_FROM_ISR
();

2948 
xR‘uº
 = 
pxTCB
->
pxTaskTag
;

2950 
	`pÜtCLEAR_INTERRUPT_MASK_FROM_ISR
Ğ
uxSavedIÁ”ru±Stus
 );

2952  
xR‘uº
;

2953 
	}
}

2958 #iàĞ
cÚfigUSE_APPLICATION_TASK_TAG
 == 1 )

2960 
Ba£Ty³_t
 
	$xTaskC®lAµliÿtiÚTaskHook
Ğ
TaskHªdË_t
 
xTask
,

2961 * 
pvP¬am‘”
 )

2963 
TCB_t
 * 
xTCB
;

2964 
Ba£Ty³_t
 
xR‘uº
;

2967 ifĞ
xTask
 =ğ
NULL
 )

2969 
xTCB
 = 
pxCu¼’tTCB
;

2973 
xTCB
 = 
xTask
;

2976 ifĞ
xTCB
->
pxTaskTag
 !ğ
NULL
 )

2978 
xR‘uº
 = 
xTCB
->
	`pxTaskTag
Ğ
pvP¬am‘”
 );

2982 
xR‘uº
 = 
pdFAIL
;

2985  
xR‘uº
;

2986 
	}
}

2991 
	$vTaskSw™chCÚ‹xt
( )

2993 ifĞ
uxScheduËrSu¥’ded
 !ğĞ
UBa£Ty³_t
 ) 
pdFALSE
 )

2997 
xY›ldP’dšg
 = 
pdTRUE
;

3001 
xY›ldP’dšg
 = 
pdFALSE
;

3002 
	`ŒaûTASK_SWITCHED_OUT
();

3004 #iàĞ
cÚfigGENERATE_RUN_TIME_STATS
 == 1 )

3006 #ifdeà
pÜtALT_GET_RUN_TIME_COUNTER_VALUE


3007 
	`pÜtALT_GET_RUN_TIME_COUNTER_VALUE
Ğ
ulTÙ®RunTime
 );

3009 
ulTÙ®RunTime
 = 
	`pÜtGET_RUN_TIME_COUNTER_VALUE
();

3019 ifĞ
ulTÙ®RunTime
 > 
ulTaskSw™chedInTime
 )

3021 
pxCu¼’tTCB
->
ulRunTimeCouÁ”
 +ğĞ
ulTÙ®RunTime
 - 
ulTaskSw™chedInTime
 );

3025 
	`mtCOVERAGE_TEST_MARKER
();

3028 
ulTaskSw™chedInTime
 = 
ulTÙ®RunTime
;

3033 
	`skCHECK_FOR_STACK_OVERFLOW
();

3036 #iàĞ
cÚfigUSE_POSIX_ERRNO
 == 1 )

3038 
pxCu¼’tTCB
->
iTaskE¼no
 = 
F»eRTOS_”ºo
;

3044 
	`skSELECT_HIGHEST_PRIORITY_TASK
();

3045 
	`ŒaûTASK_SWITCHED_IN
();

3048 #iàĞ
cÚfigUSE_POSIX_ERRNO
 == 1 )

3050 
F»eRTOS_”ºo
 = 
pxCu¼’tTCB
->
iTaskE¼no
;

3054 #iàĞ
cÚfigUSE_NEWLIB_REENTRANT
 == 1 )

3060 
_impu»_±r
 = &Ğ
pxCu¼’tTCB
->
xNewLib_»’t
 );

3064 
	}
}

3067 
	$vTaskPÏûOnEv’tLi¡
Ğ
Li¡_t
 * cÚ¡ 
pxEv’tLi¡
,

3068 cÚ¡ 
TickTy³_t
 
xTicksToWa™
 )

3070 
	`cÚfigASSERT
Ğ
pxEv’tLi¡
 );

3086 
	`vLi¡In£¹
Ğ
pxEv’tLi¡
, &Ğ
pxCu¼’tTCB
->
xEv’tLi¡I‹m
 ) );

3088 
	`´vAddCu¼’tTaskToD–ayedLi¡
Ğ
xTicksToWa™
, 
pdTRUE
 );

3089 
	}
}

3092 
	$vTaskPÏûOnUnÜd”edEv’tLi¡
Ğ
Li¡_t
 * 
pxEv’tLi¡
,

3093 cÚ¡ 
TickTy³_t
 
xI‹mV®ue
,

3094 cÚ¡ 
TickTy³_t
 
xTicksToWa™
 )

3096 
	`cÚfigASSERT
Ğ
pxEv’tLi¡
 );

3100 
	`cÚfigASSERT
Ğ
uxScheduËrSu¥’ded
 != 0 );

3105 
	`li¡SET_LIST_ITEM_VALUE
Ğ&Ğ
pxCu¼’tTCB
->
xEv’tLi¡I‹m
 ), 
xI‹mV®ue
 | 
skEVENT_LIST_ITEM_VALUE_IN_USE
 );

3112 
	`li¡INSERT_END
Ğ
pxEv’tLi¡
, &Ğ
pxCu¼’tTCB
->
xEv’tLi¡I‹m
 ) );

3114 
	`´vAddCu¼’tTaskToD–ayedLi¡
Ğ
xTicksToWa™
, 
pdTRUE
 );

3115 
	}
}

3118 #iàĞ
cÚfigUSE_TIMERS
 == 1 )

3120 
	$vTaskPÏûOnEv’tLi¡Re¡riùed
Ğ
Li¡_t
 * cÚ¡ 
pxEv’tLi¡
,

3121 
TickTy³_t
 
xTicksToWa™
,

3122 cÚ¡ 
Ba£Ty³_t
 
xWa™Indefš™–y
 )

3124 
	`cÚfigASSERT
Ğ
pxEv’tLi¡
 );

3136 
	`li¡INSERT_END
Ğ
pxEv’tLi¡
, &Ğ
pxCu¼’tTCB
->
xEv’tLi¡I‹m
 ) );

3141 ifĞ
xWa™Indefš™–y
 !ğ
pdFALSE
 )

3143 
xTicksToWa™
 = 
pÜtMAX_DELAY
;

3146 
	`ŒaûTASK_DELAY_UNTIL
ĞĞ
xTickCouÁ
 + 
xTicksToWa™
 ) );

3147 
	`´vAddCu¼’tTaskToD–ayedLi¡
Ğ
xTicksToWa™
, 
xWa™Indefš™–y
 );

3148 
	}
}

3153 
Ba£Ty³_t
 
	$xTaskRemoveFromEv’tLi¡
ĞcÚ¡ 
Li¡_t
 * cÚ¡ 
pxEv’tLi¡
 )

3155 
TCB_t
 * 
pxUnblockedTCB
;

3156 
Ba£Ty³_t
 
xR‘uº
;

3171 
pxUnblockedTCB
 = 
	`li¡GET_OWNER_OF_HEAD_ENTRY
Ğ
pxEv’tLi¡
 );

3172 
	`cÚfigASSERT
Ğ
pxUnblockedTCB
 );

3173 
	`li¡REMOVE_ITEM
Ğ&Ğ
pxUnblockedTCB
->
xEv’tLi¡I‹m
 ) );

3175 ifĞ
uxScheduËrSu¥’ded
 =ğĞ
UBa£Ty³_t
 ) 
pdFALSE
 )

3177 
	`li¡REMOVE_ITEM
Ğ&Ğ
pxUnblockedTCB
->
xS‹Li¡I‹m
 ) );

3178 
	`´vAddTaskToR—dyLi¡
Ğ
pxUnblockedTCB
 );

3180 #iàĞ
cÚfigUSE_TICKLESS_IDLE
 != 0 )

3190 
	`´vRe£tNextTaskUnblockTime
();

3198 
	`li¡INSERT_END
Ğ&Ğ
xP’dšgR—dyLi¡
 ), &Ğ
pxUnblockedTCB
->
xEv’tLi¡I‹m
 ) );

3201 ifĞ
pxUnblockedTCB
->
uxPriÜ™y
 > 
pxCu¼’tTCB
->uxPriority )

3206 
xR‘uº
 = 
pdTRUE
;

3210 
xY›ldP’dšg
 = 
pdTRUE
;

3214 
xR‘uº
 = 
pdFALSE
;

3217  
xR‘uº
;

3218 
	}
}

3221 
	$vTaskRemoveFromUnÜd”edEv’tLi¡
Ğ
Li¡I‹m_t
 * 
pxEv’tLi¡I‹m
,

3222 cÚ¡ 
TickTy³_t
 
xI‹mV®ue
 )

3224 
TCB_t
 * 
pxUnblockedTCB
;

3228 
	`cÚfigASSERT
Ğ
uxScheduËrSu¥’ded
 !ğ
pdFALSE
 );

3231 
	`li¡SET_LIST_ITEM_VALUE
Ğ
pxEv’tLi¡I‹m
, 
xI‹mV®ue
 | 
skEVENT_LIST_ITEM_VALUE_IN_USE
 );

3235 
pxUnblockedTCB
 = 
	`li¡GET_LIST_ITEM_OWNER
Ğ
pxEv’tLi¡I‹m
 );

3236 
	`cÚfigASSERT
Ğ
pxUnblockedTCB
 );

3237 
	`li¡REMOVE_ITEM
Ğ
pxEv’tLi¡I‹m
 );

3239 #iàĞ
cÚfigUSE_TICKLESS_IDLE
 != 0 )

3249 
	`´vRe£tNextTaskUnblockTime
();

3256 
	`li¡REMOVE_ITEM
Ğ&Ğ
pxUnblockedTCB
->
xS‹Li¡I‹m
 ) );

3257 
	`´vAddTaskToR—dyLi¡
Ğ
pxUnblockedTCB
 );

3259 ifĞ
pxUnblockedTCB
->
uxPriÜ™y
 > 
pxCu¼’tTCB
->uxPriority )

3265 
xY›ldP’dšg
 = 
pdTRUE
;

3267 
	}
}

3270 
	$vTaskS‘TimeOutS‹
Ğ
TimeOut_t
 * cÚ¡ 
pxTimeOut
 )

3272 
	`cÚfigASSERT
Ğ
pxTimeOut
 );

3273 
	`skENTER_CRITICAL
();

3275 
pxTimeOut
->
xOv”æowCouÁ
 = 
xNumOfOv”æows
;

3276 
pxTimeOut
->
xTimeOnEÁ”šg
 = 
xTickCouÁ
;

3278 
	`skEXIT_CRITICAL
();

3279 
	}
}

3282 
	$vTaskIÁ”ÇlS‘TimeOutS‹
Ğ
TimeOut_t
 * cÚ¡ 
pxTimeOut
 )

3285 
pxTimeOut
->
xOv”æowCouÁ
 = 
xNumOfOv”æows
;

3286 
pxTimeOut
->
xTimeOnEÁ”šg
 = 
xTickCouÁ
;

3287 
	}
}

3290 
Ba£Ty³_t
 
	$xTaskCheckFÜTimeOut
Ğ
TimeOut_t
 * cÚ¡ 
pxTimeOut
,

3291 
TickTy³_t
 * cÚ¡ 
pxTicksToWa™
 )

3293 
Ba£Ty³_t
 
xR‘uº
;

3295 
	`cÚfigASSERT
Ğ
pxTimeOut
 );

3296 
	`cÚfigASSERT
Ğ
pxTicksToWa™
 );

3298 
	`skENTER_CRITICAL
();

3301 cÚ¡ 
TickTy³_t
 
xCÚ¡TickCouÁ
 = 
xTickCouÁ
;

3302 cÚ¡ 
TickTy³_t
 
xEÏp£dTime
 = 
xCÚ¡TickCouÁ
 - 
pxTimeOut
->
xTimeOnEÁ”šg
;

3304 #iàĞ
INCLUDE_xTaskAbÜtD–ay
 == 1 )

3305 ifĞ
pxCu¼’tTCB
->
ucD–ayAbÜ‹d
 !ğĞ
ušt8_t
 ) 
pdFALSE
 )

3309 
pxCu¼’tTCB
->
ucD–ayAbÜ‹d
 = 
pdFALSE
;

3310 
xR‘uº
 = 
pdTRUE
;

3315 #iàĞ
INCLUDE_vTaskSu¥’d
 == 1 )

3316 ifĞ*
pxTicksToWa™
 =ğ
pÜtMAX_DELAY
 )

3321 
xR‘uº
 = 
pdFALSE
;

3326 ifĞĞ
xNumOfOv”æows
 !ğ
pxTimeOut
->
xOv”æowCouÁ
 ) && ( 
xCÚ¡TickCouÁ
 >ğpxTimeOut->
xTimeOnEÁ”šg
 ) )

3333 
xR‘uº
 = 
pdTRUE
;

3334 *
pxTicksToWa™
 = ( 
TickTy³_t
 ) 0;

3336 ifĞ
xEÏp£dTime
 < *
pxTicksToWa™
 )

3339 *
pxTicksToWa™
 -ğ
xEÏp£dTime
;

3340 
	`vTaskIÁ”ÇlS‘TimeOutS‹
Ğ
pxTimeOut
 );

3341 
xR‘uº
 = 
pdFALSE
;

3345 *
pxTicksToWa™
 = ( 
TickTy³_t
 ) 0;

3346 
xR‘uº
 = 
pdTRUE
;

3349 
	`skEXIT_CRITICAL
();

3351  
xR‘uº
;

3352 
	}
}

3355 
	$vTaskMis£dY›ld
( )

3357 
xY›ldP’dšg
 = 
pdTRUE
;

3358 
	}
}

3361 #iàĞ
cÚfigUSE_TRACE_FACILITY
 == 1 )

3363 
UBa£Ty³_t
 
	$uxTaskG‘TaskNumb”
Ğ
TaskHªdË_t
 
xTask
 )

3365 
UBa£Ty³_t
 
uxR‘uº
;

3366 
TCB_t
 cÚ¡ * 
pxTCB
;

3368 ifĞ
xTask
 !ğ
NULL
 )

3370 
pxTCB
 = 
xTask
;

3371 
uxR‘uº
 = 
pxTCB
->
uxTaskNumb”
;

3375 
uxR‘uº
 = 0U;

3378  
uxR‘uº
;

3379 
	}
}

3384 #iàĞ
cÚfigUSE_TRACE_FACILITY
 == 1 )

3386 
	$vTaskS‘TaskNumb”
Ğ
TaskHªdË_t
 
xTask
,

3387 cÚ¡ 
UBa£Ty³_t
 
uxHªdË
 )

3389 
TCB_t
 * 
pxTCB
;

3391 ifĞ
xTask
 !ğ
NULL
 )

3393 
pxTCB
 = 
xTask
;

3394 
pxTCB
->
uxTaskNumb”
 = 
uxHªdË
;

3396 
	}
}

3411 
	$pÜtTASK_FUNCTION
Ğ
´vIdËTask
, 
pvP¬am‘”s
 )

3414 Ğè
pvP¬am‘”s
;

3422 
	`pÜtALLOCATE_SECURE_CONTEXT
Ğ
cÚfigMINIMAL_SECURE_STACK_SIZE
 );

3428 
	`´vCheckTasksWa™šgT”mš©iÚ
();

3430 #iàĞ
cÚfigUSE_PREEMPTION
 == 0 )

3436 
	`skYIELD
();

3440 #iàĞĞ
cÚfigUSE_PREEMPTION
 =ğ1 ) && ( 
cÚfigIDLE_SHOULD_YIELD
 == 1 ) )

3451 ifĞ
	`li¡CURRENT_LIST_LENGTH
Ğ&Ğ
pxR—dyTasksLi¡s
[ 
tskIDLE_PRIORITY
 ] ) ) > ( 
UBa£Ty³_t
 ) 1 )

3453 
	`skYIELD
();

3457 
	`mtCOVERAGE_TEST_MARKER
();

3462 #iàĞ
cÚfigUSE_IDLE_HOOK
 == 1 )

3464 
	`vAµliÿtiÚIdËHook
( );

3471 
	`vAµliÿtiÚIdËHook
();

3479 #iàĞ
cÚfigUSE_TICKLESS_IDLE
 != 0 )

3481 
TickTy³_t
 
xEx³ùedIdËTime
;

3488 
xEx³ùedIdËTime
 = 
	`´vG‘Ex³ùedIdËTime
();

3490 ifĞ
xEx³ùedIdËTime
 >ğ
cÚfigEXPECTED_IDLE_TIME_BEFORE_SLEEP
 )

3492 
	`vTaskSu¥’dAÎ
();

3497 
	`cÚfigASSERT
Ğ
xNextTaskUnblockTime
 >ğ
xTickCouÁ
 );

3498 
xEx³ùedIdËTime
 = 
	`´vG‘Ex³ùedIdËTime
();

3503 
	`cÚfigPRE_SUPPRESS_TICKS_AND_SLEEP_PROCESSING
Ğ
xEx³ùedIdËTime
 );

3505 ifĞ
xEx³ùedIdËTime
 >ğ
cÚfigEXPECTED_IDLE_TIME_BEFORE_SLEEP
 )

3507 
	`ŒaûLOW_POWER_IDLE_BEGIN
();

3508 
	`pÜtSUPPRESS_TICKS_AND_SLEEP
Ğ
xEx³ùedIdËTime
 );

3509 
	`ŒaûLOW_POWER_IDLE_END
();

3513 
	`mtCOVERAGE_TEST_MARKER
();

3516 Ğè
	`xTaskResumeAÎ
();

3520 
	`mtCOVERAGE_TEST_MARKER
();

3525 
	}
}

3528 #iàĞ
cÚfigUSE_TICKLESS_IDLE
 != 0 )

3530 
eSË•ModeStus
 
	$eTaskCÚfœmSË•ModeStus
( )

3532 #iàĞ
INCLUDE_vTaskSu¥’d
 == 1 )

3534 cÚ¡ 
UBa£Ty³_t
 
uxNÚAµliÿtiÚTasks
 = 1;

3537 
eSË•ModeStus
 
eR‘uº
 = 
eSnd¬dSË•
;

3541 ifĞ
	`li¡CURRENT_LIST_LENGTH
Ğ&
xP’dšgR—dyLi¡
 ) != 0 )

3544 
eR‘uº
 = 
eAbÜtSË•
;

3546 ifĞ
xY›ldP’dšg
 !ğ
pdFALSE
 )

3549 
eR‘uº
 = 
eAbÜtSË•
;

3551 ifĞ
xP’dedTicks
 != 0 )

3555 
eR‘uº
 = 
eAbÜtSË•
;

3558 #iàĞ
INCLUDE_vTaskSu¥’d
 == 1 )

3559 ifĞ
	`li¡CURRENT_LIST_LENGTH
Ğ&
xSu¥’dedTaskLi¡
 ) =ğĞ
uxCu¼’tNumb”OfTasks
 - 
uxNÚAµliÿtiÚTasks
 ) )

3565 
eR‘uº
 = 
eNoTasksWa™šgTimeout
;

3570 
	`mtCOVERAGE_TEST_MARKER
();

3573  
eR‘uº
;

3574 
	}
}

3579 #iàĞ
cÚfigNUM_THREAD_LOCAL_STORAGE_POINTERS
 != 0 )

3581 
	$vTaskS‘Th»adLoÿlStÜagePoš‹r
Ğ
TaskHªdË_t
 
xTaskToS‘
,

3582 
Ba£Ty³_t
 
xIndex
,

3583 * 
pvV®ue
 )

3585 
TCB_t
 * 
pxTCB
;

3587 ifĞ
xIndex
 < 
cÚfigNUM_THREAD_LOCAL_STORAGE_POINTERS
 )

3589 
pxTCB
 = 
	`´vG‘TCBFromHªdË
Ğ
xTaskToS‘
 );

3590 
	`cÚfigASSERT
Ğ
pxTCB
 !ğ
NULL
 );

3591 
pxTCB
->
pvTh»adLoÿlStÜagePoš‹rs
[ 
xIndex
 ] = 
pvV®ue
;

3593 
	}
}

3598 #iàĞ
cÚfigNUM_THREAD_LOCAL_STORAGE_POINTERS
 != 0 )

3600 * 
	$pvTaskG‘Th»adLoÿlStÜagePoš‹r
Ğ
TaskHªdË_t
 
xTaskToQu”y
,

3601 
Ba£Ty³_t
 
xIndex
 )

3603 * 
pvR‘uº
 = 
NULL
;

3604 
TCB_t
 * 
pxTCB
;

3606 ifĞ
xIndex
 < 
cÚfigNUM_THREAD_LOCAL_STORAGE_POINTERS
 )

3608 
pxTCB
 = 
	`´vG‘TCBFromHªdË
Ğ
xTaskToQu”y
 );

3609 
pvR‘uº
 = 
pxTCB
->
pvTh»adLoÿlStÜagePoš‹rs
[ 
xIndex
 ];

3613 
pvR‘uº
 = 
NULL
;

3616  
pvR‘uº
;

3617 
	}
}

3622 #iàĞ
pÜtUSING_MPU_WRAPPERS
 == 1 )

3624 
	$vTaskAÎoÿ‹MPURegiÚs
Ğ
TaskHªdË_t
 
xTaskToModify
,

3625 cÚ¡ 
MemÜyRegiÚ_t
 * cÚ¡ 
xRegiÚs
 )

3627 
TCB_t
 * 
pxTCB
;

3631 
pxTCB
 = 
	`´vG‘TCBFromHªdË
Ğ
xTaskToModify
 );

3633 
	`vPÜtStÜeTaskMPUS‘tšgs
Ğ&Ğ
pxTCB
->
xMPUS‘tšgs
 ), 
xRegiÚs
, 
NULL
, 0 );

3634 
	}
}

3639 
	$´vIn™Ÿli£TaskLi¡s
( )

3641 
UBa£Ty³_t
 
uxPriÜ™y
;

3643  
uxPriÜ™y
 = ( 
UBa£Ty³_t
 ) 0U; uxPriÜ™y < ( UBa£Ty³_ˆè
cÚfigMAX_PRIORITIES
; uxPriority++ )

3645 
	`vLi¡In™Ÿli£
Ğ&Ğ
pxR—dyTasksLi¡s
[ 
uxPriÜ™y
 ] ) );

3648 
	`vLi¡In™Ÿli£
Ğ&
xD–ayedTaskLi¡1
 );

3649 
	`vLi¡In™Ÿli£
Ğ&
xD–ayedTaskLi¡2
 );

3650 
	`vLi¡In™Ÿli£
Ğ&
xP’dšgR—dyLi¡
 );

3652 #iàĞ
INCLUDE_vTaskD–‘e
 == 1 )

3654 
	`vLi¡In™Ÿli£
Ğ&
xTasksWa™šgT”mš©iÚ
 );

3658 #iàĞ
INCLUDE_vTaskSu¥’d
 == 1 )

3660 
	`vLi¡In™Ÿli£
Ğ&
xSu¥’dedTaskLi¡
 );

3666 
pxD–ayedTaskLi¡
 = &
xD–ayedTaskLi¡1
;

3667 
pxOv”æowD–ayedTaskLi¡
 = &
xD–ayedTaskLi¡2
;

3668 
	}
}

3671 
	$´vCheckTasksWa™šgT”mš©iÚ
( )

3675 #iàĞ
INCLUDE_vTaskD–‘e
 == 1 )

3677 
TCB_t
 * 
pxTCB
;

3681  
uxD–‘edTasksWa™šgCËªUp
 > ( 
UBa£Ty³_t
 ) 0U )

3683 
	`skENTER_CRITICAL
();

3685 
pxTCB
 = 
	`li¡GET_OWNER_OF_HEAD_ENTRY
ĞĞ&
xTasksWa™šgT”mš©iÚ
 ) );

3686 Ğè
	`uxLi¡Remove
Ğ&Ğ
pxTCB
->
xS‹Li¡I‹m
 ) );

3687 --
uxCu¼’tNumb”OfTasks
;

3688 --
uxD–‘edTasksWa™šgCËªUp
;

3690 
	`skEXIT_CRITICAL
();

3692 
	`´vD–‘eTCB
Ğ
pxTCB
 );

3696 
	}
}

3699 #iàĞ
cÚfigUSE_TRACE_FACILITY
 == 1 )

3701 
	$vTaskG‘Info
Ğ
TaskHªdË_t
 
xTask
,

3702 
TaskStus_t
 * 
pxTaskStus
,

3703 
Ba£Ty³_t
 
xG‘F»eSckS·û
,

3704 
eTaskS‹
 
eS‹
 )

3706 
TCB_t
 * 
pxTCB
;

3709 
pxTCB
 = 
	`´vG‘TCBFromHªdË
Ğ
xTask
 );

3711 
pxTaskStus
->
xHªdË
 = ( 
TaskHªdË_t
 ) 
pxTCB
;

3712 
pxTaskStus
->
pcTaskName
 = ( cÚ¡ * ) &Ğ
pxTCB
->pcTaskName[ 0 ] );

3713 
pxTaskStus
->
uxCu¼’tPriÜ™y
 = 
pxTCB
->
uxPriÜ™y
;

3714 
pxTaskStus
->
pxSckBa£
 = 
pxTCB
->
pxSck
;

3715 #iàĞĞ
pÜtSTACK_GROWTH
 > 0 ) && ( 
cÚfigRECORD_STACK_HIGH_ADDRESS
 == 1 ) )

3716 
pxTaskStus
->
pxTİOfSck
 = 
pxTCB
->pxTopOfStack;

3717 
pxTaskStus
->
pxEndOfSck
 = 
pxTCB
->pxEndOfStack;

3719 
pxTaskStus
->
xTaskNumb”
 = 
pxTCB
->
uxTCBNumb”
;

3721 #iàĞ
cÚfigUSE_MUTEXES
 == 1 )

3723 
pxTaskStus
->
uxBa£PriÜ™y
 = 
pxTCB
->uxBasePriority;

3727 
pxTaskStus
->
uxBa£PriÜ™y
 = 0;

3731 #iàĞ
cÚfigGENERATE_RUN_TIME_STATS
 == 1 )

3733 
pxTaskStus
->
ulRunTimeCouÁ”
 = 
pxTCB
->ulRunTimeCounter;

3737 
pxTaskStus
->
ulRunTimeCouÁ”
 = ( 
cÚfigRUN_TIME_COUNTER_TYPE
 ) 0;

3744 ifĞ
eS‹
 !ğ
eInv®id
 )

3746 ifĞ
pxTCB
 =ğ
pxCu¼’tTCB
 )

3748 
pxTaskStus
->
eCu¼’tS‹
 = 
eRuÂšg
;

3752 
pxTaskStus
->
eCu¼’tS‹
 = 
eS‹
;

3754 #iàĞ
INCLUDE_vTaskSu¥’d
 == 1 )

3759 ifĞ
eS‹
 =ğ
eSu¥’ded
 )

3761 
	`vTaskSu¥’dAÎ
();

3763 ifĞ
	`li¡LIST_ITEM_CONTAINER
Ğ&Ğ
pxTCB
->
xEv’tLi¡I‹m
 ) ) !ğ
NULL
 )

3765 
pxTaskStus
->
eCu¼’tS‹
 = 
eBlocked
;

3768 Ğè
	`xTaskResumeAÎ
();

3776 
pxTaskStus
->
eCu¼’tS‹
 = 
	`eTaskG‘S‹
Ğ
pxTCB
 );

3781 ifĞ
xG‘F»eSckS·û
 !ğ
pdFALSE
 )

3783 #iàĞ
pÜtSTACK_GROWTH
 > 0 )

3785 
pxTaskStus
->
usSckHighW©”M¬k
 = 
	`´vTaskCheckF»eSckS·û
ĞĞ
ušt8_t
 * ) 
pxTCB
->
pxEndOfSck
 );

3789 
pxTaskStus
->
usSckHighW©”M¬k
 = 
	`´vTaskCheckF»eSckS·û
ĞĞ
ušt8_t
 * ) 
pxTCB
->
pxSck
 );

3795 
pxTaskStus
->
usSckHighW©”M¬k
 = 0;

3797 
	}
}

3802 #iàĞ
cÚfigUSE_TRACE_FACILITY
 == 1 )

3804 
UBa£Ty³_t
 
	$´vLi¡TasksW™hšSšgËLi¡
Ğ
TaskStus_t
 * 
pxTaskStusA¼ay
,

3805 
Li¡_t
 * 
pxLi¡
,

3806 
eTaskS‹
 
eS‹
 )

3808 
cÚfigLIST_VOLATILE
 
TCB_t
 * 
pxNextTCB
, * 
pxFœ¡TCB
;

3809 
UBa£Ty³_t
 
uxTask
 = 0;

3811 ifĞ
	`li¡CURRENT_LIST_LENGTH
Ğ
pxLi¡
 ) > ( 
UBa£Ty³_t
 ) 0 )

3813 
	`li¡GET_OWNER_OF_NEXT_ENTRY
Ğ
pxFœ¡TCB
, 
pxLi¡
 );

3821 
	`li¡GET_OWNER_OF_NEXT_ENTRY
Ğ
pxNextTCB
, 
pxLi¡
 );

3822 
	`vTaskG‘Info
ĞĞ
TaskHªdË_t
 ) 
pxNextTCB
, &Ğ
pxTaskStusA¼ay
[ 
uxTask
 ] ), 
pdTRUE
, 
eS‹
 );

3823 
uxTask
++;

3824 }  
pxNextTCB
 !ğ
pxFœ¡TCB
 );

3828 
	`mtCOVERAGE_TEST_MARKER
();

3831  
uxTask
;

3832 
	}
}

3837 #iàĞĞ
cÚfigUSE_TRACE_FACILITY
 =ğ1 ) || ( 
INCLUDE_uxTaskG‘SckHighW©”M¬k
 =ğ1 ) || ( 
INCLUDE_uxTaskG‘SckHighW©”M¬k2
 == 1 ) )

3839 
cÚfigSTACK_DEPTH_TYPE
 
	$´vTaskCheckF»eSckS·û
ĞcÚ¡ 
ušt8_t
 * 
pucSckBy‹
 )

3841 
ušt32_t
 
ulCouÁ
 = 0U;

3843  *
pucSckBy‹
 =ğĞ
ušt8_t
 ) 
tskSTACK_FILL_BYTE
 )

3845 
pucSckBy‹
 -ğ
pÜtSTACK_GROWTH
;

3846 
ulCouÁ
++;

3849 
ulCouÁ
 /ğĞ
ušt32_t
 ) Ğ
SckTy³_t
 );

3851  ( 
cÚfigSTACK_DEPTH_TYPE
 ) 
ulCouÁ
;

3852 
	}
}

3857 #iàĞ
INCLUDE_uxTaskG‘SckHighW©”M¬k2
 == 1 )

3864 
cÚfigSTACK_DEPTH_TYPE
 
	$uxTaskG‘SckHighW©”M¬k2
Ğ
TaskHªdË_t
 
xTask
 )

3866 
TCB_t
 * 
pxTCB
;

3867 
ušt8_t
 * 
pucEndOfSck
;

3868 
cÚfigSTACK_DEPTH_TYPE
 
uxR‘uº
;

3877 
pxTCB
 = 
	`´vG‘TCBFromHªdË
Ğ
xTask
 );

3879 #ià
pÜtSTACK_GROWTH
 < 0

3881 
pucEndOfSck
 = ( 
ušt8_t
 * ) 
pxTCB
->
pxSck
;

3885 
pucEndOfSck
 = ( 
ušt8_t
 * ) 
pxTCB
->
pxEndOfSck
;

3889 
uxR‘uº
 = 
	`´vTaskCheckF»eSckS·û
Ğ
pucEndOfSck
 );

3891  
uxR‘uº
;

3892 
	}
}

3897 #iàĞ
INCLUDE_uxTaskG‘SckHighW©”M¬k
 == 1 )

3899 
UBa£Ty³_t
 
	$uxTaskG‘SckHighW©”M¬k
Ğ
TaskHªdË_t
 
xTask
 )

3901 
TCB_t
 * 
pxTCB
;

3902 
ušt8_t
 * 
pucEndOfSck
;

3903 
UBa£Ty³_t
 
uxR‘uº
;

3905 
pxTCB
 = 
	`´vG‘TCBFromHªdË
Ğ
xTask
 );

3907 #ià
pÜtSTACK_GROWTH
 < 0

3909 
pucEndOfSck
 = ( 
ušt8_t
 * ) 
pxTCB
->
pxSck
;

3913 
pucEndOfSck
 = ( 
ušt8_t
 * ) 
pxTCB
->
pxEndOfSck
;

3917 
uxR‘uº
 = ( 
UBa£Ty³_t
 ) 
	`´vTaskCheckF»eSckS·û
Ğ
pucEndOfSck
 );

3919  
uxR‘uº
;

3920 
	}
}

3925 #iàĞ
INCLUDE_vTaskD–‘e
 == 1 )

3927 
	$´vD–‘eTCB
Ğ
TCB_t
 * 
pxTCB
 )

3932 
	`pÜtCLEAN_UP_TCB
Ğ
pxTCB
 );

3938 #iàĞ
cÚfigUSE_NEWLIB_REENTRANT
 == 1 )

3940 
	`_»şaim_»’t
Ğ&Ğ
pxTCB
->
xNewLib_»’t
 ) );

3944 #iàĞĞ
cÚfigSUPPORT_DYNAMIC_ALLOCATION
 =ğ1 ) && ( 
cÚfigSUPPORT_STATIC_ALLOCATION
 =ğ0 ) && ( 
pÜtUSING_MPU_WRAPPERS
 == 0 ) )

3948 
	`vPÜtF»eSck
Ğ
pxTCB
->
pxSck
 );

3949 
	`vPÜtF»e
Ğ
pxTCB
 );

3951 #–iàĞ
tskSTATIC_AND_DYNAMIC_ALLOCATION_POSSIBLE
 != 0 )

3956 ifĞ
pxTCB
->
ucStiÿÎyAÎoÿ‹d
 =ğ
tskDYNAMICALLY_ALLOCATED_STACK_AND_TCB
 )

3960 
	`vPÜtF»eSck
Ğ
pxTCB
->
pxSck
 );

3961 
	`vPÜtF»e
Ğ
pxTCB
 );

3963 ifĞ
pxTCB
->
ucStiÿÎyAÎoÿ‹d
 =ğ
tskSTATICALLY_ALLOCATED_STACK_ONLY
 )

3967 
	`vPÜtF»e
Ğ
pxTCB
 );

3973 
	`cÚfigASSERT
Ğ
pxTCB
->
ucStiÿÎyAÎoÿ‹d
 =ğ
tskSTATICALLY_ALLOCATED_STACK_AND_TCB
 );

3974 
	`mtCOVERAGE_TEST_MARKER
();

3978 
	}
}

3983 
	$´vRe£tNextTaskUnblockTime
( )

3985 ifĞ
	`li¡LIST_IS_EMPTY
Ğ
pxD–ayedTaskLi¡
 ) !ğ
pdFALSE
 )

3991 
xNextTaskUnblockTime
 = 
pÜtMAX_DELAY
;

3999 
xNextTaskUnblockTime
 = 
	`li¡GET_ITEM_VALUE_OF_HEAD_ENTRY
Ğ
pxD–ayedTaskLi¡
 );

4001 
	}
}

4004 #iàĞĞ
INCLUDE_xTaskG‘Cu¼’tTaskHªdË
 =ğ1 ) || ( 
cÚfigUSE_MUTEXES
 == 1 ) )

4006 
TaskHªdË_t
 
	$xTaskG‘Cu¼’tTaskHªdË
( )

4008 
TaskHªdË_t
 
xR‘uº
;

4013 
xR‘uº
 = 
pxCu¼’tTCB
;

4015  
xR‘uº
;

4016 
	}
}

4021 #iàĞĞ
INCLUDE_xTaskG‘ScheduËrS‹
 =ğ1 ) || ( 
cÚfigUSE_TIMERS
 == 1 ) )

4023 
Ba£Ty³_t
 
	$xTaskG‘ScheduËrS‹
( )

4025 
Ba£Ty³_t
 
xR‘uº
;

4027 ifĞ
xScheduËrRuÂšg
 =ğ
pdFALSE
 )

4029 
xR‘uº
 = 
skSCHEDULER_NOT_STARTED
;

4033 ifĞ
uxScheduËrSu¥’ded
 =ğĞ
UBa£Ty³_t
 ) 
pdFALSE
 )

4035 
xR‘uº
 = 
skSCHEDULER_RUNNING
;

4039 
xR‘uº
 = 
skSCHEDULER_SUSPENDED
;

4043  
xR‘uº
;

4044 
	}
}

4049 #iàĞ
cÚfigUSE_MUTEXES
 == 1 )

4051 
Ba£Ty³_t
 
	$xTaskPriÜ™yInh”™
Ğ
TaskHªdË_t
 cÚ¡ 
pxMu‹xHŞd”
 )

4053 
TCB_t
 * cÚ¡ 
pxMu‹xHŞd”TCB
 = 
pxMu‹xHŞd”
;

4054 
Ba£Ty³_t
 
xR‘uº
 = 
pdFALSE
;

4059 ifĞ
pxMu‹xHŞd”
 !ğ
NULL
 )

4064 ifĞ
pxMu‹xHŞd”TCB
->
uxPriÜ™y
 < 
pxCu¼’tTCB
->uxPriority )

4069 ifĞĞ
	`li¡GET_LIST_ITEM_VALUE
Ğ&Ğ
pxMu‹xHŞd”TCB
->
xEv’tLi¡I‹m
 ) ) & 
skEVENT_LIST_ITEM_VALUE_IN_USE
 ) == 0UL )

4071 
	`li¡SET_LIST_ITEM_VALUE
Ğ&Ğ
pxMu‹xHŞd”TCB
->
xEv’tLi¡I‹m
 ), ( 
TickTy³_t
 ) 
cÚfigMAX_PRIORITIES
 - ( TickTy³_ˆè
pxCu¼’tTCB
->
uxPriÜ™y
 );

4075 
	`mtCOVERAGE_TEST_MARKER
();

4080 ifĞ
	`li¡IS_CONTAINED_WITHIN
Ğ&Ğ
pxR—dyTasksLi¡s
[ 
pxMu‹xHŞd”TCB
->
uxPriÜ™y
 ] ), &ĞpxMu‹xHŞd”TCB->
xS‹Li¡I‹m
 ) ) !ğ
pdFALSE
 )

4082 ifĞ
	`uxLi¡Remove
Ğ&Ğ
pxMu‹xHŞd”TCB
->
xS‹Li¡I‹m
 ) ) =ğĞ
UBa£Ty³_t
 ) 0 )

4087 
	`pÜtRESET_READY_PRIORITY
Ğ
pxMu‹xHŞd”TCB
->
uxPriÜ™y
, 
uxTİR—dyPriÜ™y
 );

4091 
	`mtCOVERAGE_TEST_MARKER
();

4095 
pxMu‹xHŞd”TCB
->
uxPriÜ™y
 = 
pxCu¼’tTCB
->uxPriority;

4096 
	`´vAddTaskToR—dyLi¡
Ğ
pxMu‹xHŞd”TCB
 );

4101 
pxMu‹xHŞd”TCB
->
uxPriÜ™y
 = 
pxCu¼’tTCB
->uxPriority;

4104 
	`ŒaûTASK_PRIORITY_INHERIT
Ğ
pxMu‹xHŞd”TCB
, 
pxCu¼’tTCB
->
uxPriÜ™y
 );

4107 
xR‘uº
 = 
pdTRUE
;

4111 ifĞ
pxMu‹xHŞd”TCB
->
uxBa£PriÜ™y
 < 
pxCu¼’tTCB
->
uxPriÜ™y
 )

4120 
xR‘uº
 = 
pdTRUE
;

4124 
	`mtCOVERAGE_TEST_MARKER
();

4130 
	`mtCOVERAGE_TEST_MARKER
();

4133  
xR‘uº
;

4134 
	}
}

4139 #iàĞ
cÚfigUSE_MUTEXES
 == 1 )

4141 
Ba£Ty³_t
 
	$xTaskPriÜ™yDisšh”™
Ğ
TaskHªdË_t
 cÚ¡ 
pxMu‹xHŞd”
 )

4143 
TCB_t
 * cÚ¡ 
pxTCB
 = 
pxMu‹xHŞd”
;

4144 
Ba£Ty³_t
 
xR‘uº
 = 
pdFALSE
;

4146 ifĞ
pxMu‹xHŞd”
 !ğ
NULL
 )

4152 
	`cÚfigASSERT
Ğ
pxTCB
 =ğ
pxCu¼’tTCB
 );

4153 
	`cÚfigASSERT
Ğ
pxTCB
->
uxMu‹xesH–d
 );

4154 Ğ
pxTCB
->
uxMu‹xesH–d
 )--;

4158 ifĞ
pxTCB
->
uxPriÜ™y
 !ğpxTCB->
uxBa£PriÜ™y
 )

4161 ifĞ
pxTCB
->
uxMu‹xesH–d
 =ğĞ
UBa£Ty³_t
 ) 0 )

4168 ifĞ
	`uxLi¡Remove
Ğ&Ğ
pxTCB
->
xS‹Li¡I‹m
 ) ) =ğĞ
UBa£Ty³_t
 ) 0 )

4170 
	`pÜtRESET_READY_PRIORITY
Ğ
pxTCB
->
uxPriÜ™y
, 
uxTİR—dyPriÜ™y
 );

4174 
	`mtCOVERAGE_TEST_MARKER
();

4179 
	`ŒaûTASK_PRIORITY_DISINHERIT
Ğ
pxTCB
,…xTCB->
uxBa£PriÜ™y
 );

4180 
pxTCB
->
uxPriÜ™y
 =…xTCB->
uxBa£PriÜ™y
;

4185 
	`li¡SET_LIST_ITEM_VALUE
Ğ&Ğ
pxTCB
->
xEv’tLi¡I‹m
 ), ( 
TickTy³_t
 ) 
cÚfigMAX_PRIORITIES
 - ( TickTy³_ˆèpxTCB->
uxPriÜ™y
 );

4186 
	`´vAddTaskToR—dyLi¡
Ğ
pxTCB
 );

4196 
xR‘uº
 = 
pdTRUE
;

4200 
	`mtCOVERAGE_TEST_MARKER
();

4205 
	`mtCOVERAGE_TEST_MARKER
();

4210 
	`mtCOVERAGE_TEST_MARKER
();

4213  
xR‘uº
;

4214 
	}
}

4219 #iàĞ
cÚfigUSE_MUTEXES
 == 1 )

4221 
	$vTaskPriÜ™yDisšh”™Aá”Timeout
Ğ
TaskHªdË_t
 cÚ¡ 
pxMu‹xHŞd”
,

4222 
UBa£Ty³_t
 
uxHighe¡PriÜ™yWa™šgTask
 )

4224 
TCB_t
 * cÚ¡ 
pxTCB
 = 
pxMu‹xHŞd”
;

4225 
UBa£Ty³_t
 
uxPriÜ™yU£dOnEÁry
, 
uxPriÜ™yToU£
;

4226 cÚ¡ 
UBa£Ty³_t
 
uxOÆyOÃMu‹xH–d
 = ( UBaseType_t ) 1;

4228 ifĞ
pxMu‹xHŞd”
 !ğ
NULL
 )

4232 
	`cÚfigASSERT
Ğ
pxTCB
->
uxMu‹xesH–d
 );

4238 ifĞ
pxTCB
->
uxBa£PriÜ™y
 < 
uxHighe¡PriÜ™yWa™šgTask
 )

4240 
uxPriÜ™yToU£
 = 
uxHighe¡PriÜ™yWa™šgTask
;

4244 
uxPriÜ™yToU£
 = 
pxTCB
->
uxBa£PriÜ™y
;

4248 ifĞ
pxTCB
->
uxPriÜ™y
 !ğ
uxPriÜ™yToU£
 )

4254 ifĞ
pxTCB
->
uxMu‹xesH–d
 =ğ
uxOÆyOÃMu‹xH–d
 )

4259 
	`cÚfigASSERT
Ğ
pxTCB
 !ğ
pxCu¼’tTCB
 );

4264 
	`ŒaûTASK_PRIORITY_DISINHERIT
Ğ
pxTCB
, 
uxPriÜ™yToU£
 );

4265 
uxPriÜ™yU£dOnEÁry
 = 
pxTCB
->
uxPriÜ™y
;

4266 
pxTCB
->
uxPriÜ™y
 = 
uxPriÜ™yToU£
;

4270 ifĞĞ
	`li¡GET_LIST_ITEM_VALUE
Ğ&Ğ
pxTCB
->
xEv’tLi¡I‹m
 ) ) & 
skEVENT_LIST_ITEM_VALUE_IN_USE
 ) == 0UL )

4272 
	`li¡SET_LIST_ITEM_VALUE
Ğ&Ğ
pxTCB
->
xEv’tLi¡I‹m
 ), ( 
TickTy³_t
 ) 
cÚfigMAX_PRIORITIES
 - ( TickTy³_ˆè
uxPriÜ™yToU£
 );

4276 
	`mtCOVERAGE_TEST_MARKER
();

4285 ifĞ
	`li¡IS_CONTAINED_WITHIN
Ğ&Ğ
pxR—dyTasksLi¡s
[ 
uxPriÜ™yU£dOnEÁry
 ] ), &Ğ
pxTCB
->
xS‹Li¡I‹m
 ) ) !ğ
pdFALSE
 )

4287 ifĞ
	`uxLi¡Remove
Ğ&Ğ
pxTCB
->
xS‹Li¡I‹m
 ) ) =ğĞ
UBa£Ty³_t
 ) 0 )

4292 
	`pÜtRESET_READY_PRIORITY
Ğ
pxTCB
->
uxPriÜ™y
, 
uxTİR—dyPriÜ™y
 );

4296 
	`mtCOVERAGE_TEST_MARKER
();

4299 
	`´vAddTaskToR—dyLi¡
Ğ
pxTCB
 );

4303 
	`mtCOVERAGE_TEST_MARKER
();

4308 
	`mtCOVERAGE_TEST_MARKER
();

4313 
	`mtCOVERAGE_TEST_MARKER
();

4318 
	`mtCOVERAGE_TEST_MARKER
();

4320 
	}
}

4325 #iàĞ
pÜtCRITICAL_NESTING_IN_TCB
 == 1 )

4327 
	$vTaskEÁ”Cr™iÿl
( )

4329 
	`pÜtDISABLE_INTERRUPTS
();

4331 ifĞ
xScheduËrRuÂšg
 !ğ
pdFALSE
 )

4333 Ğ
pxCu¼’tTCB
->
uxCr™iÿlNe¡šg
 )++;

4341 ifĞ
pxCu¼’tTCB
->
uxCr™iÿlNe¡šg
 == 1 )

4343 
	`pÜtASSERT_IF_IN_ISR
();

4348 
	`mtCOVERAGE_TEST_MARKER
();

4350 
	}
}

4355 #iàĞ
pÜtCRITICAL_NESTING_IN_TCB
 == 1 )

4357 
	$vTaskEx™Cr™iÿl
( )

4359 ifĞ
xScheduËrRuÂšg
 !ğ
pdFALSE
 )

4361 ifĞ
pxCu¼’tTCB
->
uxCr™iÿlNe¡šg
 > 0U )

4363 Ğ
pxCu¼’tTCB
->
uxCr™iÿlNe¡šg
 )--;

4365 ifĞ
pxCu¼’tTCB
->
uxCr™iÿlNe¡šg
 == 0U )

4367 
	`pÜtENABLE_INTERRUPTS
();

4371 
	`mtCOVERAGE_TEST_MARKER
();

4376 
	`mtCOVERAGE_TEST_MARKER
();

4381 
	`mtCOVERAGE_TEST_MARKER
();

4383 
	}
}

4388 #iàĞĞĞ
cÚfigUSE_TRACE_FACILITY
 =ğ1 ) || ( 
cÚfigGENERATE_RUN_TIME_STATS
 == 1 ) ) && \

4389 Ğ
	gcÚfigUSE_STATS_FORMATTING_FUNCTIONS
 > 0 ) && \

4390 Ğ
	gcÚfigSUPPORT_DYNAMIC_ALLOCATION
 == 1 ) )

4392 * 
	$´vWr™eNameToBufãr
Ğ* 
pcBufãr
,

4393 cÚ¡ * 
pcTaskName
 )

4395 
size_t
 
x
;

4398 
	`¡rıy
Ğ
pcBufãr
, 
pcTaskName
 );

4402  
x
 = 
	`¡¾’
Ğ
pcBufãr
 ); x < ( 
size_t
 ) ( 
cÚfigMAX_TASK_NAME_LEN
 - 1 ); x++ )

4404 
pcBufãr
[ 
x
 ] = ' ';

4408 
pcBufãr
[ 
x
 ] = ( ) 0x00;

4411  &Ğ
pcBufãr
[ 
x
 ] );

4412 
	}
}

4417 #iàĞĞ
cÚfigUSE_TRACE_FACILITY
 =ğ1 ) && ( 
cÚfigUSE_STATS_FORMATTING_FUNCTIONS
 > 0 ) && ( 
cÚfigSUPPORT_DYNAMIC_ALLOCATION
 == 1 ) )

4419 
	$vTaskLi¡
Ğ* 
pcWr™eBufãr
 )

4421 
TaskStus_t
 * 
pxTaskStusA¼ay
;

4422 
UBa£Ty³_t
 
uxA¼aySize
, 
x
;

4423 
cStus
;

4453 *
pcWr™eBufãr
 = ( ) 0x00;

4457 
uxA¼aySize
 = 
uxCu¼’tNumb”OfTasks
;

4462 
pxTaskStusA¼ay
 = 
	`pvPÜtM®loc
Ğ
uxCu¼’tNumb”OfTasks
 * Ğ
TaskStus_t
 ) );

4464 ifĞ
pxTaskStusA¼ay
 !ğ
NULL
 )

4467 
uxA¼aySize
 = 
	`uxTaskG‘Sy¡emS‹
Ğ
pxTaskStusA¼ay
, uxA¼aySize, 
NULL
 );

4470  
x
 = 0; x < 
uxA¼aySize
; x++ )

4472  
pxTaskStusA¼ay
[ 
x
 ].
eCu¼’tS‹
 )

4474 
eRuÂšg
:

4475 
cStus
 = 
tskRUNNING_CHAR
;

4478 
eR—dy
:

4479 
cStus
 = 
tskREADY_CHAR
;

4482 
eBlocked
:

4483 
cStus
 = 
tskBLOCKED_CHAR
;

4486 
eSu¥’ded
:

4487 
cStus
 = 
tskSUSPENDED_CHAR
;

4490 
eD–‘ed
:

4491 
cStus
 = 
tskDELETED_CHAR
;

4494 
eInv®id
:

4497 
cStus
 = ( ) 0x00;

4503 
pcWr™eBufãr
 = 
	`´vWr™eNameToBufãr
ĞpcWr™eBufãr, 
pxTaskStusA¼ay
[ 
x
 ].
pcTaskName
 );

4506 
	`¥rštf
Ğ
pcWr™eBufãr
, "\t%c\t%u\t%u\t%u\r\n", 
cStus
, ( è
pxTaskStusA¼ay
[ 
x
 ].
uxCu¼’tPriÜ™y
, ( èpxTaskStusA¼ay[ x ].
usSckHighW©”M¬k
, ( èpxTaskStusA¼ay[ x ].
xTaskNumb”
 );

4507 
pcWr™eBufãr
 +ğ
	`¡¾’
(…cWriteBuffer );

4512 
	`vPÜtF»e
Ğ
pxTaskStusA¼ay
 );

4516 
	`mtCOVERAGE_TEST_MARKER
();

4518 
	}
}

4523 #iàĞĞ
cÚfigGENERATE_RUN_TIME_STATS
 =ğ1 ) && ( 
cÚfigUSE_STATS_FORMATTING_FUNCTIONS
 > 0 ) && ( 
cÚfigSUPPORT_DYNAMIC_ALLOCATION
 == 1 ) )

4525 
	$vTaskG‘RunTimeSts
Ğ* 
pcWr™eBufãr
 )

4527 
TaskStus_t
 * 
pxTaskStusA¼ay
;

4528 
UBa£Ty³_t
 
uxA¼aySize
, 
x
;

4529 
cÚfigRUN_TIME_COUNTER_TYPE
 
ulTÙ®Time
, 
ulStsAsP”ûÁage
;

4531 #iàĞ
cÚfigUSE_TRACE_FACILITY
 != 1 )

4533 #”rÜ 
cÚfigUSE_TRACE_FACILITY
 
mu¡
 
®so
 
be
 
£t
 
to
 1 
š
 
F»eRTOSCÚfig
.
h
Ø
u£
 
	`vTaskG‘RunTimeSts
().

4563 *
pcWr™eBufãr
 = ( ) 0x00;

4567 
uxA¼aySize
 = 
uxCu¼’tNumb”OfTasks
;

4572 
pxTaskStusA¼ay
 = 
	`pvPÜtM®loc
Ğ
uxCu¼’tNumb”OfTasks
 * Ğ
TaskStus_t
 ) );

4574 ifĞ
pxTaskStusA¼ay
 !ğ
NULL
 )

4577 
uxA¼aySize
 = 
	`uxTaskG‘Sy¡emS‹
Ğ
pxTaskStusA¼ay
, uxA¼aySize, &
ulTÙ®Time
 );

4580 
ulTÙ®Time
 /= 100UL;

4583 ifĞ
ulTÙ®Time
 > 0UL )

4586  
x
 = 0; x < 
uxA¼aySize
; x++ )

4591 
ulStsAsP”ûÁage
 = 
pxTaskStusA¼ay
[ 
x
 ].
ulRunTimeCouÁ”
 / 
ulTÙ®Time
;

4596 
pcWr™eBufãr
 = 
	`´vWr™eNameToBufãr
ĞpcWr™eBufãr, 
pxTaskStusA¼ay
[ 
x
 ].
pcTaskName
 );

4598 ifĞ
ulStsAsP”ûÁage
 > 0UL )

4600 #ifdeà
pÜtLU_PRINTF_SPECIFIER_REQUIRED


4602 
	`¥rštf
Ğ
pcWr™eBufãr
, "\t%lu\t\t%lu%%\r\n", 
pxTaskStusA¼ay
[ 
x
 ].
ulRunTimeCouÁ”
, 
ulStsAsP”ûÁage
 );

4608 
	`¥rštf
Ğ
pcWr™eBufãr
, "\t%u\t\t%u%%\r\n", ( è
pxTaskStusA¼ay
[ 
x
 ].
ulRunTimeCouÁ”
, ( è
ulStsAsP”ûÁage
 );

4616 #ifdeà
pÜtLU_PRINTF_SPECIFIER_REQUIRED


4618 
	`¥rštf
Ğ
pcWr™eBufãr
, "\t%lu\t\t<1%%\r\n", 
pxTaskStusA¼ay
[ 
x
 ].
ulRunTimeCouÁ”
 );

4624 
	`¥rštf
Ğ
pcWr™eBufãr
, "\t%u\t\t<1%%\r\n", ( è
pxTaskStusA¼ay
[ 
x
 ].
ulRunTimeCouÁ”
 );

4629 
pcWr™eBufãr
 +ğ
	`¡¾’
(…cWriteBuffer );

4634 
	`mtCOVERAGE_TEST_MARKER
();

4639 
	`vPÜtF»e
Ğ
pxTaskStusA¼ay
 );

4643 
	`mtCOVERAGE_TEST_MARKER
();

4645 
	}
}

4650 
TickTy³_t
 
	$uxTaskRe£tEv’tI‹mV®ue
( )

4652 
TickTy³_t
 
uxR‘uº
;

4654 
uxR‘uº
 = 
	`li¡GET_LIST_ITEM_VALUE
Ğ&Ğ
pxCu¼’tTCB
->
xEv’tLi¡I‹m
 ) );

4658 
	`li¡SET_LIST_ITEM_VALUE
Ğ&Ğ
pxCu¼’tTCB
->
xEv’tLi¡I‹m
 ), ( ( 
TickTy³_t
 ) 
cÚfigMAX_PRIORITIES
 - ( TickTy³_ˆèpxCu¼’tTCB->
uxPriÜ™y
 ) );

4660  
uxR‘uº
;

4661 
	}
}

4664 #iàĞ
cÚfigUSE_MUTEXES
 == 1 )

4666 
TaskHªdË_t
 
	$pvTaskInüem’tMu‹xH–dCouÁ
( )

4670 ifĞ
pxCu¼’tTCB
 !ğ
NULL
 )

4672 Ğ
pxCu¼’tTCB
->
uxMu‹xesH–d
 )++;

4675  
pxCu¼’tTCB
;

4676 
	}
}

4681 #iàĞ
cÚfigUSE_TASK_NOTIFICATIONS
 == 1 )

4683 
ušt32_t
 
	$ulTaskG’”icNÙifyTake
Ğ
UBa£Ty³_t
 
uxIndexToWa™
,

4684 
Ba£Ty³_t
 
xCË¬CouÁOnEx™
,

4685 
TickTy³_t
 
xTicksToWa™
 )

4687 
ušt32_t
 
ulR‘uº
;

4689 
	`cÚfigASSERT
Ğ
uxIndexToWa™
 < 
cÚfigTASK_NOTIFICATION_ARRAY_ENTRIES
 );

4691 
	`skENTER_CRITICAL
();

4694 ifĞ
pxCu¼’tTCB
->
ulNÙif›dV®ue
[ 
uxIndexToWa™
 ] == 0UL )

4697 
pxCu¼’tTCB
->
ucNÙifyS‹
[ 
uxIndexToWa™
 ] = 
skWAITING_NOTIFICATION
;

4699 ifĞ
xTicksToWa™
 > ( 
TickTy³_t
 ) 0 )

4701 
	`´vAddCu¼’tTaskToD–ayedLi¡
Ğ
xTicksToWa™
, 
pdTRUE
 );

4702 
	`ŒaûTASK_NOTIFY_TAKE_BLOCK
Ğ
uxIndexToWa™
 );

4708 
	`pÜtYIELD_WITHIN_API
();

4712 
	`mtCOVERAGE_TEST_MARKER
();

4717 
	`mtCOVERAGE_TEST_MARKER
();

4720 
	`skEXIT_CRITICAL
();

4722 
	`skENTER_CRITICAL
();

4724 
	`ŒaûTASK_NOTIFY_TAKE
Ğ
uxIndexToWa™
 );

4725 
ulR‘uº
 = 
pxCu¼’tTCB
->
ulNÙif›dV®ue
[ 
uxIndexToWa™
 ];

4727 ifĞ
ulR‘uº
 != 0UL )

4729 ifĞ
xCË¬CouÁOnEx™
 !ğ
pdFALSE
 )

4731 
pxCu¼’tTCB
->
ulNÙif›dV®ue
[ 
uxIndexToWa™
 ] = 0UL;

4735 
pxCu¼’tTCB
->
ulNÙif›dV®ue
[ 
uxIndexToWa™
 ] = 
ulR‘uº
 - ( 
ušt32_t
 ) 1;

4740 
	`mtCOVERAGE_TEST_MARKER
();

4743 
pxCu¼’tTCB
->
ucNÙifyS‹
[ 
uxIndexToWa™
 ] = 
skNOT_WAITING_NOTIFICATION
;

4745 
	`skEXIT_CRITICAL
();

4747  
ulR‘uº
;

4748 
	}
}

4753 #iàĞ
cÚfigUSE_TASK_NOTIFICATIONS
 == 1 )

4755 
Ba£Ty³_t
 
	$xTaskG’”icNÙifyWa™
Ğ
UBa£Ty³_t
 
uxIndexToWa™
,

4756 
ušt32_t
 
ulB™sToCË¬OnEÁry
,

4757 
ušt32_t
 
ulB™sToCË¬OnEx™
,

4758 
ušt32_t
 * 
pulNÙifiÿtiÚV®ue
,

4759 
TickTy³_t
 
xTicksToWa™
 )

4761 
Ba£Ty³_t
 
xR‘uº
;

4763 
	`cÚfigASSERT
Ğ
uxIndexToWa™
 < 
cÚfigTASK_NOTIFICATION_ARRAY_ENTRIES
 );

4765 
	`skENTER_CRITICAL
();

4768 ifĞ
pxCu¼’tTCB
->
ucNÙifyS‹
[ 
uxIndexToWa™
 ] !ğ
skNOTIFICATION_RECEIVED
 )

4773 
pxCu¼’tTCB
->
ulNÙif›dV®ue
[ 
uxIndexToWa™
 ] &ğ~
ulB™sToCË¬OnEÁry
;

4776 
pxCu¼’tTCB
->
ucNÙifyS‹
[ 
uxIndexToWa™
 ] = 
skWAITING_NOTIFICATION
;

4778 ifĞ
xTicksToWa™
 > ( 
TickTy³_t
 ) 0 )

4780 
	`´vAddCu¼’tTaskToD–ayedLi¡
Ğ
xTicksToWa™
, 
pdTRUE
 );

4781 
	`ŒaûTASK_NOTIFY_WAIT_BLOCK
Ğ
uxIndexToWa™
 );

4787 
	`pÜtYIELD_WITHIN_API
();

4791 
	`mtCOVERAGE_TEST_MARKER
();

4796 
	`mtCOVERAGE_TEST_MARKER
();

4799 
	`skEXIT_CRITICAL
();

4801 
	`skENTER_CRITICAL
();

4803 
	`ŒaûTASK_NOTIFY_WAIT
Ğ
uxIndexToWa™
 );

4805 ifĞ
pulNÙifiÿtiÚV®ue
 !ğ
NULL
 )

4809 *
pulNÙifiÿtiÚV®ue
 = 
pxCu¼’tTCB
->
ulNÙif›dV®ue
[ 
uxIndexToWa™
 ];

4816 ifĞ
pxCu¼’tTCB
->
ucNÙifyS‹
[ 
uxIndexToWa™
 ] !ğ
skNOTIFICATION_RECEIVED
 )

4819 
xR‘uº
 = 
pdFALSE
;

4825 
pxCu¼’tTCB
->
ulNÙif›dV®ue
[ 
uxIndexToWa™
 ] &ğ~
ulB™sToCË¬OnEx™
;

4826 
xR‘uº
 = 
pdTRUE
;

4829 
pxCu¼’tTCB
->
ucNÙifyS‹
[ 
uxIndexToWa™
 ] = 
skNOT_WAITING_NOTIFICATION
;

4831 
	`skEXIT_CRITICAL
();

4833  
xR‘uº
;

4834 
	}
}

4839 #iàĞ
cÚfigUSE_TASK_NOTIFICATIONS
 == 1 )

4841 
Ba£Ty³_t
 
	$xTaskG’”icNÙify
Ğ
TaskHªdË_t
 
xTaskToNÙify
,

4842 
UBa£Ty³_t
 
uxIndexToNÙify
,

4843 
ušt32_t
 
ulV®ue
,

4844 
eNÙifyAùiÚ
 
eAùiÚ
,

4845 
ušt32_t
 * 
pulP»viousNÙifiÿtiÚV®ue
 )

4847 
TCB_t
 * 
pxTCB
;

4848 
Ba£Ty³_t
 
xR‘uº
 = 
pdPASS
;

4849 
ušt8_t
 
ucOrigš®NÙifyS‹
;

4851 
	`cÚfigASSERT
Ğ
uxIndexToNÙify
 < 
cÚfigTASK_NOTIFICATION_ARRAY_ENTRIES
 );

4852 
	`cÚfigASSERT
Ğ
xTaskToNÙify
 );

4853 
pxTCB
 = 
xTaskToNÙify
;

4855 
	`skENTER_CRITICAL
();

4857 ifĞ
pulP»viousNÙifiÿtiÚV®ue
 !ğ
NULL
 )

4859 *
pulP»viousNÙifiÿtiÚV®ue
 = 
pxTCB
->
ulNÙif›dV®ue
[ 
uxIndexToNÙify
 ];

4862 
ucOrigš®NÙifyS‹
 = 
pxTCB
->
ucNÙifyS‹
[ 
uxIndexToNÙify
 ];

4864 
pxTCB
->
ucNÙifyS‹
[ 
uxIndexToNÙify
 ] = 
skNOTIFICATION_RECEIVED
;

4866  
eAùiÚ
 )

4868 
eS‘B™s
:

4869 
pxTCB
->
ulNÙif›dV®ue
[ 
uxIndexToNÙify
 ] |ğ
ulV®ue
;

4872 
eInüem’t
:

4873 Ğ
pxTCB
->
ulNÙif›dV®ue
[ 
uxIndexToNÙify
 ] )++;

4876 
eS‘V®ueW™hOv”wr™e
:

4877 
pxTCB
->
ulNÙif›dV®ue
[ 
uxIndexToNÙify
 ] = 
ulV®ue
;

4880 
eS‘V®ueW™houtOv”wr™e
:

4882 ifĞ
ucOrigš®NÙifyS‹
 !ğ
skNOTIFICATION_RECEIVED
 )

4884 
pxTCB
->
ulNÙif›dV®ue
[ 
uxIndexToNÙify
 ] = 
ulV®ue
;

4889 
xR‘uº
 = 
pdFAIL
;

4894 
eNoAùiÚ
:

4905 
	`cÚfigASSERT
Ğ
xTickCouÁ
 =ğĞ
TickTy³_t
 ) 0 );

4910 
	`ŒaûTASK_NOTIFY
Ğ
uxIndexToNÙify
 );

4914 ifĞ
ucOrigš®NÙifyS‹
 =ğ
skWAITING_NOTIFICATION
 )

4916 
	`li¡REMOVE_ITEM
Ğ&Ğ
pxTCB
->
xS‹Li¡I‹m
 ) );

4917 
	`´vAddTaskToR—dyLi¡
Ğ
pxTCB
 );

4920 
	`cÚfigASSERT
Ğ
	`li¡LIST_ITEM_CONTAINER
Ğ&Ğ
pxTCB
->
xEv’tLi¡I‹m
 ) ) =ğ
NULL
 );

4922 #iàĞ
cÚfigUSE_TICKLESS_IDLE
 != 0 )

4934 
	`´vRe£tNextTaskUnblockTime
();

4938 ifĞ
pxTCB
->
uxPriÜ™y
 > 
pxCu¼’tTCB
->uxPriority )

4942 
	`skYIELD_IF_USING_PREEMPTION
();

4946 
	`mtCOVERAGE_TEST_MARKER
();

4951 
	`mtCOVERAGE_TEST_MARKER
();

4954 
	`skEXIT_CRITICAL
();

4956  
xR‘uº
;

4957 
	}
}

4962 #iàĞ
cÚfigUSE_TASK_NOTIFICATIONS
 == 1 )

4964 
Ba£Ty³_t
 
	$xTaskG’”icNÙifyFromISR
Ğ
TaskHªdË_t
 
xTaskToNÙify
,

4965 
UBa£Ty³_t
 
uxIndexToNÙify
,

4966 
ušt32_t
 
ulV®ue
,

4967 
eNÙifyAùiÚ
 
eAùiÚ
,

4968 
ušt32_t
 * 
pulP»viousNÙifiÿtiÚV®ue
,

4969 
Ba£Ty³_t
 * 
pxHigh”PriÜ™yTaskWok’
 )

4971 
TCB_t
 * 
pxTCB
;

4972 
ušt8_t
 
ucOrigš®NÙifyS‹
;

4973 
Ba£Ty³_t
 
xR‘uº
 = 
pdPASS
;

4974 
UBa£Ty³_t
 
uxSavedIÁ”ru±Stus
;

4976 
	`cÚfigASSERT
Ğ
xTaskToNÙify
 );

4977 
	`cÚfigASSERT
Ğ
uxIndexToNÙify
 < 
cÚfigTASK_NOTIFICATION_ARRAY_ENTRIES
 );

4995 
	`pÜtASSERT_IF_INTERRUPT_PRIORITY_INVALID
();

4997 
pxTCB
 = 
xTaskToNÙify
;

4999 
uxSavedIÁ”ru±Stus
 = 
	`pÜtSET_INTERRUPT_MASK_FROM_ISR
();

5001 ifĞ
pulP»viousNÙifiÿtiÚV®ue
 !ğ
NULL
 )

5003 *
pulP»viousNÙifiÿtiÚV®ue
 = 
pxTCB
->
ulNÙif›dV®ue
[ 
uxIndexToNÙify
 ];

5006 
ucOrigš®NÙifyS‹
 = 
pxTCB
->
ucNÙifyS‹
[ 
uxIndexToNÙify
 ];

5007 
pxTCB
->
ucNÙifyS‹
[ 
uxIndexToNÙify
 ] = 
skNOTIFICATION_RECEIVED
;

5009  
eAùiÚ
 )

5011 
eS‘B™s
:

5012 
pxTCB
->
ulNÙif›dV®ue
[ 
uxIndexToNÙify
 ] |ğ
ulV®ue
;

5015 
eInüem’t
:

5016 Ğ
pxTCB
->
ulNÙif›dV®ue
[ 
uxIndexToNÙify
 ] )++;

5019 
eS‘V®ueW™hOv”wr™e
:

5020 
pxTCB
->
ulNÙif›dV®ue
[ 
uxIndexToNÙify
 ] = 
ulV®ue
;

5023 
eS‘V®ueW™houtOv”wr™e
:

5025 ifĞ
ucOrigš®NÙifyS‹
 !ğ
skNOTIFICATION_RECEIVED
 )

5027 
pxTCB
->
ulNÙif›dV®ue
[ 
uxIndexToNÙify
 ] = 
ulV®ue
;

5032 
xR‘uº
 = 
pdFAIL
;

5037 
eNoAùiÚ
:

5048 
	`cÚfigASSERT
Ğ
xTickCouÁ
 =ğĞ
TickTy³_t
 ) 0 );

5052 
	`ŒaûTASK_NOTIFY_FROM_ISR
Ğ
uxIndexToNÙify
 );

5056 ifĞ
ucOrigš®NÙifyS‹
 =ğ
skWAITING_NOTIFICATION
 )

5059 
	`cÚfigASSERT
Ğ
	`li¡LIST_ITEM_CONTAINER
Ğ&Ğ
pxTCB
->
xEv’tLi¡I‹m
 ) ) =ğ
NULL
 );

5061 ifĞ
uxScheduËrSu¥’ded
 =ğĞ
UBa£Ty³_t
 ) 
pdFALSE
 )

5063 
	`li¡REMOVE_ITEM
Ğ&Ğ
pxTCB
->
xS‹Li¡I‹m
 ) );

5064 
	`´vAddTaskToR—dyLi¡
Ğ
pxTCB
 );

5070 
	`li¡INSERT_END
Ğ&Ğ
xP’dšgR—dyLi¡
 ), &Ğ
pxTCB
->
xEv’tLi¡I‹m
 ) );

5073 ifĞ
pxTCB
->
uxPriÜ™y
 > 
pxCu¼’tTCB
->uxPriority )

5077 ifĞ
pxHigh”PriÜ™yTaskWok’
 !ğ
NULL
 )

5079 *
pxHigh”PriÜ™yTaskWok’
 = 
pdTRUE
;

5085 
xY›ldP’dšg
 = 
pdTRUE
;

5089 
	`mtCOVERAGE_TEST_MARKER
();

5093 
	`pÜtCLEAR_INTERRUPT_MASK_FROM_ISR
Ğ
uxSavedIÁ”ru±Stus
 );

5095  
xR‘uº
;

5096 
	}
}

5101 #iàĞ
cÚfigUSE_TASK_NOTIFICATIONS
 == 1 )

5103 
	$vTaskG’”icNÙifyGiveFromISR
Ğ
TaskHªdË_t
 
xTaskToNÙify
,

5104 
UBa£Ty³_t
 
uxIndexToNÙify
,

5105 
Ba£Ty³_t
 * 
pxHigh”PriÜ™yTaskWok’
 )

5107 
TCB_t
 * 
pxTCB
;

5108 
ušt8_t
 
ucOrigš®NÙifyS‹
;

5109 
UBa£Ty³_t
 
uxSavedIÁ”ru±Stus
;

5111 
	`cÚfigASSERT
Ğ
xTaskToNÙify
 );

5112 
	`cÚfigASSERT
Ğ
uxIndexToNÙify
 < 
cÚfigTASK_NOTIFICATION_ARRAY_ENTRIES
 );

5130 
	`pÜtASSERT_IF_INTERRUPT_PRIORITY_INVALID
();

5132 
pxTCB
 = 
xTaskToNÙify
;

5134 
uxSavedIÁ”ru±Stus
 = 
	`pÜtSET_INTERRUPT_MASK_FROM_ISR
();

5136 
ucOrigš®NÙifyS‹
 = 
pxTCB
->
ucNÙifyS‹
[ 
uxIndexToNÙify
 ];

5137 
pxTCB
->
ucNÙifyS‹
[ 
uxIndexToNÙify
 ] = 
skNOTIFICATION_RECEIVED
;

5141 Ğ
pxTCB
->
ulNÙif›dV®ue
[ 
uxIndexToNÙify
 ] )++;

5143 
	`ŒaûTASK_NOTIFY_GIVE_FROM_ISR
Ğ
uxIndexToNÙify
 );

5147 ifĞ
ucOrigš®NÙifyS‹
 =ğ
skWAITING_NOTIFICATION
 )

5150 
	`cÚfigASSERT
Ğ
	`li¡LIST_ITEM_CONTAINER
Ğ&Ğ
pxTCB
->
xEv’tLi¡I‹m
 ) ) =ğ
NULL
 );

5152 ifĞ
uxScheduËrSu¥’ded
 =ğĞ
UBa£Ty³_t
 ) 
pdFALSE
 )

5154 
	`li¡REMOVE_ITEM
Ğ&Ğ
pxTCB
->
xS‹Li¡I‹m
 ) );

5155 
	`´vAddTaskToR—dyLi¡
Ğ
pxTCB
 );

5161 
	`li¡INSERT_END
Ğ&Ğ
xP’dšgR—dyLi¡
 ), &Ğ
pxTCB
->
xEv’tLi¡I‹m
 ) );

5164 ifĞ
pxTCB
->
uxPriÜ™y
 > 
pxCu¼’tTCB
->uxPriority )

5168 ifĞ
pxHigh”PriÜ™yTaskWok’
 !ğ
NULL
 )

5170 *
pxHigh”PriÜ™yTaskWok’
 = 
pdTRUE
;

5176 
xY›ldP’dšg
 = 
pdTRUE
;

5180 
	`mtCOVERAGE_TEST_MARKER
();

5184 
	`pÜtCLEAR_INTERRUPT_MASK_FROM_ISR
Ğ
uxSavedIÁ”ru±Stus
 );

5185 
	}
}

5190 #iàĞ
cÚfigUSE_TASK_NOTIFICATIONS
 == 1 )

5192 
Ba£Ty³_t
 
	$xTaskG’”icNÙifyS‹CË¬
Ğ
TaskHªdË_t
 
xTask
,

5193 
UBa£Ty³_t
 
uxIndexToCË¬
 )

5195 
TCB_t
 * 
pxTCB
;

5196 
Ba£Ty³_t
 
xR‘uº
;

5198 
	`cÚfigASSERT
Ğ
uxIndexToCË¬
 < 
cÚfigTASK_NOTIFICATION_ARRAY_ENTRIES
 );

5202 
pxTCB
 = 
	`´vG‘TCBFromHªdË
Ğ
xTask
 );

5204 
	`skENTER_CRITICAL
();

5206 ifĞ
pxTCB
->
ucNÙifyS‹
[ 
uxIndexToCË¬
 ] =ğ
skNOTIFICATION_RECEIVED
 )

5208 
pxTCB
->
ucNÙifyS‹
[ 
uxIndexToCË¬
 ] = 
skNOT_WAITING_NOTIFICATION
;

5209 
xR‘uº
 = 
pdPASS
;

5213 
xR‘uº
 = 
pdFAIL
;

5216 
	`skEXIT_CRITICAL
();

5218  
xR‘uº
;

5219 
	}
}

5224 #iàĞ
cÚfigUSE_TASK_NOTIFICATIONS
 == 1 )

5226 
ušt32_t
 
	$ulTaskG’”icNÙifyV®ueCË¬
Ğ
TaskHªdË_t
 
xTask
,

5227 
UBa£Ty³_t
 
uxIndexToCË¬
,

5228 
ušt32_t
 
ulB™sToCË¬
 )

5230 
TCB_t
 * 
pxTCB
;

5231 
ušt32_t
 
ulR‘uº
;

5235 
pxTCB
 = 
	`´vG‘TCBFromHªdË
Ğ
xTask
 );

5237 
	`skENTER_CRITICAL
();

5241 
ulR‘uº
 = 
pxTCB
->
ulNÙif›dV®ue
[ 
uxIndexToCË¬
 ];

5242 
pxTCB
->
ulNÙif›dV®ue
[ 
uxIndexToCË¬
 ] &ğ~
ulB™sToCË¬
;

5244 
	`skEXIT_CRITICAL
();

5246  
ulR‘uº
;

5247 
	}
}

5252 #iàĞĞ
cÚfigGENERATE_RUN_TIME_STATS
 =ğ1 ) && ( 
INCLUDE_xTaskG‘IdËTaskHªdË
 == 1 ) )

5254 
cÚfigRUN_TIME_COUNTER_TYPE
 
	$ulTaskG‘IdËRunTimeCouÁ”
( )

5256  
xIdËTaskHªdË
->
ulRunTimeCouÁ”
;

5257 
	}
}

5262 #iàĞĞ
cÚfigGENERATE_RUN_TIME_STATS
 =ğ1 ) && ( 
INCLUDE_xTaskG‘IdËTaskHªdË
 == 1 ) )

5264 
cÚfigRUN_TIME_COUNTER_TYPE
 
	$ulTaskG‘IdËRunTimeP”ûÁ
( )

5266 
cÚfigRUN_TIME_COUNTER_TYPE
 
ulTÙ®Time
, 
ulR‘uº
;

5268 
ulTÙ®Time
 = 
	`pÜtGET_RUN_TIME_COUNTER_VALUE
();

5271 
ulTÙ®Time
 /ğĞ
cÚfigRUN_TIME_COUNTER_TYPE
 ) 100;

5274 ifĞ
ulTÙ®Time
 > ( 
cÚfigRUN_TIME_COUNTER_TYPE
 ) 0 )

5276 
ulR‘uº
 = 
xIdËTaskHªdË
->
ulRunTimeCouÁ”
 / 
ulTÙ®Time
;

5280 
ulR‘uº
 = 0;

5283  
ulR‘uº
;

5284 
	}
}

5289 
	$´vAddCu¼’tTaskToD–ayedLi¡
Ğ
TickTy³_t
 
xTicksToWa™
,

5290 cÚ¡ 
Ba£Ty³_t
 
xCªBlockIndefš™–y
 )

5292 
TickTy³_t
 
xTimeToWake
;

5293 cÚ¡ 
TickTy³_t
 
xCÚ¡TickCouÁ
 = 
xTickCouÁ
;

5295 #iàĞ
INCLUDE_xTaskAbÜtD–ay
 == 1 )

5300 
pxCu¼’tTCB
->
ucD–ayAbÜ‹d
 = 
pdFALSE
;

5306 ifĞ
	`uxLi¡Remove
Ğ&Ğ
pxCu¼’tTCB
->
xS‹Li¡I‹m
 ) ) =ğĞ
UBa£Ty³_t
 ) 0 )

5310 
	`pÜtRESET_READY_PRIORITY
Ğ
pxCu¼’tTCB
->
uxPriÜ™y
, 
uxTİR—dyPriÜ™y
 );

5314 
	`mtCOVERAGE_TEST_MARKER
();

5317 #iàĞ
INCLUDE_vTaskSu¥’d
 == 1 )

5319 ifĞĞ
xTicksToWa™
 =ğ
pÜtMAX_DELAY
 ) && ( 
xCªBlockIndefš™–y
 !ğ
pdFALSE
 ) )

5324 
	`li¡INSERT_END
Ğ&
xSu¥’dedTaskLi¡
, &Ğ
pxCu¼’tTCB
->
xS‹Li¡I‹m
 ) );

5331 
xTimeToWake
 = 
xCÚ¡TickCouÁ
 + 
xTicksToWa™
;

5334 
	`li¡SET_LIST_ITEM_VALUE
Ğ&Ğ
pxCu¼’tTCB
->
xS‹Li¡I‹m
 ), 
xTimeToWake
 );

5336 ifĞ
xTimeToWake
 < 
xCÚ¡TickCouÁ
 )

5340 
	`vLi¡In£¹
Ğ
pxOv”æowD–ayedTaskLi¡
, &Ğ
pxCu¼’tTCB
->
xS‹Li¡I‹m
 ) );

5346 
	`vLi¡In£¹
Ğ
pxD–ayedTaskLi¡
, &Ğ
pxCu¼’tTCB
->
xS‹Li¡I‹m
 ) );

5351 ifĞ
xTimeToWake
 < 
xNextTaskUnblockTime
 )

5353 
xNextTaskUnblockTime
 = 
xTimeToWake
;

5357 
	`mtCOVERAGE_TEST_MARKER
();

5367 
xTimeToWake
 = 
xCÚ¡TickCouÁ
 + 
xTicksToWa™
;

5370 
	`li¡SET_LIST_ITEM_VALUE
Ğ&Ğ
pxCu¼’tTCB
->
xS‹Li¡I‹m
 ), 
xTimeToWake
 );

5372 ifĞ
xTimeToWake
 < 
xCÚ¡TickCouÁ
 )

5375 
	`vLi¡In£¹
Ğ
pxOv”æowD–ayedTaskLi¡
, &Ğ
pxCu¼’tTCB
->
xS‹Li¡I‹m
 ) );

5380 
	`vLi¡In£¹
Ğ
pxD–ayedTaskLi¡
, &Ğ
pxCu¼’tTCB
->
xS‹Li¡I‹m
 ) );

5385 ifĞ
xTimeToWake
 < 
xNextTaskUnblockTime
 )

5387 
xNextTaskUnblockTime
 = 
xTimeToWake
;

5391 
	`mtCOVERAGE_TEST_MARKER
();

5396 Ğè
xCªBlockIndefš™–y
;

5399 
	}
}

5405 #ifdeà
FREERTOS_MODULE_TEST


5406 
	~"sks_‹¡_acûss_funùiÚs.h
"

5410 #iàĞ
cÚfigINCLUDE_FREERTOS_TASK_C_ADDITIONS_H
 == 1 )

5412 
	~"ä“¹os_sks_c_add™iÚs.h
"

5414 #ifdeà
FREERTOS_TASKS_C_ADDITIONS_INIT


5415 
	$ä“¹os_sks_c_add™iÚs_š™
( )

5417 
	`FREERTOS_TASKS_C_ADDITIONS_INIT
();

5418 
	}
}

	@timers.c

30 
	~<¡dlib.h
>

35 
	#MPU_WRAPPERS_INCLUDED_FROM_API_FILE


	)

37 
	~"F»eRTOS.h
"

38 
	~"sk.h
"

39 
	~"queue.h
"

40 
	~"tim”s.h
"

42 #iàĞ
INCLUDE_xTim”P’dFunùiÚC®l
 =ğ1 ) && ( 
cÚfigUSE_TIMERS
 == 0 )

43 #”rÜ 
cÚfigUSE_TIMERS
 
mu¡
 
be
 
£t
 
to
 1Ø
make
 
the
 
xTim”P’dFunùiÚC®l
(è
funùiÚ
 
avaabË
.

50 #undeà
MPU_WRAPPERS_INCLUDED_FROM_API_FILE


57 #iàĞ
cÚfigUSE_TIMERS
 == 1 )

60 
	#tmrNO_DELAY
 ( ( 
TickTy³_t
 ) 0U )

	)

61 
	#tmrMAX_TIME_BEFORE_OVERFLOW
 ( ( 
TickTy³_t
 ) -1 )

	)

65 #iâdeà
cÚfigTIMER_SERVICE_TASK_NAME


66 
	#cÚfigTIMER_SERVICE_TASK_NAME
 "Tm¸Svc"

	)

70 
	#tmrSTATUS_IS_ACTIVE
 ( ( 
ušt8_t
 ) 0x01 )

	)

71 
	#tmrSTATUS_IS_STATICALLY_ALLOCATED
 ( ( 
ušt8_t
 ) 0x02 )

	)

72 
	#tmrSTATUS_IS_AUTORELOAD
 ( ( 
ušt8_t
 ) 0x04 )

	)

75 
	stmrTim”CÚŒŞ


77 cÚ¡ * 
	mpcTim”Name
;

78 
Li¡I‹m_t
 
	mxTim”Li¡I‹m
;

79 
TickTy³_t
 
	mxTim”P”iodInTicks
;

80 * 
	mpvTim”ID
;

81 
Tim”C®lbackFunùiÚ_t
 
	mpxC®lbackFunùiÚ
;

82 #iàĞ
cÚfigUSE_TRACE_FACILITY
 == 1 )

83 
UBa£Ty³_t
 
	muxTim”Numb”
;

85 
ušt8_t
 
	mucStus
;

86 } 
	txTIMER
;

90 
xTIMER
 
	tTim”_t
;

97 
	stmrTim”P¬am‘”s


99 
TickTy³_t
 
	mxMes§geV®ue
;

100 
Tim”_t
 * 
	mpxTim”
;

101 } 
	tTim”P¬am‘”_t
;

104 
	stmrC®lbackP¬am‘”s


106 
P’dedFunùiÚ_t
 
	mpxC®lbackFunùiÚ
;

107 * 
	mpvP¬am‘”1
;

108 
ušt32_t
 
	mulP¬am‘”2
;

109 } 
	tC®lbackP¬am‘”s_t
;

113 
	stmrTim”QueueMes§ge


115 
Ba£Ty³_t
 
	mxMes§geID
;

118 
Tim”P¬am‘”_t
 
	mxTim”P¬am‘”s
;

122 #iàĞ
INCLUDE_xTim”P’dFunùiÚC®l
 == 1 )

123 
C®lbackP¬am‘”s_t
 
	mxC®lbackP¬am‘”s
;

125 } 
	mu
;

126 } 
	tD«mÚTaskMes§ge_t
;

137 
PRIVILEGED_DATA
 
Li¡_t
 
	gxAùiveTim”Li¡1
;

138 
PRIVILEGED_DATA
 
Li¡_t
 
	gxAùiveTim”Li¡2
;

139 
PRIVILEGED_DATA
 
Li¡_t
 * 
	gpxCu¼’tTim”Li¡
;

140 
PRIVILEGED_DATA
 
Li¡_t
 * 
	gpxOv”æowTim”Li¡
;

143 
PRIVILEGED_DATA
 
QueueHªdË_t
 
	gxTim”Queue
 = 
NULL
;

144 
PRIVILEGED_DATA
 
TaskHªdË_t
 
	gxTim”TaskHªdË
 = 
NULL
;

154 
	$´vCheckFÜV®idLi¡AndQueue
Ğè
PRIVILEGED_FUNCTION
;

161 
	$pÜtTASK_FUNCTION_PROTO
Ğ
´vTim”Task
, 
pvP¬am‘”s
 ) 
PRIVILEGED_FUNCTION
;

167 
	$´vProûssReûivedCommªds
Ğè
PRIVILEGED_FUNCTION
;

173 
Ba£Ty³_t
 
	$´vIn£¹Tim”InAùiveLi¡
Ğ
Tim”_t
 * cÚ¡ 
pxTim”
,

174 cÚ¡ 
TickTy³_t
 
xNextExpœyTime
,

175 cÚ¡ 
TickTy³_t
 
xTimeNow
,

176 cÚ¡ 
TickTy³_t
 
xCommªdTime
 ) 
PRIVILEGED_FUNCTION
;

183 
	$´vR–ßdTim”
Ğ
Tim”_t
 * cÚ¡ 
pxTim”
,

184 
TickTy³_t
 
xExpœedTime
,

185 cÚ¡ 
TickTy³_t
 
xTimeNow
 ) 
PRIVILEGED_FUNCTION
;

191 
	$´vProûssExpœedTim”
ĞcÚ¡ 
TickTy³_t
 
xNextExpœeTime
,

192 cÚ¡ 
TickTy³_t
 
xTimeNow
 ) 
PRIVILEGED_FUNCTION
;

198 
	$´vSw™chTim”Li¡s
Ğè
PRIVILEGED_FUNCTION
;

204 
TickTy³_t
 
	$´vSam¶eTimeNow
Ğ
Ba£Ty³_t
 * cÚ¡ 
pxTim”Li¡sW”eSw™ched
 ) 
PRIVILEGED_FUNCTION
;

212 
TickTy³_t
 
	$´vG‘NextExpœeTime
Ğ
Ba£Ty³_t
 * cÚ¡ 
pxLi¡WasEm±y
 ) 
PRIVILEGED_FUNCTION
;

218 
	$´vProûssTim”OrBlockTask
ĞcÚ¡ 
TickTy³_t
 
xNextExpœeTime
,

219 
Ba£Ty³_t
 
xLi¡WasEm±y
 ) 
PRIVILEGED_FUNCTION
;

225 
	$´vIn™Ÿli£NewTim”
ĞcÚ¡ * cÚ¡ 
pcTim”Name
,

226 cÚ¡ 
TickTy³_t
 
xTim”P”iodInTicks
,

227 cÚ¡ 
Ba£Ty³_t
 
xAutoR–ßd
,

228 * cÚ¡ 
pvTim”ID
,

229 
Tim”C®lbackFunùiÚ_t
 
pxC®lbackFunùiÚ
,

230 
Tim”_t
 * 
pxNewTim”
 ) 
PRIVILEGED_FUNCTION
;

233 
Ba£Ty³_t
 
	$xTim”C»©eTim”Task
( )

235 
Ba£Ty³_t
 
xR‘uº
 = 
pdFAIL
;

241 
	`´vCheckFÜV®idLi¡AndQueue
();

243 ifĞ
xTim”Queue
 !ğ
NULL
 )

245 #iàĞ
cÚfigSUPPORT_STATIC_ALLOCATION
 == 1 )

247 
SticTask_t
 * 
pxTim”TaskTCBBufãr
 = 
NULL
;

248 
SckTy³_t
 * 
pxTim”TaskSckBufãr
 = 
NULL
;

249 
ušt32_t
 
ulTim”TaskSckSize
;

251 
	`vAµliÿtiÚG‘Tim”TaskMemÜy
Ğ&
pxTim”TaskTCBBufãr
, &
pxTim”TaskSckBufãr
, &
ulTim”TaskSckSize
 );

252 
xTim”TaskHªdË
 = 
	`xTaskC»©eStic
Ğ
´vTim”Task
,

253 
cÚfigTIMER_SERVICE_TASK_NAME
,

254 
ulTim”TaskSckSize
,

255 
NULL
,

256 ĞĞ
UBa£Ty³_t
 ) 
cÚfigTIMER_TASK_PRIORITY
 ) | 
pÜtPRIVILEGE_BIT
,

257 
pxTim”TaskSckBufãr
,

258 
pxTim”TaskTCBBufãr
 );

260 ifĞ
xTim”TaskHªdË
 !ğ
NULL
 )

262 
xR‘uº
 = 
pdPASS
;

267 
xR‘uº
 = 
	`xTaskC»©e
Ğ
´vTim”Task
,

268 
cÚfigTIMER_SERVICE_TASK_NAME
,

269 
cÚfigTIMER_TASK_STACK_DEPTH
,

270 
NULL
,

271 ĞĞ
UBa£Ty³_t
 ) 
cÚfigTIMER_TASK_PRIORITY
 ) | 
pÜtPRIVILEGE_BIT
,

272 &
xTim”TaskHªdË
 );

278 
	`mtCOVERAGE_TEST_MARKER
();

281 
	`cÚfigASSERT
Ğ
xR‘uº
 );

282  
xR‘uº
;

283 
	}
}

286 #iàĞ
cÚfigSUPPORT_DYNAMIC_ALLOCATION
 == 1 )

288 
Tim”HªdË_t
 
	$xTim”C»©e
ĞcÚ¡ * cÚ¡ 
pcTim”Name
,

289 cÚ¡ 
TickTy³_t
 
xTim”P”iodInTicks
,

290 cÚ¡ 
Ba£Ty³_t
 
xAutoR–ßd
,

291 * cÚ¡ 
pvTim”ID
,

292 
Tim”C®lbackFunùiÚ_t
 
pxC®lbackFunùiÚ
 )

294 
Tim”_t
 * 
pxNewTim”
;

296 
pxNewTim”
 = ( 
Tim”_t
 * ) 
	`pvPÜtM®loc
( ( Timer_t ) );

298 ifĞ
pxNewTim”
 !ğ
NULL
 )

303 
pxNewTim”
->
ucStus
 = 0x00;

304 
	`´vIn™Ÿli£NewTim”
Ğ
pcTim”Name
, 
xTim”P”iodInTicks
, 
xAutoR–ßd
, 
pvTim”ID
, 
pxC®lbackFunùiÚ
, 
pxNewTim”
 );

307  
pxNewTim”
;

308 
	}
}

313 #iàĞ
cÚfigSUPPORT_STATIC_ALLOCATION
 == 1 )

315 
Tim”HªdË_t
 
	$xTim”C»©eStic
ĞcÚ¡ * cÚ¡ 
pcTim”Name
,

316 cÚ¡ 
TickTy³_t
 
xTim”P”iodInTicks
,

317 cÚ¡ 
Ba£Ty³_t
 
xAutoR–ßd
,

318 * cÚ¡ 
pvTim”ID
,

319 
Tim”C®lbackFunùiÚ_t
 
pxC®lbackFunùiÚ
,

320 
SticTim”_t
 * 
pxTim”Bufãr
 )

322 
Tim”_t
 * 
pxNewTim”
;

324 #iàĞ
cÚfigASSERT_DEFINED
 == 1 )

329 vŞ©
size_t
 
xSize
 = Ğ
SticTim”_t
 );

330 
	`cÚfigASSERT
Ğ
xSize
 =ğĞ
Tim”_t
 ) );

331 Ğè
xSize
;

336 
	`cÚfigASSERT
Ğ
pxTim”Bufãr
 );

337 
pxNewTim”
 = ( 
Tim”_t
 * ) 
pxTim”Bufãr
;

339 ifĞ
pxNewTim”
 !ğ
NULL
 )

344 
pxNewTim”
->
ucStus
 = 
tmrSTATUS_IS_STATICALLY_ALLOCATED
;

346 
	`´vIn™Ÿli£NewTim”
Ğ
pcTim”Name
, 
xTim”P”iodInTicks
, 
xAutoR–ßd
, 
pvTim”ID
, 
pxC®lbackFunùiÚ
, 
pxNewTim”
 );

349  
pxNewTim”
;

350 
	}
}

355 
	$´vIn™Ÿli£NewTim”
ĞcÚ¡ * cÚ¡ 
pcTim”Name
,

356 cÚ¡ 
TickTy³_t
 
xTim”P”iodInTicks
,

357 cÚ¡ 
Ba£Ty³_t
 
xAutoR–ßd
,

358 * cÚ¡ 
pvTim”ID
,

359 
Tim”C®lbackFunùiÚ_t
 
pxC®lbackFunùiÚ
,

360 
Tim”_t
 * 
pxNewTim”
 )

363 
	`cÚfigASSERT
ĞĞ
xTim”P”iodInTicks
 > 0 ) );

367 
	`´vCheckFÜV®idLi¡AndQueue
();

371 
pxNewTim”
->
pcTim”Name
 =…cTimerName;

372 
pxNewTim”
->
xTim”P”iodInTicks
 = xTimerPeriodInTicks;

373 
pxNewTim”
->
pvTim”ID
 =…vTimerID;

374 
pxNewTim”
->
pxC®lbackFunùiÚ
 =…xCallbackFunction;

375 
	`vLi¡In™Ÿli£I‹m
Ğ&Ğ
pxNewTim”
->
xTim”Li¡I‹m
 ) );

377 ifĞ
xAutoR–ßd
 !ğ
pdFALSE
 )

379 
pxNewTim”
->
ucStus
 |ğ
tmrSTATUS_IS_AUTORELOAD
;

382 
	`ŒaûTIMER_CREATE
Ğ
pxNewTim”
 );

383 
	}
}

386 
Ba£Ty³_t
 
	$xTim”G’”icCommªd
Ğ
Tim”HªdË_t
 
xTim”
,

387 cÚ¡ 
Ba£Ty³_t
 
xCommªdID
,

388 cÚ¡ 
TickTy³_t
 
xO±iÚ®V®ue
,

389 
Ba£Ty³_t
 * cÚ¡ 
pxHigh”PriÜ™yTaskWok’
,

390 cÚ¡ 
TickTy³_t
 
xTicksToWa™
 )

392 
Ba£Ty³_t
 
xR‘uº
 = 
pdFAIL
;

393 
D«mÚTaskMes§ge_t
 
xMes§ge
;

395 
	`cÚfigASSERT
Ğ
xTim”
 );

399 ifĞ
xTim”Queue
 !ğ
NULL
 )

402 
xMes§ge
.
xMes§geID
 = 
xCommªdID
;

403 
xMes§ge
.
u
.
xTim”P¬am‘”s
.
xMes§geV®ue
 = 
xO±iÚ®V®ue
;

404 
xMes§ge
.
u
.
xTim”P¬am‘”s
.
pxTim”
 = 
xTim”
;

406 ifĞ
xCommªdID
 < 
tmrFIRST_FROM_ISR_COMMAND
 )

408 ifĞ
	`xTaskG‘ScheduËrS‹
(è=ğ
skSCHEDULER_RUNNING
 )

410 
xR‘uº
 = 
	`xQueueS’dToBack
Ğ
xTim”Queue
, &
xMes§ge
, 
xTicksToWa™
 );

414 
xR‘uº
 = 
	`xQueueS’dToBack
Ğ
xTim”Queue
, &
xMes§ge
, 
tmrNO_DELAY
 );

419 
xR‘uº
 = 
	`xQueueS’dToBackFromISR
Ğ
xTim”Queue
, &
xMes§ge
, 
pxHigh”PriÜ™yTaskWok’
 );

422 
	`ŒaûTIMER_COMMAND_SEND
Ğ
xTim”
, 
xCommªdID
, 
xO±iÚ®V®ue
, 
xR‘uº
 );

426 
	`mtCOVERAGE_TEST_MARKER
();

429  
xR‘uº
;

430 
	}
}

433 
TaskHªdË_t
 
	$xTim”G‘Tim”D«mÚTaskHªdË
( )

437 
	`cÚfigASSERT
ĞĞ
xTim”TaskHªdË
 !ğ
NULL
 ) );

438  
xTim”TaskHªdË
;

439 
	}
}

442 
TickTy³_t
 
	$xTim”G‘P”iod
Ğ
Tim”HªdË_t
 
xTim”
 )

444 
Tim”_t
 * 
pxTim”
 = 
xTim”
;

446 
	`cÚfigASSERT
Ğ
xTim”
 );

447  
pxTim”
->
xTim”P”iodInTicks
;

448 
	}
}

451 
	$vTim”S‘R–ßdMode
Ğ
Tim”HªdË_t
 
xTim”
,

452 cÚ¡ 
Ba£Ty³_t
 
xAutoR–ßd
 )

454 
Tim”_t
 * 
pxTim”
 = 
xTim”
;

456 
	`cÚfigASSERT
Ğ
xTim”
 );

457 
	`skENTER_CRITICAL
();

459 ifĞ
xAutoR–ßd
 !ğ
pdFALSE
 )

461 
pxTim”
->
ucStus
 |ğ
tmrSTATUS_IS_AUTORELOAD
;

465 
pxTim”
->
ucStus
 &ğĞĞ
ušt8_t
 ) ~
tmrSTATUS_IS_AUTORELOAD
 );

468 
	`skEXIT_CRITICAL
();

469 
	}
}

472 
Ba£Ty³_t
 
	$xTim”G‘R–ßdMode
Ğ
Tim”HªdË_t
 
xTim”
 )

474 
Tim”_t
 * 
pxTim”
 = 
xTim”
;

475 
Ba£Ty³_t
 
xR‘uº
;

477 
	`cÚfigASSERT
Ğ
xTim”
 );

478 
	`skENTER_CRITICAL
();

480 ifĞĞ
pxTim”
->
ucStus
 & 
tmrSTATUS_IS_AUTORELOAD
 ) == 0 )

483 
xR‘uº
 = 
pdFALSE
;

488 
xR‘uº
 = 
pdTRUE
;

491 
	`skEXIT_CRITICAL
();

493  
xR‘uº
;

494 
	}
}

496 
UBa£Ty³_t
 
	$uxTim”G‘R–ßdMode
Ğ
Tim”HªdË_t
 
xTim”
 )

498  ( 
UBa£Ty³_t
 ) 
	`xTim”G‘R–ßdMode
Ğ
xTim”
 );

499 
	}
}

502 
TickTy³_t
 
	$xTim”G‘ExpœyTime
Ğ
Tim”HªdË_t
 
xTim”
 )

504 
Tim”_t
 * 
pxTim”
 = 
xTim”
;

505 
TickTy³_t
 
xR‘uº
;

507 
	`cÚfigASSERT
Ğ
xTim”
 );

508 
xR‘uº
 = 
	`li¡GET_LIST_ITEM_VALUE
Ğ&Ğ
pxTim”
->
xTim”Li¡I‹m
 ) );

509  
xR‘uº
;

510 
	}
}

513 cÚ¡ * 
	$pcTim”G‘Name
Ğ
Tim”HªdË_t
 
xTim”
 )

515 
Tim”_t
 * 
pxTim”
 = 
xTim”
;

517 
	`cÚfigASSERT
Ğ
xTim”
 );

518  
pxTim”
->
pcTim”Name
;

519 
	}
}

522 
	$´vR–ßdTim”
Ğ
Tim”_t
 * cÚ¡ 
pxTim”
,

523 
TickTy³_t
 
xExpœedTime
,

524 cÚ¡ 
TickTy³_t
 
xTimeNow
 )

529  
	`´vIn£¹Tim”InAùiveLi¡
Ğ
pxTim”
, ( 
xExpœedTime
 +…xTim”->
xTim”P”iodInTicks
 ), 
xTimeNow
, xExpœedTimè!ğ
pdFALSE
 )

532 
xExpœedTime
 +ğ
pxTim”
->
xTim”P”iodInTicks
;

535 
	`ŒaûTIMER_EXPIRED
Ğ
pxTim”
 );

536 
pxTim”
->
	`pxC®lbackFunùiÚ
ĞĞ
Tim”HªdË_t
 )…xTimer );

538 
	}
}

541 
	$´vProûssExpœedTim”
ĞcÚ¡ 
TickTy³_t
 
xNextExpœeTime
,

542 cÚ¡ 
TickTy³_t
 
xTimeNow
 )

544 
Tim”_t
 * cÚ¡ 
pxTim”
 = ( Tim”_ˆ* ) 
	`li¡GET_OWNER_OF_HEAD_ENTRY
Ğ
pxCu¼’tTim”Li¡
 );

549 Ğè
	`uxLi¡Remove
Ğ&Ğ
pxTim”
->
xTim”Li¡I‹m
 ) );

553 ifĞĞ
pxTim”
->
ucStus
 & 
tmrSTATUS_IS_AUTORELOAD
 ) != 0 )

555 
	`´vR–ßdTim”
Ğ
pxTim”
, 
xNextExpœeTime
, 
xTimeNow
 );

559 
pxTim”
->
ucStus
 &ğĞĞ
ušt8_t
 ) ~
tmrSTATUS_IS_ACTIVE
 );

563 
	`ŒaûTIMER_EXPIRED
Ğ
pxTim”
 );

564 
pxTim”
->
	`pxC®lbackFunùiÚ
ĞĞ
Tim”HªdË_t
 )…xTimer );

565 
	}
}

568 
	$pÜtTASK_FUNCTION
Ğ
´vTim”Task
, 
pvP¬am‘”s
 )

570 
TickTy³_t
 
xNextExpœeTime
;

571 
Ba£Ty³_t
 
xLi¡WasEm±y
;

574 Ğè
pvP¬am‘”s
;

576 #iàĞ
cÚfigUSE_DAEMON_TASK_STARTUP_HOOK
 == 1 )

578 
	`vAµliÿtiÚD«mÚTaskS¹upHook
( );

584 
	`vAµliÿtiÚD«mÚTaskS¹upHook
();

592 
xNextExpœeTime
 = 
	`´vG‘NextExpœeTime
Ğ&
xLi¡WasEm±y
 );

596 
	`´vProûssTim”OrBlockTask
Ğ
xNextExpœeTime
, 
xLi¡WasEm±y
 );

599 
	`´vProûssReûivedCommªds
();

601 
	}
}

604 
	$´vProûssTim”OrBlockTask
ĞcÚ¡ 
TickTy³_t
 
xNextExpœeTime
,

605 
Ba£Ty³_t
 
xLi¡WasEm±y
 )

607 
TickTy³_t
 
xTimeNow
;

608 
Ba£Ty³_t
 
xTim”Li¡sW”eSw™ched
;

610 
	`vTaskSu¥’dAÎ
();

617 
xTimeNow
 = 
	`´vSam¶eTimeNow
Ğ&
xTim”Li¡sW”eSw™ched
 );

619 ifĞ
xTim”Li¡sW”eSw™ched
 =ğ
pdFALSE
 )

622 ifĞĞ
xLi¡WasEm±y
 =ğ
pdFALSE
 ) && ( 
xNextExpœeTime
 <ğ
xTimeNow
 ) )

624 Ğè
	`xTaskResumeAÎ
();

625 
	`´vProûssExpœedTim”
Ğ
xNextExpœeTime
, 
xTimeNow
 );

635 ifĞ
xLi¡WasEm±y
 !ğ
pdFALSE
 )

639 
xLi¡WasEm±y
 = 
	`li¡LIST_IS_EMPTY
Ğ
pxOv”æowTim”Li¡
 );

642 
	`vQueueWa™FÜMes§geRe¡riùed
Ğ
xTim”Queue
, ( 
xNextExpœeTime
 - 
xTimeNow
 ), 
xLi¡WasEm±y
 );

644 ifĞ
	`xTaskResumeAÎ
(è=ğ
pdFALSE
 )

650 
	`pÜtYIELD_WITHIN_API
();

654 
	`mtCOVERAGE_TEST_MARKER
();

660 Ğè
	`xTaskResumeAÎ
();

663 
	}
}

666 
TickTy³_t
 
	$´vG‘NextExpœeTime
Ğ
Ba£Ty³_t
 * cÚ¡ 
pxLi¡WasEm±y
 )

668 
TickTy³_t
 
xNextExpœeTime
;

677 *
pxLi¡WasEm±y
 = 
	`li¡LIST_IS_EMPTY
Ğ
pxCu¼’tTim”Li¡
 );

679 ifĞ*
pxLi¡WasEm±y
 =ğ
pdFALSE
 )

681 
xNextExpœeTime
 = 
	`li¡GET_ITEM_VALUE_OF_HEAD_ENTRY
Ğ
pxCu¼’tTim”Li¡
 );

686 
xNextExpœeTime
 = ( 
TickTy³_t
 ) 0U;

689  
xNextExpœeTime
;

690 
	}
}

693 
TickTy³_t
 
	$´vSam¶eTimeNow
Ğ
Ba£Ty³_t
 * cÚ¡ 
pxTim”Li¡sW”eSw™ched
 )

695 
TickTy³_t
 
xTimeNow
;

696 
PRIVILEGED_DATA
 
TickTy³_t
 
xLa¡Time
 = ( TickType_t ) 0U;

698 
xTimeNow
 = 
	`xTaskG‘TickCouÁ
();

700 ifĞ
xTimeNow
 < 
xLa¡Time
 )

702 
	`´vSw™chTim”Li¡s
();

703 *
pxTim”Li¡sW”eSw™ched
 = 
pdTRUE
;

707 *
pxTim”Li¡sW”eSw™ched
 = 
pdFALSE
;

710 
xLa¡Time
 = 
xTimeNow
;

712  
xTimeNow
;

713 
	}
}

716 
Ba£Ty³_t
 
	$´vIn£¹Tim”InAùiveLi¡
Ğ
Tim”_t
 * cÚ¡ 
pxTim”
,

717 cÚ¡ 
TickTy³_t
 
xNextExpœyTime
,

718 cÚ¡ 
TickTy³_t
 
xTimeNow
,

719 cÚ¡ 
TickTy³_t
 
xCommªdTime
 )

721 
Ba£Ty³_t
 
xProûssTim”Now
 = 
pdFALSE
;

723 
	`li¡SET_LIST_ITEM_VALUE
Ğ&Ğ
pxTim”
->
xTim”Li¡I‹m
 ), 
xNextExpœyTime
 );

724 
	`li¡SET_LIST_ITEM_OWNER
Ğ&Ğ
pxTim”
->
xTim”Li¡I‹m
 ),…xTimer );

726 ifĞ
xNextExpœyTime
 <ğ
xTimeNow
 )

730 ifĞĞĞ
TickTy³_t
 ) ( 
xTimeNow
 - 
xCommªdTime
 ) ) >ğ
pxTim”
->
xTim”P”iodInTicks
 )

734 
xProûssTim”Now
 = 
pdTRUE
;

738 
	`vLi¡In£¹
Ğ
pxOv”æowTim”Li¡
, &Ğ
pxTim”
->
xTim”Li¡I‹m
 ) );

743 ifĞĞ
xTimeNow
 < 
xCommªdTime
 ) && ( 
xNextExpœyTime
 >= xCommandTime ) )

748 
xProûssTim”Now
 = 
pdTRUE
;

752 
	`vLi¡In£¹
Ğ
pxCu¼’tTim”Li¡
, &Ğ
pxTim”
->
xTim”Li¡I‹m
 ) );

756  
xProûssTim”Now
;

757 
	}
}

760 
	$´vProûssReûivedCommªds
( )

762 
D«mÚTaskMes§ge_t
 
xMes§ge
;

763 
Tim”_t
 * 
pxTim”
;

764 
Ba£Ty³_t
 
xTim”Li¡sW”eSw™ched
;

765 
TickTy³_t
 
xTimeNow
;

767  
	`xQueueReûive
Ğ
xTim”Queue
, &
xMes§ge
, 
tmrNO_DELAY
 ) !ğ
pdFAIL
 )

769 #iàĞ
INCLUDE_xTim”P’dFunùiÚC®l
 == 1 )

773 ifĞ
xMes§ge
.
xMes§geID
 < ( 
Ba£Ty³_t
 ) 0 )

775 cÚ¡ 
C®lbackP¬am‘”s_t
 * cÚ¡ 
pxC®lback
 = &Ğ
xMes§ge
.
u
.
xC®lbackP¬am‘”s
 );

779 
	`cÚfigASSERT
Ğ
pxC®lback
 );

782 
pxC®lback
->
	`pxC®lbackFunùiÚ
ĞpxC®lback->
pvP¬am‘”1
,…xC®lback->
ulP¬am‘”2
 );

786 
	`mtCOVERAGE_TEST_MARKER
();

793 ifĞ
xMes§ge
.
xMes§geID
 >ğĞ
Ba£Ty³_t
 ) 0 )

797 
pxTim”
 = 
xMes§ge
.
u
.
xTim”P¬am‘”s
.pxTimer;

799 ifĞ
	`li¡IS_CONTAINED_WITHIN
Ğ
NULL
, &Ğ
pxTim”
->
xTim”Li¡I‹m
 ) ) =ğ
pdFALSE
 )

802 Ğè
	`uxLi¡Remove
Ğ&Ğ
pxTim”
->
xTim”Li¡I‹m
 ) );

806 
	`mtCOVERAGE_TEST_MARKER
();

809 
	`ŒaûTIMER_COMMAND_RECEIVED
Ğ
pxTim”
, 
xMes§ge
.
xMes§geID
, xMes§ge.
u
.
xTim”P¬am‘”s
.
xMes§geV®ue
 );

817 
xTimeNow
 = 
	`´vSam¶eTimeNow
Ğ&
xTim”Li¡sW”eSw™ched
 );

819  
xMes§ge
.
xMes§geID
 )

821 
tmrCOMMAND_START
:

822 
tmrCOMMAND_START_FROM_ISR
:

823 
tmrCOMMAND_RESET
:

824 
tmrCOMMAND_RESET_FROM_ISR
:

826 
pxTim”
->
ucStus
 |ğ
tmrSTATUS_IS_ACTIVE
;

828 ifĞ
	`´vIn£¹Tim”InAùiveLi¡
Ğ
pxTim”
, 
xMes§ge
.
u
.
xTim”P¬am‘”s
.
xMes§geV®ue
 +…xTim”->
xTim”P”iodInTicks
, 
xTimeNow
, xMes§ge.u.xTim”P¬am‘”s.xMes§geV®uè!ğ
pdFALSE
 )

832 ifĞĞ
pxTim”
->
ucStus
 & 
tmrSTATUS_IS_AUTORELOAD
 ) != 0 )

834 
	`´vR–ßdTim”
Ğ
pxTim”
, 
xMes§ge
.
u
.
xTim”P¬am‘”s
.
xMes§geV®ue
 +…xTim”->
xTim”P”iodInTicks
, 
xTimeNow
 );

838 
pxTim”
->
ucStus
 &ğĞĞ
ušt8_t
 ) ~
tmrSTATUS_IS_ACTIVE
 );

842 
	`ŒaûTIMER_EXPIRED
Ğ
pxTim”
 );

843 
pxTim”
->
	`pxC®lbackFunùiÚ
ĞĞ
Tim”HªdË_t
 )…xTimer );

847 
	`mtCOVERAGE_TEST_MARKER
();

852 
tmrCOMMAND_STOP
:

853 
tmrCOMMAND_STOP_FROM_ISR
:

855 
pxTim”
->
ucStus
 &ğĞĞ
ušt8_t
 ) ~
tmrSTATUS_IS_ACTIVE
 );

858 
tmrCOMMAND_CHANGE_PERIOD
:

859 
tmrCOMMAND_CHANGE_PERIOD_FROM_ISR
:

860 
pxTim”
->
ucStus
 |ğ
tmrSTATUS_IS_ACTIVE
;

861 
pxTim”
->
xTim”P”iodInTicks
 = 
xMes§ge
.
u
.
xTim”P¬am‘”s
.
xMes§geV®ue
;

862 
	`cÚfigASSERT
ĞĞ
pxTim”
->
xTim”P”iodInTicks
 > 0 ) );

870 Ğè
	`´vIn£¹Tim”InAùiveLi¡
Ğ
pxTim”
, ( 
xTimeNow
 +…xTim”->
xTim”P”iodInTicks
 ), xTimeNow, xTimeNow );

873 
tmrCOMMAND_DELETE
:

874 #iàĞ
cÚfigSUPPORT_DYNAMIC_ALLOCATION
 == 1 )

879 ifĞĞ
pxTim”
->
ucStus
 & 
tmrSTATUS_IS_STATICALLY_ALLOCATED
 ) =ğĞ
ušt8_t
 ) 0 )

881 
	`vPÜtF»e
Ğ
pxTim”
 );

885 
pxTim”
->
ucStus
 &ğĞĞ
ušt8_t
 ) ~
tmrSTATUS_IS_ACTIVE
 );

894 
pxTim”
->
ucStus
 &ğĞĞ
ušt8_t
 ) ~
tmrSTATUS_IS_ACTIVE
 );

905 
	}
}

908 
	$´vSw™chTim”Li¡s
( )

910 
TickTy³_t
 
xNextExpœeTime
;

911 
Li¡_t
 * 
pxTemp
;

917  
	`li¡LIST_IS_EMPTY
Ğ
pxCu¼’tTim”Li¡
 ) =ğ
pdFALSE
 )

919 
xNextExpœeTime
 = 
	`li¡GET_ITEM_VALUE_OF_HEAD_ENTRY
Ğ
pxCu¼’tTim”Li¡
 );

924 
	`´vProûssExpœedTim”
Ğ
xNextExpœeTime
, 
tmrMAX_TIME_BEFORE_OVERFLOW
 );

927 
pxTemp
 = 
pxCu¼’tTim”Li¡
;

928 
pxCu¼’tTim”Li¡
 = 
pxOv”æowTim”Li¡
;

929 
pxOv”æowTim”Li¡
 = 
pxTemp
;

930 
	}
}

933 
	$´vCheckFÜV®idLi¡AndQueue
( )

938 
	`skENTER_CRITICAL
();

940 ifĞ
xTim”Queue
 =ğ
NULL
 )

942 
	`vLi¡In™Ÿli£
Ğ&
xAùiveTim”Li¡1
 );

943 
	`vLi¡In™Ÿli£
Ğ&
xAùiveTim”Li¡2
 );

944 
pxCu¼’tTim”Li¡
 = &
xAùiveTim”Li¡1
;

945 
pxOv”æowTim”Li¡
 = &
xAùiveTim”Li¡2
;

947 #iàĞ
cÚfigSUPPORT_STATIC_ALLOCATION
 == 1 )

951 
PRIVILEGED_DATA
 
SticQueue_t
 
xSticTim”Queue
;

952 
PRIVILEGED_DATA
 
ušt8_t
 
ucSticTim”QueueStÜage
[ ( 
size_t
 ) 
cÚfigTIMER_QUEUE_LENGTH
 * Ğ
D«mÚTaskMes§ge_t
 ) ];

954 
xTim”Queue
 = 
	`xQueueC»©eStic
ĞĞ
UBa£Ty³_t
 ) 
cÚfigTIMER_QUEUE_LENGTH
, ( UBa£Ty³_ˆèĞ
D«mÚTaskMes§ge_t
 ), &Ğ
ucSticTim”QueueStÜage
[ 0 ] ), &
xSticTim”Queue
 );

958 
xTim”Queue
 = 
	`xQueueC»©e
ĞĞ
UBa£Ty³_t
 ) 
cÚfigTIMER_QUEUE_LENGTH
, Ğ
D«mÚTaskMes§ge_t
 ) );

962 #iàĞ
cÚfigQUEUE_REGISTRY_SIZE
 > 0 )

964 ifĞ
xTim”Queue
 !ğ
NULL
 )

966 
	`vQueueAddToRegi¡ry
Ğ
xTim”Queue
, "TmrQ" );

970 
	`mtCOVERAGE_TEST_MARKER
();

977 
	`mtCOVERAGE_TEST_MARKER
();

980 
	`skEXIT_CRITICAL
();

981 
	}
}

984 
Ba£Ty³_t
 
	$xTim”IsTim”Aùive
Ğ
Tim”HªdË_t
 
xTim”
 )

986 
Ba£Ty³_t
 
xR‘uº
;

987 
Tim”_t
 * 
pxTim”
 = 
xTim”
;

989 
	`cÚfigASSERT
Ğ
xTim”
 );

992 
	`skENTER_CRITICAL
();

994 ifĞĞ
pxTim”
->
ucStus
 & 
tmrSTATUS_IS_ACTIVE
 ) == 0 )

996 
xR‘uº
 = 
pdFALSE
;

1000 
xR‘uº
 = 
pdTRUE
;

1003 
	`skEXIT_CRITICAL
();

1005  
xR‘uº
;

1006 
	}
}

1009 * 
	$pvTim”G‘Tim”ID
ĞcÚ¡ 
Tim”HªdË_t
 
xTim”
 )

1011 
Tim”_t
 * cÚ¡ 
pxTim”
 = 
xTim”
;

1012 * 
pvR‘uº
;

1014 
	`cÚfigASSERT
Ğ
xTim”
 );

1016 
	`skENTER_CRITICAL
();

1018 
pvR‘uº
 = 
pxTim”
->
pvTim”ID
;

1020 
	`skEXIT_CRITICAL
();

1022  
pvR‘uº
;

1023 
	}
}

1026 
	$vTim”S‘Tim”ID
Ğ
Tim”HªdË_t
 
xTim”
,

1027 * 
pvNewID
 )

1029 
Tim”_t
 * cÚ¡ 
pxTim”
 = 
xTim”
;

1031 
	`cÚfigASSERT
Ğ
xTim”
 );

1033 
	`skENTER_CRITICAL
();

1035 
pxTim”
->
pvTim”ID
 = 
pvNewID
;

1037 
	`skEXIT_CRITICAL
();

1038 
	}
}

1041 #iàĞ
INCLUDE_xTim”P’dFunùiÚC®l
 == 1 )

1043 
Ba£Ty³_t
 
	$xTim”P’dFunùiÚC®lFromISR
Ğ
P’dedFunùiÚ_t
 
xFunùiÚToP’d
,

1044 * 
pvP¬am‘”1
,

1045 
ušt32_t
 
ulP¬am‘”2
,

1046 
Ba£Ty³_t
 * 
pxHigh”PriÜ™yTaskWok’
 )

1048 
D«mÚTaskMes§ge_t
 
xMes§ge
;

1049 
Ba£Ty³_t
 
xR‘uº
;

1053 
xMes§ge
.
xMes§geID
 = 
tmrCOMMAND_EXECUTE_CALLBACK_FROM_ISR
;

1054 
xMes§ge
.
u
.
xC®lbackP¬am‘”s
.
pxC®lbackFunùiÚ
 = 
xFunùiÚToP’d
;

1055 
xMes§ge
.
u
.
xC®lbackP¬am‘”s
.
pvP¬am‘”1
 =…vParameter1;

1056 
xMes§ge
.
u
.
xC®lbackP¬am‘”s
.
ulP¬am‘”2
 = ulParameter2;

1058 
xR‘uº
 = 
	`xQueueS’dFromISR
Ğ
xTim”Queue
, &
xMes§ge
, 
pxHigh”PriÜ™yTaskWok’
 );

1060 
	`ŒaûPEND_FUNC_CALL_FROM_ISR
Ğ
xFunùiÚToP’d
, 
pvP¬am‘”1
, 
ulP¬am‘”2
, 
xR‘uº
 );

1062  
xR‘uº
;

1063 
	}
}

1068 #iàĞ
INCLUDE_xTim”P’dFunùiÚC®l
 == 1 )

1070 
Ba£Ty³_t
 
	$xTim”P’dFunùiÚC®l
Ğ
P’dedFunùiÚ_t
 
xFunùiÚToP’d
,

1071 * 
pvP¬am‘”1
,

1072 
ušt32_t
 
ulP¬am‘”2
,

1073 
TickTy³_t
 
xTicksToWa™
 )

1075 
D«mÚTaskMes§ge_t
 
xMes§ge
;

1076 
Ba£Ty³_t
 
xR‘uº
;

1081 
	`cÚfigASSERT
Ğ
xTim”Queue
 );

1085 
xMes§ge
.
xMes§geID
 = 
tmrCOMMAND_EXECUTE_CALLBACK
;

1086 
xMes§ge
.
u
.
xC®lbackP¬am‘”s
.
pxC®lbackFunùiÚ
 = 
xFunùiÚToP’d
;

1087 
xMes§ge
.
u
.
xC®lbackP¬am‘”s
.
pvP¬am‘”1
 =…vParameter1;

1088 
xMes§ge
.
u
.
xC®lbackP¬am‘”s
.
ulP¬am‘”2
 = ulParameter2;

1090 
xR‘uº
 = 
	`xQueueS’dToBack
Ğ
xTim”Queue
, &
xMes§ge
, 
xTicksToWa™
 );

1092 
	`ŒaûPEND_FUNC_CALL
Ğ
xFunùiÚToP’d
, 
pvP¬am‘”1
, 
ulP¬am‘”2
, 
xR‘uº
 );

1094  
xR‘uº
;

1095 
	}
}

1100 #iàĞ
cÚfigUSE_TRACE_FACILITY
 == 1 )

1102 
UBa£Ty³_t
 
	$uxTim”G‘Tim”Numb”
Ğ
Tim”HªdË_t
 
xTim”
 )

1104  ( ( 
Tim”_t
 * ) 
xTim”
 )->
uxTim”Numb”
;

1105 
	}
}

1110 #iàĞ
cÚfigUSE_TRACE_FACILITY
 == 1 )

1112 
	$vTim”S‘Tim”Numb”
Ğ
Tim”HªdË_t
 
xTim”
,

1113 
UBa£Ty³_t
 
uxTim”Numb”
 )

1115 ĞĞ
Tim”_t
 * ) 
xTim”
 )->
uxTim”Numb”
 = uxTimerNumber;

1116 
	}
}

	@
1
.
0
7
74
croutine.c
event_groups.c
list.c
queue.c
stream_buffer.c
tasks.c
timers.c
